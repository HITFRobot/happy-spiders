{"praise_nums": "3", "title": "他们是优秀的前端，所以这些后端工作也交给他们…", "front_image_path": "full/675acba0c3fe762a3da3697c582bdec7fa10530b.jpg", "front_image_url": ["http://wx4.sinaimg.cn/mw690/7cc829d3gy1fkm7cqqsr0j20m40er0tm.jpg"], "create_date": "2017/12/07", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://hackernoon.com/the-myth-of-the-interchangeable-developer-38d41aff563e\">Scott Shipp</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p class=\"graf graf--p graf-after--h3\">我多次听经理或招聘人员说，优秀工程师是可以与其他优秀工程师交换的。他们可能会说，“首席工程师为这个项目选择了 F# 语言，如果外面没有太多的 F# 开发者，那么有几年经验的优秀开发者应该也还不错。”</p>\n<p id=\"9c5c\" class=\"graf graf--p graf-after--figure\">我还听说过一些这样的言论，“我知道他们是前端人员，但我们现在需要他们做些后端工作。因为他们本身很优秀，所以这没什么大不了的。”</p>\n<p class=\"graf graf--p graf-after--p\">如果你相信这些蠢话，那我都可以把布鲁克林大桥卖给你了。我还创立了下一个独角兽公司，业务就是把冰卖给爱斯基摩人！我敢肯定，公司很快会有 10 亿美元的估值！机会难得，快来投资吧~</p>\n<p class=\"graf graf--p graf-after--p\"><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fkm7cqqsr0j20m40er0tm.jpg\" width=\"690\" height=\"460\"></p>\n<p class=\"graf graf--p graf-after--p\">好吧，不开玩笑了，说实在的，“优秀的”软件工程师可以交换，这样的想法并不靠谱。我有时会对软件工作感到疑惑，是不是我在简历上写，“我保持良好的记录，不断在新技术上开拓驰骋”，然后我就能去任何想去的公司了？</p>\n<p class=\"graf graf--p graf-after--p\">我不敢相信今天要坐下来和你解释这一点，但是，现在让我们从语言差异开始说起。实际上，我已经将多种语言的代码投入生产，从 Scala 到 C#，从 Java 到 JavaScript。即使我能在几周内学会任何类 C 语言的的语法，（给别人可能需要更多时间，）我仍然清楚地知道，我不会用一种新的语言去开发一个生产代码库。</p>\n<p class=\"graf graf--p graf-after--p\">那么行业或商业背景呢？我已经涉猎在很多领域，包括健康卫生、电子商务、教育和电信。我是否应该认为我有资格在社交媒体工作哪？那么制造业、航空航天、数字加密货币（Cryptocurrency）哪？我的领域究竟能拓展到哪一块？在我被要求从 Web 过渡到移动、桌面或物联网时，也发生了同样的情况。</p>\n<p class=\"graf graf--p graf-after--p\">现在，让我给你讲个小故事。去年，在做后端 Java web 服务工程师的全职工作时，我还参与了另一个团队的工作，他们要在 Ionic Framework 中做一个移动应用程序，并使用 Angular、TypeScript 和一些定制库打组合拳。直到长达八个月的项目临近结束时，我才得以“适应”这种融合了 Ionic/Angular/TypeScript 的工作方式。实际上，“适应”这个词可能有点夸大其词。但仍然困扰我的是，我要在控制器中公开字段，因为需要在视图中显示它们，或者常量应该与其他变量一样命名。</p>\n<p class=\"graf graf--p graf-after--p\">顺便一说，如果你想在 JavaScript 中使用静态类型（static typing），你很快就会发现，这条路走不通。必须准备好“任何”类型！不过，我喜欢使用的 RxJs 订阅。</p>\n<p class=\"graf graf--p graf-after--p\">在项目结束后，我愉快地撤了。我现在再也不会自称为 TypeScript 或移动开发者了。这不是要在口头上表达优越性，而是一个简单的经验问题：八个月的时间不足以证明我在此方面的资质。我敢打赌，任何全职编程的人都会同意我的看法。</p>\n<p class=\"graf graf--p graf-after--p\">一个花了几年时间研究某种语言的开发者，将能够毫不费力地用它思考。她会在脑海中随时准备好所有需要的资源来完成任务，然后继续投入下一个任务。她了解语言环境，可以轻松地将标准库和第三方库结合成一个具有内聚性的新功能，就像一把钥匙对应一把锁一样，以此来轻松地解决问题。然而，当她不知道什么是可用的时候，她会重新造轮子，或者更糟的情况是，她会完全不知所措。</p>\n<p class=\"graf graf--p graf-after--p\">每一种语言都有着其独特的习惯用语、构建和依赖管理工具、框架、库、在线社区、IDE 等一系列东西，这些东西在日常实践中，对开发者生产力的影响比我们想象的要大得多。</p>\n<p class=\"graf graf--p graf-after--p\">但是，所有的语言都一样吗？我是说，C# 和 C++ 的开发者，到底有什么区别？“只是 # 和 ++ 的区别，哈哈，没什么大不了的！”快，把说这话的人扔去喂狮子！</p>\n<p class=\"graf graf--p graf-after--p\">我不是说任何人都不应该更换自己的语言、行业或设备。我只是说，程序员是不一样的。一个以 F# 为主要语言编写应用程序的软件团队，不会从我的 Java 经验中获益，尽管我也花了大量时间写 Scala。我只是说，我们不能找到那些“优秀的开发者”，然后出于奇思妙想，随机地把他们拖到不同的团队，并期望他们能够发挥出应有的效果。我是说，不要把所有“优秀的”开发者当作是可以交换的。</p>\n<p>可交换开发者的神话是不现实的。人与人之间的不同无法消除，并愿每个人都能找到最适合自己的那个角色！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113210\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113210votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113210\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            I'm OUT, never IN.        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 46</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["职场", "程序员"], "url": "http://blog.jobbole.com/113210/", "url_object_id": "f2c65dccf718330f513e67e843e7c14f", "fav_nums": 3, "comment_nums": 3}
{"praise_nums": "1", "title": "ls 命令的 20 个实用范例", "front_image_path": "full/82d53cc686d85d92c9f78d84551efefe19f368cb.jpg", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/12/84af875603b875a6afc4d722e5728a50.png"], "create_date": "2017/12/10", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://linoxide.com/linux-command/linux-ls-command/\">Pungki Arianto</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-2535-1.html\">Linux中国/geekpi</a>   </div><p>Linux中一个基本命令是ls。没有这个命令，我们会在浏览目录条目时会遇到困难。这个命令必须被每个学习Linux的人知道。</p>\n<h3>ls是什么</h3>\n<p>ls命令用于列出文件和目录。默认上，他会列出当前目录的内容。带上参数后，我们可以用ls做更多的事情。这里是一些在日常操作中使用到的ls用法的示例。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/84af875603b875a6afc4d722e5728a50.png\" alt=\"\" width=\"256\" height=\"256\"></p>\n<h4>1. 不带参数运行ls</h4>\n<p>不带参数运行ls会只列出文件或者目录。看不到其他信息输出（译注：有时候你发现无参数的ls命令和这里描述的不同，那有可能是你的ls命令实际上带参数的ls别名）。</p>\n<p>$ ls</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/044cd236033b33f2d14505af2e67e3cf.png\" alt=\"\"></p>\n<h4>2. 使用长清单模式</h4>\n<p>使用-l字符(小写L字符),会显示当前目录内容的长列表。在接下来的例子中，我们会结合-l参数(这个参数经常使用)来得到更好的结果。</p>\n<p>$ ls -l</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/edf00b08735d1fe0fda00f88125da855.png\" alt=\"\"></p>\n<p>这里是如何读取输出 :</p>\n<ul>\n<li><strong>第1列</strong>\n<ul>\n<li>第一个字母<strong>d</strong>意味着内容是目录或者文件。在上面的截图中，Desktop、 Documents、 Downloads 和 lynis-1.3.8是目录。如果是’-‘(<strong>减号</strong>)，这意味着它的内容是文件。当它是l(<strong>小写l字符</strong>)，意味这内容是链接文件。</li>\n<li>下面的9个字符是关于文件权限。<strong>前3个rwx</strong>字符是文件的拥有者的权限，<strong>第二组3rwx</strong>是文件的所有组的权限，<strong>最后的rwx</strong>是对其他人访问文件的权限。</li>\n</ul>\n</li>\n<li><strong>第2列</strong> 这行告诉我们有多少链接指向这个文件。</li>\n<li><strong>第3列</strong> 这行告诉我们谁是这个文件/文件夹的所有者。</li>\n<li><strong>第4列</strong> 这行告诉我们谁是这个文件/文件夹的所有组。</li>\n<li><strong>第5列</strong> 这行告诉我们这个文件/文件夹的以字节为单位的大小。 目录的大小总是4096字节。</li>\n<li><strong>第6列</strong> 这告诉我们文件最后的修改时间。</li>\n<li><strong>第7列</strong> 这告诉我们文件名或者目录名。</li>\n</ul>\n<h4>3. 显示文件大小</h4>\n<p>以字节为单位看大小可能会不方便。6.5M读起来比6727680字节更简单。要这么做，我们可以使用-h与<strong>-l</strong>结合的参数。<strong>-h参数意味着便于人识别</strong>。</p>\n<p>$ ls -lh</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/6298085aaf7eb7f85d3c93a1c6309beb.png\" alt=\"\"></p>\n<p>另外一个可以这么做的参数是<strong>–si</strong>。这个参数和-h参数类似，但是<strong>-si以1000为单位，而-h以1024为单位</strong>。</p>\n<p>$ ls -si</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/f7a3f1cbf0703a87fd954ace24965c1a.png\" alt=\"\"></p>\n<h4>4. 排序文件大小</h4>\n<p>在我们可以显示文件大小之后，我们希望以文件大小排序。我们可以使用-S参数来这么做。这列表会从大到校排序。</p>\n<p>$ ls -lhS</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/e1b5eb2704dd97fc314e67e4253d66c0.png\" alt=\"\"></p>\n<h4>5. 测量大小</h4>\n<p>ls可以通过使用<strong>-block-size=SIZE</strong>改单位大小。这里的SIZE是：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f67c9bf3f4421593035\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nK = Kilobyte\r\nM = Megabyte\r\nG = Gigabyte\r\nT = Terabyte\r\nP = Petabyte\r\nE = Exabyte\r\nZ = Zettabyte\r\nY = Yottabyte</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f67c9bf3f4421593035-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67c9bf3f4421593035-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67c9bf3f4421593035-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67c9bf3f4421593035-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67c9bf3f4421593035-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67c9bf3f4421593035-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67c9bf3f4421593035-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67c9bf3f4421593035-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f67c9bf3f4421593035-1\"><span class=\"crayon-v\">K</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Kilobyte</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67c9bf3f4421593035-2\"><span class=\"crayon-v\">M</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Megabyte</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67c9bf3f4421593035-3\"><span class=\"crayon-v\">G</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Gigabyte</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67c9bf3f4421593035-4\"><span class=\"crayon-v\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Terabyte</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67c9bf3f4421593035-5\"><span class=\"crayon-v\">P</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Petabyte</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67c9bf3f4421593035-6\"><span class=\"crayon-v\">E</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Exabyte</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67c9bf3f4421593035-7\"><span class=\"crayon-v\">Z</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Zettabyte</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67c9bf3f4421593035-8\"><span class=\"crayon-v\">Y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Yottabyte</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>比如，我们希望使用MB作为单位大小。所以语法就会像这样:</p>\n<p>$ ls -l –block-size=M</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/ca5c2485695e0ff80466c1519c88c585.png\" alt=\"\"></p>\n<h4>6. 显示隐藏文件</h4>\n<p>在Linux中，以”.”(<strong>点号</strong>)开头的文件是隐藏文件。为了在ls命令中显示它，我们可以使用<strong>-a</strong>选项。</p>\n<p>$ ls -a</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/cfa7668f6caad7e44083bc934d667078.png\" alt=\"\"></p>\n<h4>7. 只列出目录条目</h4>\n<p>如果我们希望只列出目录，我们可以使用<strong>-d</strong>选项。</p>\n<p>$ ls -d */</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/88da387d50de04d574ae22943aa4d6d7.png\" alt=\"\"></p>\n<h4>8. 不打印所有者信息</h4>\n<p>要这么做，我们使用<strong>-g</strong>选项。</p>\n<p>$ ls -g</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/28da167a529bbe78d2aa9dc057887222.png\" alt=\"\"></p>\n<h4>9. 不打印组信息</h4>\n<p>-g隐藏了拥有者信息，<strong>—G</strong>会隐藏组信息。</p>\n<p>$ ls -lG</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/22d28b1330d26d2ce8f42d459fd4d97c.png\" alt=\"\"></p>\n<h4>10. 打印UID和GID</h4>\n<p>如果你想以数字方式列出项的所有者和所有组（即UID和GID），我们可以带<strong>-n</strong>选项使用ls命令。这里是个例子。</p>\n<p>$ ls -n</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/e23811f99ade6c4c4555f8092a4ecafa.png\" alt=\"\"></p>\n<p>从上面的例子中，我们知道<strong>用户pungki的UID</strong>是100，<strong>GID是1000</strong>，而<strong>root组的GID是0</strong>。</p>\n<h4>11. 不带颜色打印</h4>\n<p>一些Linux发行版已经对ls命令启用彩色。这会使ls以各种颜色打印列表。如果你不想要这样，你可以使用 <strong>–color=never</strong> 参数。</p>\n<p>$ ls –color=never</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/848f74362d015020fe7b695fb61e42c9.png\" alt=\"\"></p>\n<h4>12. 打印每个文件的索引号</h4>\n<p>为了打印索引或者大家俗称的inode号，我们可以使用-i选项。索引号会显示在第一列。</p>\n<p>$ ls -li</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/e0fecbc4db2799138efd4ef3c1742284.png\" alt=\"\"></p>\n<h4>13. 增加 / (斜线) 标记目录</h4>\n<p>要这么做，使用<strong>-p选项</strong>。</p>\n<p>$ ls -p</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/bdae6c864fb569e333c06a5c0d0b3f46.png\" alt=\"\"></p>\n<h4>14. 排序时反转顺序</h4>\n<p>你或许需要在列出条目时反转顺序。要这么做，你可以使用<strong>-r</strong>选项。</p>\n<p>$ ls -r</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/a63ce5ef9ed4d818faa1f2ebc3b5d13a.png\" alt=\"\"></p>\n<h4>15. 递归列出子目录</h4>\n<p>带<strong>-R</strong>参数后，你可以列出包含它子目录的目录。</p>\n<p>$ ls -R</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/3816d79aa013f2856ed1c49ee1627b17.png\" alt=\"\"></p>\n<h4>16. 扩展名排序</h4>\n<p>你可以使用-X参数或者–sort=extension来通过扩展名来排序（译注：这样对于筛选不同类型的文件很有用）。</p>\n<p>$ ls -lX</p>\n<p><strong>或</strong></p>\n<p>$ ls –sort=extension<strong><br>\n</strong></p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/4b1615d90fcb7e917808266d30980096.png\" alt=\"\"></p>\n<h4>17. 通过修改时间列出</h4>\n<p>使用-t选项会按修改时间排序，新的文件在前。</p>\n<p>$ ls -lt</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/7a10fe59414ec59d08d68322dc137f36.png\" alt=\"\"></p>\n<h4>18. 列出你的主目录</h4>\n<p>要列出你的主目录，你可以用”~”(<strong>波浪号</strong>)来代表它。这样你就不必输入完整的目录名。让我们假设家文件名为<strong>/home/pungki</strong>，那么<strong>波浪号</strong>就对/home/pungki有意义了。</p>\n<p>$ ls ~</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/5943c4c11a272abb12609d07dc2ae361.png\" alt=\"\"></p>\n<h4>19. 列出父目录</h4>\n<p>无论你在那个目录，你可以列出父目录而不必输入完整路径。这是个例子。</p>\n<p>$ ls ../</p>\n<p>这回列出<strong>1</strong>层之上的目录内容。</p>\n<p>$ ls ../../</p>\n<p>这回列出<strong>2</strong>层之上的目录内容（译注：可不支持“…”来代表2层之上）。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/e0cedec01301971b3bdce2b4c4adc812.png\" alt=\"\"></p>\n<h4>20. 打印ls命令版本</h4>\n<p>使用–version参数打印它。</p>\n<p>$ ls –version</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/1c7dfc9fd3544b5825832d006d295ec4.png\" alt=\"\"></p>\n<h3>总结</h3>\n<p>这些是在日常操作中会使用到的参数。当然你总可以输入<strong>man ls</strong> 或者 <strong>ls –help</strong> 来查询ls的手册页</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113277\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113277votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113277\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["IT技术", "Linux"], "url": "http://blog.jobbole.com/113277/", "url_object_id": "bae67049a64d1e6081b8faffd0387ad3", "fav_nums": 0, "comment_nums": 0}
{"praise_nums": "1", "title": "技术面试中的精英主义", "front_image_path": "full/536b64ffdc363d8fbb2e76690b23066591ee2e91.jpg", "front_image_url": ["http://ww1.sinaimg.cn/mw690/7cc829d3gw1esx16njnxrj21hc140gw4.jpg"], "create_date": "2017/12/11", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/duydls\">duydls</a> 翻译，<a href=\"http://www.jobbole.com/members/buntamarui\">小米云豆粥</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://www.designlimbo.com/elitism-in-technology-interviews/\">Shawn Jackson</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p class=\"p1\" data-incom=\"P3\">【导读】：技术面试有很多比较深入的 CS 问题，对每个面试官来说，他们也都有自己最喜欢提的问题。但是对于招聘及面试，相比于以上那些问题，更重要的是要针对这个岗位需要什么样的人，而不是一味为难求职者，就算想问一些比较难的 CS 问题，也要有提出的理由。</p>\n<p class=\"p1\" data-incom=\"P3\"><img class=\"alignnone\" src=\"http://ww1.sinaimg.cn/mw690/7cc829d3gw1esx16njnxrj21hc140gw4.jpg\" width=\"563\" height=\"423\"></p>\n<p class=\"p1\" data-incom=\"P3\">我已经在 IT 领域工作了相当长时间，有 12 年了。作为一个曾经的求职者和面试官，我对面试有一个客观公平的看法。这种看法来自于个人面试经验，在这些面试中，面试官都高高在上，而且他们都有自己喜欢问的问题。其中我最喜欢的面试题包括：①二叉树排序算法，②编写代码求解一个多项式方程 ③以及编写一个编译器。到目前为止，我所经历的最糟糕的面试来自亚马逊和 Intuit，他们分别问到了二叉树和多项式。</p>\n<p class=\"p2\" data-incom=\"P6\">除此以外，我还喜欢问求职者，你们每天花多长时间在那些事情？90% 的回答都会是‘从不’，或者绝大多数时间。尽管绝大多数公司都不愿意承认，计算机水平面试题是有年龄歧视的。当你离开 CS 项目一段时间却又没有每天温习（就像绝大多数高级业务程序员），你就和这些知识生疏了。计算机面试题可以帮助你找到这样的人：a）在面试前学习过一本算法书 b）刚从大学毕业。也有些人在经历过多年的职业生涯以后还可以完美回答这些问题，但是就我的经验而言，这些人多半是业务一线的开发者。</p>\n<p class=\"p1\" data-incom=\"P8\">这也是我为现在公司的面试流程感到骄傲的原因。我们会给你一个能反映出公司日常工作内容的编程问题”。你可以向我们展示你的能力。然后我们会花大概 45 分钟的时间和你一起预演一遍项目并且提问，这样有助于我们了解你的想法和展示你的思路。</p>\n<p class=\"p1\" data-incom=\"P8\"><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fmcx90uqskj20gr0d475b.jpg\" width=\"551\" height=\"431\"></p>\n<p class=\"p1\" data-incom=\"P10\">如果你恰好没有向我们展示你在编程项目上的技巧，我们会问一些其它正常的技术问题。我们试图保持一个轻松的氛围，我们会问你在某个问题上的技术水平（1 代表新手，10 代表专家），这样一来你就不会被某些你可能不知道答案的问题所打击到。我们的面试流程是完美的么？绝不，我们每周都在试图改善和提高这个流程。</p>\n<p class=\"p1\" data-incom=\"P12\">这就是为什么当我看到这个 <a href=\"https://www.glassdoor.com/Interview/Paylocity-Interview-Questions-E29987.htm?filter.jobTitleExact=Software+Engineer+.NET#InterviewReview_929569\">Glassdoor 上的评论</a>后彻底震惊了。这里面有些抱怨是有效的，比如面试官没有及时告诉应聘者结果和不理睬应聘者是不可以被接受的。我从来没有在任何技术面试后立刻收到面试结果，往往都会有一些延迟，但没有任何人联系求职者并给出反馈意见，这样就不好了。（伯乐在线注：Glassdoor 是国外一家点评雇主的网站）</p>\n<p class=\"p1\" data-incom=\"P14\">但是这个评论启发我意识到精英观念是相对的。作为那个求职者，要回答 JavaScript 的问题看上去有点不合理，他或许是一个后端开发者。作为新一代的只使用 ORM’ 的开发者，他们或许没有任何 SQL 的经验。某些对我们而言简单和无害的问题，对其它人而言也许会很古怪。</p>\n<p class=\"p1\" data-incom=\"P16\">面试题应该是经过仔细思考、有意义并且能体现求职者所申请工作岗位的职能。你不一定非得通过一个很难的计算机问题来考察求职者是如何解决问题的。如果你觉得陷应试者于窘境是一种享受，那你应该把自己从面试工作中解放出来。这并不是说我们不能问我们最喜欢的问题，但是我们要有一个合理的理由问，而不是在求职者离开以后贬损他。</p>\n<p class=\"p1\" data-incom=\"P18\">在你的机构/公司里，每一个部分都需要技术天才么？如果你的答案是 Yes，那你就是在寻找独角兽，也许你应该重新审查你的需求。在我的职业生涯中，曾经与我共事并且真正令我惊喜的开发者们寥寥可数。但他们也不是对公司里所用到的所有技术/系统/语言都超级擅长。因为这个，我喜欢准备不同水平的面试问题，并且我感觉这样做很有效。如果你告诉我你在某一个方面是专家，你最好可以证明这一点。</p>\n<p class=\"p1\" data-incom=\"P20\">个人来讲，我把求职者与公司文化的匹配度和求职者的个性放在首要位置。在那之后是他们学习和适应新事物的能力，再之后是对待工作的激情。面试是一个困难和非完美的过程，没有人会有一个 100% 无懈可击的面试，当我们尝试帮助他们提高的时候，要试着去除精英主义。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113217\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113217votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113217\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/duydls\">duydls</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/duydls\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/duydls\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/duydls/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/duydls/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 10</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["职场", "技术面试", "面试"], "url": "http://blog.jobbole.com/113217/", "url_object_id": "37c15e1679dcae4dfdeabd16f1e6f975", "fav_nums": 0, "comment_nums": 0}
{"praise_nums": "1", "title": "越做越复杂的软件工程项目", "front_image_path": "full/5f3168649ca6499ecc58fe19364504eed675d2f2.jpg", "front_image_url": ["http://wx2.sinaimg.cn/mw690/63918611gy1fmd055iz98j21jk18814r.jpg"], "create_date": "2017/12/11", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/dimple11\">dimple11</a> 翻译，<a href=\"http://www.jobbole.com/members/young605867996\">Lada</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.com/swlh/your-app-is-an-onion-why-software-projects-spiral-out-of-control-bb9247d9bdbd\">Kannan Chandrasegaran</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><h4>你的APP就像个洋葱：为什么软件开发项目一路失控</h4>\n<p>你最开始想得很好。雇佣开发人员来构建出你的创业想法。但是几乎每一周，都感觉似乎项目需要做做调整，于是各种功能开始混进来，范围逐渐蔓延。</p>\n<p>仿佛这项目拥有了自己的生命，而且还试图毁掉你的生活。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fmd055iz98j21jk18814r.jpg\" width=\"690\" height=\"549\"></p>\n<p>怎么会这样呢？你雇佣的开发人员很差劲吗？你对项目管理也只是摸着石头过河吗？还是这个想法从头到尾就是糟糕的？</p>\n<p>有可能。但一个核心误区通常会在一开始注定项目的失败。</p>\n<p>我们的假设是，给产品定义一系列的功能并记在纸上后，虽然偶然有时候要新增功能，有时候要去除功能，但是你一眼就能看出项目的范围大小。</p>\n<p>这个假设是错误的。</p>\n<p>你的项目不像一张纸一样是二维的，它还有深度。</p>\n<p>软件的每个功能都可以被一层一层剥开。事实上，如果我想当标题党的话，我会说你的app就是个洋葱。我来讲一下我的意思，来告诉你为什么当你把自己的 app 一层层剥开时，它会让你泪流满面。</p>\n<h4>终结所有图书馆的图书馆。</h4>\n<p>咱们通过具体的实例来看吧，给你推荐一个我的想法。</p>\n<blockquote><p>人们经常会想要附近图书馆没有的书，而在这附件其它的人可能会有。因此，这款 app 可以让人们发送用书请求，然后有这本书的人会响应。我们从每一次这样的交易中获利。</p></blockquote>\n<p>太有才了。</p>\n<blockquote><p>这我知道，好吧？软件的功能直截了当 ：</p></blockquote>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fmd0588aa5j21hc0zknjn.jpg\" width=\"690\" height=\"460\"></p>\n<blockquote><p>现在该把规格说明书交给开发人员，并且给软件想个精彩的名字了。叫 kaBooki？lib.rari.ly？reddit？</p></blockquote>\n<p>好吧，稍等一下，我们仔细来看看。而且已经有软件叫reddit了。</p>\n<p>我们带着问题探究一下你的想法，看看会发现什么。</p>\n<p>用户彼此之间如何付款呢？见面的时候付现金还是在 app 上付款呢？</p>\n<blockquote><p>哦，他们应该在app上用信用卡支付，这样我们能够获得提成。</p></blockquote>\n<p>他们实际上怎么发送用书请求呢？我的意思是，他们到底在 app 上要怎么操作呢？要填写一个包含了书名和作者的开放式表格吗？</p>\n<blockquote><p>噢，嗯。他们应该对书进行检索并且选择一本想要的。</p></blockquote>\n<p>好，所以我们需要建个书的数据库。</p>\n<blockquote><p>我猜是要这样。</p></blockquote>\n<p>实际上，什么是用书请求呢？拿着书并且准备把书卖出去的人能看到请求的书单吗？还是说我们要向这些要卖书的人发送通知，像 Uber 或 Thumbtack 那样？</p>\n<blockquote><p>是那样，我们将用书请求发给持有书的人。</p></blockquote>\n<p>所以，卖书者需要往 app 中填充所有在售书籍的信息吗？</p>\n<blockquote><p>呃，是的。</p></blockquote>\n<p>怎么进行书的交接呢？用户自己送书，还是我们处理配送问题？</p>\n<blockquote><p>我们处理配送问题。</p></blockquote>\n<p>所以你需要一个系统来告诉你要拿什么书，以及书应送往的地方。我猜你的司机想知道最短的送书路线，对吧？</p>\n<blockquote><p>好吧，这样不可行。那让用户彼此之间寄书怎么样呢？</p></blockquote>\n<p>所以我们要将收书人的地址给发书的人？怎么处理运费问题呢？</p>\n<blockquote><p>实际上，你知道的，这些用户需要挨得比较近，这样他们就可以直接过去拿书了，还能交个新朋友，对吧？</p></blockquote>\n<p>所以我们需要把挨得近的用户匹配起来。他们怎么找对方呢？App 有没有实时地图好让他们安排见面呢？</p>\n<blockquote><p>好，行，就这样吧。</p></blockquote>\n<p>我们要给书定价吗？还是他们自己商量价格？</p>\n<blockquote><p>他们自己谈个明白，给书定好一个价格。</p></blockquote>\n<p>他们怎么做决定？我们是不是需要在 app 里建个交流平台呢？</p>\n<blockquote><p>他们彼此只需要用电话谈就行了。</p></blockquote>\n<p>好吧，所以我们是不是要用 SMS （Short Messaging Service 短信服务）短信来确认号码呢？还是……你懂我的意思了，我们真的可以永远无休无止地进行下去。</p>\n<blockquote><p>请别这样。</p></blockquote>\n<p>我们来看一下现在功能清单是什么样的：</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fmd059alfrj21hc0zk4p6.jpg\" width=\"690\" height=\"460\"></p>\n<p>每一条项目的功能都可以进行多次扩展，我们只把洋葱拨开了一层，就已经成这样了。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/large/63918611gy1fmd05aus1gg209q05iqgi.gif\" width=\"350\" height=\"198\"></p>\n<p>现在啊，现在可别哭。</p>\n<h4>发生了什么呢？</h4>\n<p>我们要清楚哪些东西不是导致功能激增的原因。</p>\n<h5>这不是我们通常所知的功能蔓延。</h5>\n<p>功能蔓延是指产品中不断增添新的功能，而如果你看一眼我们最终列的功能清单，里面每一条都支持最初的功能设定。</p>\n<h5>这无关乎科技因素。</h5>\n<p>比如说，聊天系统最适宜的结构是怎样的呢？什么支付平台是最容易整合的呢？</p>\n<p>我们在这儿不讨论那些。一个好的开发人员可以通过各式各样的技术手段与你沟通，但是不能替你决定软件需要具备什么功能。</p>\n<h5>这也无关乎技术考量。</h5>\n<p>人们想使用这样的产品吗？当其他用户还很少时，有什么因素会诱使早期的用户来登陆软件呢？用户愿意为这项服务付费吗？</p>\n<p>这些问题与想法的落实、产品市场匹配度的确认、定价的策略等息息相关。再重申一次，这些项都是非常重要的，但却不是软件功能清单中内容多到炸的原因。</p>\n<blockquote><p>当然这也与全球变暖或者牙仙没有丝毫关系，你要告诉我变成项目变成洋葱的原因吗？或者说看完觉得每个其实都并没什么理由？</p></blockquote>\n<p>噢，你这样很无聊，事实是这样：</p>\n<blockquote><p><strong>我们基本上对复杂性是怎么凸显的存在误解。</strong></p></blockquote>\n<p>我们以为每个功能的复杂程度就像我们开始描述的那样。嘿，也许程序员写代码要花费时间，或者随便程序员做什么，但是商业用语区区几个词就可以完全描述软件的功能，像“用户通过 y 使用 x”，对吧？</p>\n<p>这种观点是错的。</p>\n<h4>软件功能更像是分形。</h4>\n<p>你离得越近去看，细节就会展现得越明显。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/large/63918611gy1fmd05c4r90g206y058wxs.gif\" width=\"250\" height=\"188\"></p>\n<blockquote><p>洋葱是分形？</p></blockquote>\n<p>不是，我已经换了比喻。咱们继续。</p>\n<p>我们从全局视角来开始描述软件的功能。但是，当构建好 app，或是使用 app 时，是处在一个较小规模下的。它的完成一步一步进行的，每一个步骤都有可能遇到问题。为了解决问题，你可能需要重新设计这一步、添加新步骤、或是增添全新功能。</p>\n<p>这就像是规划一条从你家到单位的行程。看地图的话，行程好像是直的。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fmd05d11p1j21f50s7k08.jpg\" width=\"690\" height=\"380\"></p>\n<p>当你开始从更小的视角来看，你会发现直的路线并不会城市道路网相契合。你会遇到交通站、高坡和道路阻塞。根据步行、骑行或者开车的不同，你的行程路线也会不同。</p>\n<p>建立软件很大程度上是一样的，你离得越近去看，对解决方案就能有越细致的认识。</p>\n<blockquote><p>这下好了，一路到处都充斥着细节，还都是我需要考虑的。这是否意味着我的产品永远也不可能做完呢？</p></blockquote>\n<p>这么想也对也不对，之所以复杂性凸显，是因为我们一开始就宏观描述了软件功能，也通常就是要实现的目标。然后我们将细节放大，为实现这一目标而一步步建立解决方案。细节放得越大，就会发现越多复杂的问题。</p>\n<p>但复杂性并不是问题所在，问题是我们如何来发现复杂性的。我们把软件功能规格书叫个开发人员，几周过后，我们拿到了第一版的 app 并开始测试。这是我们第一次一步一步操作软件，会从中发现大量漏洞。然后我们做好修订说明，把它交给开发者，让他们再开发第二版 app。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fmd05duyq3j20af0dwq4w.jpg\" width=\"375\" height=\"500\"></p>\n<p>在整个流程的最后一步，我们在多次进行之后，得到了很好的解决方案。</p>\n<p>问题是开发周期真的太长了，每一环节都要耗费好几周或好几个月。</p>\n<p>但是发现 app 的潜在复杂性又是必要之举。</p>\n<blockquote><p>通过来回反复和开发人员交涉来发现这种复杂性，既耗时又烧钱。</p></blockquote>\n<p>我们想这样做：</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fmd05eim30j20af0dwmz4.jpg\" width=\"375\" height=\"500\"></p>\n<p>我们想在开始写代码之前就尽可能多得发现它的复杂性，将软件层层剥开来，看到一个更加健壮的功能清单，而且想做得又快又省钱。</p>\n<p>我们想在软件规格书上来回修改，而不是在app上反复折腾。</p>\n<p>我们想从这个过程：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fmd05f955oj21jk0feaeq.jpg\" width=\"690\" height=\"191\"></p>\n<p> </p>\n<p>走到这个过程：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fmd05g65vbj21jk0g4443.jpg\" width=\"690\" height=\"200\"></p>\n<p>我们需要两个东西来行之有效地实现这个过程：第一，我们需要一种方式来展示功能清单，以便反复修改；第二，我们需要一种方式来高效地就功能清单进行审核协商。</p>\n<p>我们来看看怎么做。</p>\n<h4>规划功能</h4>\n<p>我们不想以商业用语来谈，而是像用户一样的身份来考虑软件功能。在这个层面就需要处理软件的复杂性问题了。</p>\n<p>首先，列一张用户目标表。你想让用户通过你的 app 获得什么呢？</p>\n<p>接下来，你需要规划用户流程，以用户的身份走每一步，来实现用户目标，并记录这些步骤。</p>\n<p>我们建立一张用户使用 app 的流程图。</p>\n<p>有很多种做的方式，你仅需为每一步勾勒一个简单的略图即可。你可以为用户走过的每一个界面绘制模型，也可以在纸上或软件上画流程图。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fmd05hhi1nj218g0wbtwq.jpg\" width=\"690\" height=\"502\"></p>\n<p>无论你选择哪种方式，确保优先考虑速度问题。除非你是 Photoshop 专家，否则把软件收起来，拿纸和笔画吧。</p>\n<p>确保每个界面在你的软件略图中都能够得以体现。比如说，如果一个特定的步骤会经过 app 的好几个界面，那么把该步骤切分开。我们想要梳理出更多的细节，而不是更少的。</p>\n<p>这个单独的过程应该将 app 中一些复杂的问题平面化。现在，我们要往更深处挖。</p>\n<h4>对一切保持疑问</h4>\n<p>我们要是像之前那样提问的话，范围太宽泛了，无从下手。</p>\n<p>首先我们将适用于大部分软件的一些常见问题列到一起，这些问题可以归为四个大类，你可以把它当做框架来组织软件略图。</p>\n<p>看着软件略图的每一步，问你自己清单上写的每一个问题。如果答案会展现出一个新的步骤，那就把它添加进软件略图。</p>\n<p>清单在这儿：</p>\n<h5>用户输入</h5>\n<p>这些问题与用户提交到产品的信息有关</p>\n<ul>\n<li>用户会输入什么信息？</li>\n<li>输入的是信息是开放式的还是交互式的？</li>\n<li>开放式信息范例：输入自由格式文本，上传图片，录制视频。</li>\n<li>交互举例：往搜索框输入文本来显示可选结果、在地图上选取地址、选择那些预定义选项。</li>\n<li>是否有些输入应该被当做无效呢？App 又该如何处理呢？</li>\n<li>是否有无源输入呢？最常见的例子：通过 GPS 进行用户定位。</li>\n<li>产品需要获取新用户 (<a href=\"https://www.useronboard.com/\">https://www.useronboard.com/</a><u>)</u>的什么信息？用户之后可以对信息进行修改吗？</li>\n</ul>\n<h5>呈现给用户的信息</h5>\n<p>如果之前的部分是输入，你可以把这个当成输出。</p>\n<ul>\n<li>屏幕上哪些信息是呈现给用户的？</li>\n<li>这些信息是以怎样的形式呈现的？比如：文本、图片、地图、清单、图表。</li>\n<li>这些信息需要以某种方式进行分类吗？比如：最近使用频率、距上次使用时间、关联性。</li>\n<li>产品是不是可以主动对外通信？比如：邮件、推送通知、SMS 消息。</li>\n</ul>\n<h5>各部分之间的交互</h5>\n<p>这些问题有关软件体验的不同部分（用户、产品、其他服务）之前是如何交互的。</p>\n<ul>\n<li>用户彼此之间有交互吗？比如：收发邮件、加好友、 “喜欢”、或者给其它用户的内容打标签</li>\n<li>用户与外部服务有交互吗？比如：付费服务、物流跟踪、社交登陆。</li>\n<li>产品与外部服务有交互吗？比如：位置查询服务、天气 API、社交网络（“你的朋友X刚加入了！看看他们的简介！”）</li>\n</ul>\n<h5>企业家功能</h5>\n<p>有关你——企业家，需要从产品中获得什么。</p>\n<ul>\n<li>你需要通过邮件或其他媒介接收提醒或摘要吗？</li>\n<li>需要为你自己或员工提供专门的系统吗？比如：为配送人员提供导航软件，为厨房员工提供实时点餐管理接口。</li>\n<li>你需要手动批准用户/内容的接口吗？</li>\n<li>你需要一个内容审核系统吗？它可以让管理员轻松地进行用户内容移除和用户账户失效的操作。</li>\n</ul>\n<blockquote><p>简直有……数不清的问题。</p></blockquote>\n<p>这就对了！这也真的就是人们在早期开发过程常常忘记的东西。你的产品还有很多特定的问题，随着时间你就会慢慢发现。</p>\n<h4>把它整合到一起</h4>\n<p>建立软件略图和进行软件审核的过程可以让你知道少了什么东西，这个过程重复几次之后，你就能更自信得拿出一个 非常可靠的功能表 了。</p>\n<blockquote><p>你知道，我真的很希望通过这种好像挺奇怪的诀窍，可以使项目得到修缮。听上去工作量还蛮大的。</p></blockquote>\n<p>的确。但这是你在过程中的某些点上，无论如何都必须要做的工作。</p>\n<p>记住我们为什么要这样做。你无论如何都要找到软件功能所潜藏的复杂性因素，你要做的就是选择何时来将洋葱层层剥开。</p>\n<p>基本上来说，有两种选择：</p>\n<ol>\n<li>根据用户找准开发目标，对此建立模型或者流程图，对自己的假想保持疑问态度，并且像我们上面所做的那样将软件层层剥开。或者，</li>\n<li>让开发人员直接开始开发软件，然后根据每一版暴露的问题一次次改版，每改版一次就要花一周时间。几个月后，你通过改版会发现很多问题，而这些问题和你本在一周内用纸笔就可以搞定的问题一模一样。</li>\n</ol>\n<p>所以这让软件项目变得复杂到爆，恨不得能一下子将你生吞活剥。</p>\n<p>所以，去发掘功能吧，建立软件略图，对自己的假想保持疑问态度，以既迅速又省钱的方式发现软件存在的主要问题。</p>\n<p>让自己从压力和痛苦中解脱出来，放手让产品走向外面的世界，让它恣意绽放。</p>\n<blockquote><p>难道洋葱也会开花绽放吗？你的隐喻太蠢了。</p></blockquote>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fmd05ib9yrj20jw0jw40y.jpg\" width=\"690\" height=\"690\"></p>\n<blockquote><p>噢说得好。</p></blockquote>\n<p>如果你觉得这篇文章挺有用，可以帮我分享它！也可以订阅我的邮件，确保不错过我的下一篇文章。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113146\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113146votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113146\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11\">dimple11</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/28db3e36f17643a752be4b798d5ceabc.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/dimple11\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/dimple11/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 14</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["IT技术", "软件开发"], "url": "http://blog.jobbole.com/113146/", "url_object_id": "62dfe5b002b87b6d827600206c0ab7de", "fav_nums": 0, "comment_nums": 0}
{"praise_nums": "3", "title": "如何判断 Linux 服务器是否被入侵？", "front_image_path": "full/0d4192df99abd0f294a9eade3688a9b7ce6caa0e.jpg", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/05/1389f92e6bd3378cb6e4522971b7db35.jpg"], "create_date": "2017/12/06", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://bash-prompt.net/guides/server-hacked/\">Elliot Cooper</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9116-1.html\">Linux中国/DarkSun</a>   </div><p>本指南中所谓的服务器被入侵或者说被黑了的意思，是指未经授权的人或程序为了自己的目的登录到服务器上去并使用其计算资源，通常会产生不好的影响。</p>\n<p>免责声明：若你的服务器被类似 NSA 这样的国家机关或者某个犯罪集团入侵，那么你并不会注意到有任何问题，这些技术也无法发觉他们的存在。</p>\n<p>然而，大多数被攻破的服务器都是被类似自动攻击程序这样的程序或者类似“脚本小子”这样的廉价攻击者，以及蠢蛋罪犯所入侵的。</p>\n<p>这类攻击者会在访问服务器的同时滥用服务器资源，并且不怎么会采取措施来隐藏他们正在做的事情。</p>\n<h3 id=\"toc_1\">被入侵服务器的症状</h3>\n<p>当服务器被没有经验攻击者或者自动攻击程序入侵了的话，他们往往会消耗 100% 的资源。他们可能消耗 CPU 资源来进行数字货币的采矿或者发送垃圾邮件，也可能消耗带宽来发动 DoS 攻击。</p>\n<p>因此出现问题的第一个表现就是服务器 “变慢了”。这可能表现在网站的页面打开的很慢，或者电子邮件要花很长时间才能发送出去。</p>\n<p>那么你应该查看那些东西呢?</p>\n<h4 id=\"toc_2\">检查 1 – 当前都有谁在登录?</h4>\n<p>你首先要查看当前都有谁登录在服务器上。发现攻击者登录到服务器上进行操作并不复杂。</p>\n<p>其对应的命令是 <code>w</code>。运行 <code>w</code> 会输出如下结果：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f5fcc1585b997391125\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n 08:32:55 up 98 days,  5:43,  2 users,  load average: 0.05, 0.03, 0.00\r\nUSER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT\r\nroot     pts/0    113.174.161.1    08:26    0.00s  0.03s  0.02s ssh root@coopeaa12\r\nroot     pts/1    78.31.109.1      08:26    0.00s  0.01s  0.00s w\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f5fcc1585b997391125-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f5fcc1585b997391125-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f5fcc1585b997391125-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f5fcc1585b997391125-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2f5fcc1585b997391125-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f5fcc1585b997391125-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">32</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">55</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">up</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">98</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">days</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">users</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">load </span><span class=\"crayon-v\">average</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.05</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f5fcc1585b997391125-2\"><span class=\"crayon-e\">USER     </span><span class=\"crayon-e\">TTY      </span><span class=\"crayon-e\">FROM             </span><span class=\"crayon-v\">LOGIN</span><span class=\"crayon-sy\">@</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">IDLE   </span><span class=\"crayon-e\">JCPU   </span><span class=\"crayon-e\">PCPU </span><span class=\"crayon-e\">WHAT</span></div><div class=\"crayon-line\" id=\"crayon-5a2f5fcc1585b997391125-3\"><span class=\"crayon-e\">root     </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">113.174.161.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0.00s</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.03s</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.02s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ssh </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">coopeaa12</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f5fcc1585b997391125-4\"><span class=\"crayon-e\">root     </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">78.31.109.1</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0.00s</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.01s</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.00s</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">w</span></div><div class=\"crayon-line\" id=\"crayon-5a2f5fcc1585b997391125-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>第一个 IP 是英国 IP，而第二个 IP 是越南 IP。这个不是个好兆头。</p>\n<p>停下来做个深呼吸, 不要恐慌之下只是干掉他们的 SSH 连接。除非你能够防止他们再次进入服务器，否则他们会很快进来并踢掉你，以防你再次回去。</p>\n<p>请参阅本文最后的“被入侵之后怎么办”这一章节来看找到了被入侵的证据后应该怎么办。</p>\n<p><code>whois</code> 命令可以接一个 IP 地址然后告诉你该 IP 所注册的组织的所有信息，当然就包括所在国家的信息。</p>\n<h4 id=\"toc_3\">检查 2 – 谁曾经登录过?</h4>\n<p>Linux 服务器会记录下哪些用户，从哪个 IP，在什么时候登录的以及登录了多长时间这些信息。使用 <code>last</code> 命令可以查看这些信息。</p>\n<p>输出类似这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f5fcc15866236249486\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot     pts/1        78.31.109.1      Thu Nov 30 08:26   still logged in\r\nroot     pts/0        113.174.161.1    Thu Nov 30 08:26   still logged in\r\nroot     pts/1        78.31.109.1      Thu Nov 30 08:24 - 08:26  (00:01)\r\nroot     pts/0        113.174.161.1    Wed Nov 29 12:34 - 12:52  (00:18)\r\nroot     pts/0        14.176.196.1     Mon Nov 27 13:32 - 13:53  (00:21)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f5fcc15866236249486-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f5fcc15866236249486-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f5fcc15866236249486-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f5fcc15866236249486-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2f5fcc15866236249486-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f5fcc15866236249486-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f5fcc15866236249486-1\"><span class=\"crayon-e\">root     </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">78.31.109.1</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">Thu </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">still </span><span class=\"crayon-e\">logged </span><span class=\"crayon-st\">in</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f5fcc15866236249486-2\"><span class=\"crayon-e\">root     </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">113.174.161.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Thu </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">still </span><span class=\"crayon-e\">logged </span><span class=\"crayon-st\">in</span></div><div class=\"crayon-line\" id=\"crayon-5a2f5fcc15866236249486-3\"><span class=\"crayon-e\">root     </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">78.31.109.1</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">Thu </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f5fcc15866236249486-4\"><span class=\"crayon-e\">root     </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">113.174.161.1</span><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Wed </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">34</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">52</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f5fcc15866236249486-5\"><span class=\"crayon-e\">root     </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">14.176.196.1</span><span class=\"crayon-h\">     </span><span class=\"crayon-e\">Mon </span><span class=\"crayon-i\">Nov</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">27</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">32</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">53</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f5fcc15866236249486-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>这里可以看到英国 IP 和越南 IP 交替出现，而且最上面两个 IP 现在还处于登录状态。如果你看到任何未经授权的 IP，那么请参阅最后章节。</p>\n<p>登录后的历史记录会记录到二进制的 <code>/var/log/wtmp</code> 文件中（LCTT 译注：这里作者应该写错了，根据实际情况修改），因此很容易被删除。通常攻击者会直接把这个文件删掉，以掩盖他们的攻击行为。 因此, 若你运行了 <code>last</code> 命令却只看得见你的当前登录，那么这就是个不妙的信号。</p>\n<p>如果没有登录历史的话，请一定小心，继续留意入侵的其他线索。</p>\n<h4 id=\"toc_4\">检查 3 – 回顾命令历史</h4>\n<p>这个层次的攻击者通常不会注意掩盖命令的历史记录，因此运行 <code>history</code> 命令会显示出他们曾经做过的所有事情。 一定留意有没有用 <code>wget</code> 或 <code>curl</code> 命令来下载类似垃圾邮件机器人或者挖矿程序之类的非常规软件。</p>\n<p>命令历史存储在 <code>~/.bash_history</code> 文件中，因此有些攻击者会删除该文件以掩盖他们的所作所为。跟登录历史一样，若你运行 <code>history</code> 命令却没有输出任何东西那就表示历史文件被删掉了。这也是个不妙的信号，你需要很小心地检查一下服务器了。（LCTT 译注，如果没有命令历史，也有可能是你的配置错误。）</p>\n<h4 id=\"toc_5\">检查 4 – 哪些进程在消耗 CPU？</h4>\n<p>你常遇到的这类攻击者通常不怎么会去掩盖他们做的事情。他们会运行一些特别消耗 CPU 的进程。这就很容易发现这些进程了。只需要运行 <code>top</code> 然后看最前的那几个进程就行了。</p>\n<p>这也能显示出那些未登录进来的攻击者。比如，可能有人在用未受保护的邮件脚本来发送垃圾邮件。</p>\n<p>如果你最上面的进程对不了解，那么你可以 Google 一下进程名称，或者通过 <code>losf</code> 和 <code>strace</code> 来看看它做的事情是什么。</p>\n<p>使用这些工具，第一步从 <code>top</code> 中拷贝出进程的 PID，然后运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f5fcc1586e745092031\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstrace -p PID\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f5fcc1586e745092031-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f5fcc1586e745092031-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f5fcc1586e745092031-1\"><span class=\"crayon-v\">strace</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PID</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f5fcc1586e745092031-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这会显示出该进程调用的所有系统调用。它产生的内容会很多，但这些信息能告诉你这个进程在做什么。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f5fcc15872713937167\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlsof  -p PID\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f5fcc15872713937167-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f5fcc15872713937167-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f5fcc15872713937167-1\"><span class=\"crayon-v\">lsof</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PID</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f5fcc15872713937167-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这个程序会列出该进程打开的文件。通过查看它访问的文件可以很好的理解它在做的事情。</p>\n<h4 id=\"toc_6\">检查 5 – 检查所有的系统进程</h4>\n<p>消耗 CPU 不严重的未授权进程可能不会在 <code>top</code> 中显露出来，不过它依然可以通过 <code>ps</code> 列出来。命令 <code>ps auxf</code> 就能显示足够清晰的信息了。</p>\n<p>你需要检查一下每个不认识的进程。经常运行 <code>ps</code> （这是个好习惯）能帮助你发现奇怪的进程。</p>\n<h4 id=\"toc_7\">检查 6 – 检查进程的网络使用情况</h4>\n<p><code>iftop</code> 的功能类似 <code>top</code>，它会排列显示收发网络数据的进程以及它们的源地址和目的地址。类似 DoS 攻击或垃圾机器人这样的进程很容易显示在列表的最顶端。</p>\n<h4 id=\"toc_8\">检查 7 – 哪些进程在监听网络连接?</h4>\n<p>通常攻击者会安装一个后门程序专门监听网络端口接受指令。该进程等待期间是不会消耗 CPU 和带宽的，因此也就不容易通过 <code>top</code> 之类的命令发现。</p>\n<p><code>lsof</code> 和 <code>netstat</code> 命令都会列出所有的联网进程。我通常会让它们带上下面这些参数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f5fcc15876885836394\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlsof -i\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f5fcc15876885836394-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f5fcc15876885836394-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f5fcc15876885836394-1\"><span class=\"crayon-v\">lsof</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f5fcc15876885836394-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f5fcc1587c758748752\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnetstat -plunt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f5fcc1587c758748752-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f5fcc1587c758748752-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f5fcc1587c758748752-1\"><span class=\"crayon-v\">netstat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">plunt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f5fcc1587c758748752-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>你需要留意那些处于 <code>LISTEN</code> 和 <code>ESTABLISHED</code> 状态的进程，这些进程要么正在等待连接（LISTEN），要么已经连接（ESTABLISHED）。如果遇到不认识的进程，使用 <code>strace</code> 和 <code>lsof</code> 来看看它们在做什么东西。</p>\n<h3 id=\"toc_9\">被入侵之后该怎么办呢?</h3>\n<p>首先，不要紧张，尤其当攻击者正处于登录状态时更不能紧张。<strong>你需要在攻击者警觉到你已经发现他之前夺回机器的控制权。</strong>如果他发现你已经发觉到他了，那么他可能会锁死你不让你登陆服务器，然后开始毁尸灭迹。</p>\n<p>如果你技术不太好那么就直接关机吧。你可以在服务器上运行 <code>shutdown -h now</code> 或者 <code>systemctl poweroff</code> 这两条命令之一。也可以登录主机提供商的控制面板中关闭服务器。关机后，你就可以开始配置防火墙或者咨询一下供应商的意见。</p>\n<p>如果你对自己颇有自信，而你的主机提供商也有提供上游防火墙，那么你只需要以此创建并启用下面两条规则就行了：</p>\n<ol>\n<li>只允许从你的 IP 地址登录 SSH。</li>\n<li>封禁除此之外的任何东西，不仅仅是 SSH，还包括任何端口上的任何协议。</li>\n</ol>\n<p>这样会立即关闭攻击者的 SSH 会话，而只留下你可以访问服务器。</p>\n<p>如果你无法访问上游防火墙，那么你就需要在服务器本身创建并启用这些防火墙策略，然后在防火墙规则起效后使用 <code>kill</code> 命令关闭攻击者的 SSH 会话。（LCTT 译注：本地防火墙规则 有可能不会阻止已经建立的 SSH 会话，所以保险起见，你需要手工杀死该会话。）</p>\n<p>最后还有一种方法，如果支持的话，就是通过诸如串行控制台之类的带外连接登录服务器，然后通过 <code>systemctl stop network.service</code> 停止网络功能。这会关闭所有服务器上的网络连接，这样你就可以慢慢的配置那些防火墙规则了。</p>\n<p>重夺服务器的控制权后，也不要以为就万事大吉了。</p>\n<p>不要试着修复这台服务器，然后接着用。你永远不知道攻击者做过什么，因此你也永远无法保证这台服务器还是安全的。</p>\n<p>最好的方法就是拷贝出所有的数据，然后重装系统。（LCTT 译注：你的程序这时已经不可信了，但是数据一般来说没问题。）</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113205\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113205votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113205\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 9 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["IT技术", "Linux"], "url": "http://blog.jobbole.com/113205/", "url_object_id": "876ee85ca3eab93b154bc72080cb1d99", "fav_nums": 9, "comment_nums": 4}
{"praise_nums": "1", "title": "谈谈程序员的离职和跳槽", "front_image_path": "full/3dec15374f3b9e62441c4d320c8998dd12c43dc8.jpg", "front_image_url": ["http://ww1.sinaimg.cn/mw690/7cc829d3gw1eizj4ql2huj20eq0b0wfx.jpg"], "create_date": "2017/12/09", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/JimmyZhang/archive/2012/11/21/2781035.html\">张子阳</a>   </div><p>// 伯乐在线转注：原文写于 2012 年</p>\n<p>这篇文章是我在部门会议上一次发言的总结。之所以会有这次会议，是因为我的一名员工向我提出了辞职，在思索了几天后，我整理了一下自己的思路，于是便有了这次的会议和现在的这篇文章。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://ww1.sinaimg.cn/mw690/7cc829d3gw1eizj4ql2huj20eq0b0wfx.jpg\" width=\"530\" height=\"396\"></p>\n<p style=\"text-align: center;\">（转载配图）</p>\n<h3>收入是由什么决定的？</h3>\n<p>这位员工辞职的原因主要有两个：</p>\n<ol>\n<li>公司的薪水无法达到他的预期，未来一年在公司的收入前景也不是很明确。</li>\n<li>想要去做更底层的开发，方向是使用C/C++开发3D图形图像。而我们公司主要是.NET开发。</li>\n</ol>\n<p>既然其中的一个原因是薪水无法符合预期，那么首先要搞清楚的就是收入是由什么决定的。</p>\n<h3>1.积累</h3>\n<p>首先要说的一点就是：积累。积累就是你在这家公司所创造的价值的积累。</p>\n<p>你今天所领的薪水，并不是由你现在所创造的价值所决定的，而是包含了以前一段时期内其他同事所创造的价值。举个例子来说，公司目前排名前三的大客户：客户A、客户B、客户C。</p>\n<ol>\n<li>客户A是2008年接下来的，现在每年为公司贡献600万。</li>\n<li>客户B是2009年接下来的，现在每年为公司贡献500万。</li>\n<li>客户C是2010年接下来的，现在每年为公司贡献350万。</li>\n</ol>\n<p>我的年薪是你的两倍还多。可我也承认，我现在所能创造的价值，和我的能力绝对不可能是你的两倍。可问题是：2008年、2009年、2010年这些年份我都在公司，上面的每一个大客户，都有我的贡献。而你2012年才新进公司，你并没有之前的积累。所以，新员工入职后，工资相较老员工会低一些是正常的。很多新员工总是认为自己的收入低了，吃亏了，实际上，很多情况下，新员工在加入公司的头一年，公司仅能维持平衡，即新员工创造的价值全当工资发给他了。直到第二年，有了上一年的积累之后，公司才有所盈余。而加入半年就离职的员工，对公司来说基本上是亏本的。这也就解释了为什么人员流动特别快的公司活不长，因为人力成本太高。</p>\n<p>关于积累，我可以再举几个例子说明一下：</p>\n<blockquote><p>洪小莲，李嘉诚的秘书，几十年来一直追随李嘉诚，她从几千元的工薪族，做到身家上亿的工薪族，享受的是公司成长的回报。这种回报并非是她个人的学识和能力有了大幅的提高而得到的等价交换，很大程度上仅仅是因为她忠诚地待在这趟车上。</p>\n<p>杨元庆，联想现在的CEO，研究生毕业后就一直追随柳传志，尽管一开始从事的是他并不很乐意的销售工作，但最终还是坚持了下来。上一次注意到他，是看到一则新闻，标题是“杨元庆自掏2000万奖励一线员工”。</p></blockquote>\n<p>上面只是正面的例子，也有反面的例子：</p>\n<blockquote><p>吴士宏，曾写了一本书叫做《逆风飞扬》，可谓是红极一时。1986年进入IBM，1998年离开IBM，进入微软，担任微软中国公司总经理，1999年进入TCL，2002年离开TCL。之后就离开了公众的视线。我特意去百度搜索“吴士宏现在在哪里”，没有任何的消息。我想如果她很成功的话，一定还属于“公众人物”，不至于连度娘都不知去向。</p></blockquote>\n<p>跳槽的话显然就要放弃先前的积累。比方说，当你跳槽到另一家公司以后，你曾经做过的系统、曾经服务过的客户仍然在为先前的公司创造着利润，可是跟你已经一毛钱关系都没有了（极少数公司有股票，另当别论）。所以跳槽之前要慎重考虑，跳得不好，有可能越跳越低。</p>\n<p>既然新员工相对于老员工来说，收入低一些是正常的，那么老员工工资高也是合情合理的。但是有一些公司，我将其归为“无良公司”，它们会在老员工的收入高到一定程度的时候，将老员工砍掉，然后再招募低廉的新人来承担之前老员工的工作，以赚取更高的利润。我觉得这些都是小聪明，最后的结果就是，聪明能干一些的人，在看出公司的这些伎俩之后果断离职；能力一般的员工，也会把你这里当成培训基地，翅膀硬了就飞了，受损的最后还是公司，实在是得不偿失。还不如厚待老员工，也让新进的员工对未来有一个更好的预期。也有一些人向我抱怨说：“老员工待得久了，干劲都被磨光了，每天都是混日子，还不如新员工，不开他开谁？”。然后我反问他：“激励员工难道不正是你工作的一部分吗？”。这种情况的出现，更多时候，是管理者的责任，而非员工。</p>\n<p>最后补充一点：我并不认为老员工工资比新员工高就一定是合理的。当公司对一个新员工开出很高的工资时，其实是出于这样一种期望：他能推动公司进步的更快。而如果他真的这样做到了，公司进步的更快了、收益更高了，可以反哺老员工，从而公司的整体待遇水平都提高了，不是皆大欢喜吗？可能一些老员工并不能明白这些，所以，当招一个新员工工资水平远高于现有的老员工时，为什么要这样做，最好能让老员工知晓。</p>\n<h3>2.老板</h3>\n<p>这个“老板”是宽泛的老板，不一定是公司最大的老板。有的时候，公司比较大，你的职位又比较低，大老板连有没有你这个人都不知道，此时的老板就是你的顶头上司。很多时候，你的收入与他也有着莫大的关系。</p>\n<p>对于我来说，我的原则是：在我的能力范围内，我会为我的员工争取更好的待遇。表面上看，这样做很蠢，花6000块就能雇到一个人，为什么要花8000块？我不是这样认为的，我期望能和我的员工形成这样一种互动：我尽我的能力为你争取好的待遇，你也尽你的努力做好工作。</p>\n<p>我不能要求员工“你先把工作做好，我自然会给你好的待遇”。总是要有人先迈出一步，总是要有一方先信任另一方，所以在你什么还没有做的时候，我就先信任你，并且给你尽可能好的待遇，那么我该做的事情都做了，我问心无愧，剩下的，就看你的表现了。</p>\n<p>可能有人会想，都这样了怎么还会有人提出辞职？实际上，提出辞职的是一个毕业刚一年的小伙子，1989年生，毕业1年多，我给他的待遇是试用期9000，转正后9500。在给他这个待遇之前，我是进行过一些调研的，我打电话给我的一个表妹，她是西安电子科技大学的研究生（陕西省排名第三的学校，211院校），她和她的同学在今年毕业找工作的时候，多得是6000到8000的工资。所以从这方面来说，我并没有亏待你，而你要求12K的工资，我并不是不愿意给这么多，你的表现也说明了你是个很有潜力的人才。只是受经济环境的影响，今年公司的效益不及往年，要在一定程度上节省开支。其次，你让其他的老员工情何以堪？所以，综合起来，你的要求超出了我的能力范围之外，我无法开口向公司申请提高你的薪水。</p>\n<h3>3.门槛</h3>\n<p>除了积累和顶头上司两个决定因素以外，第三个决定因素就是你从事工作的门槛。为什么餐厅服务员的收入很低？为什么坐在前台收发快递的文员收入很低？因为这些工作的门槛很低，门槛低就意味着你不做有的是人能做，你不做有大批的“后备队伍”在等着做。由于庞大的后备队伍的竞争，你就无法提高自己的要价。而提升自己所从事工作的门槛，实际上就缩减了竞争者的规模。</p>\n<p>程序开发也是一样。如果你想收入高，你就做一些别人做不了，又有市场的。</p>\n<p>.NET在程序开发中就属于门槛比较低的一类。个中原因我想大家都懂的，就不在这里赘述了。做.NET不需要你科班出身，或许一点兴趣再加上一点时间，或许一个类似北大青鸟的培训，都可以让你开始从事.NET开发了。你可以不懂指针、不懂数据结构、不懂算法、不懂汇编、不懂很多东西，但照样可以做出一个.NET程序来。而这些人往往又是对薪资的要求没那么高的，这样无形中就拉低了.NET程序员的“身价”。.NET的易学易会，很大程度上是由于它的封装性比较好。底层的东西都屏蔽掉了，你只要知道学习一下命名空间，然后寻找相关的API去调用就好了。记得我们公司曾经开发过一个基于C语言的手持设备程序，没有任何的类库支持，连排序、链表这样.NET中的基本功能，都要自己来实现，更别提内存管理和程序逻辑了，和.NET比起来，门槛就相对高一些了。</p>\n<p>所以，如果想收入高一些，那么就去做更高难度的技术工作，这里随便想了几个例子：</p>\n<ul>\n<li>百度、谷歌的搜索引擎算法。</li>\n<li>微软、谷歌、苹果的操作系统。</li>\n<li>网络游戏，例如《征途》的游戏引擎。</li>\n<li>大型企业的ERP，比方说SAP。</li>\n<li>软硬结合，比如单片机，电气自动化。</li>\n<li>以及我这位即将离职的同事说的，3D图形图像。</li>\n</ul>\n<p>所以，从这个角度来看，这位同事的辞职是明智的，他很年轻，有的是机会重新选择自己的道路，所以我也祝愿他能有更好的发展。而这些好赚的钱，就留给我们来做了:-)。</p>\n<h3>4.平台</h3>\n<p>接下来要说的一个决定因素是平台。很多程序员觉得30岁就瓶颈了，30岁写程序就到头了，实际上，这只是你的平台比较小罢了。就拿我自己的公司来说，平台就不大，只要是踏踏实实工作过5年的程序员，基本上就能够胜任公司90%的技术工作了，剩下的10%，请教一下其他同事，进行一下技术交流，也完全能够解决。这样就存在一个问题：随着你年龄的增长，你的生活压力越来越大，要求越来越高，可是公司只要5年经验的程序员就够用了。假设市场上5年经验的程序员的平均要求是10K，凭什么要给你15K？你的优势在哪里？如果你没有突破，就会有“30岁写程序就到头了”的感觉。</p>\n<p>而如果平台大一些情况就会不一样，比方说，你去了IBM，可能5年的经验不过刚刚入门而已。IBM有一个工程院，其中有5位院士（IBM Fellow）获得过诺贝尔奖，很多人钻研技术都超过20年或者更久。如果你对技术感兴趣，并执着去钻研的话，你可以不断地去挑战和攀登。</p>\n<p>当然，你可能没那么好的运气和实力进入IBM，那么其他一些中型的平台也是不错的，比方说阿里巴巴、金蝶、百度、腾讯等等。在这里，至少你有足够的理由和需要再去进行深入学习。因为在这些地方，5年的经验是远远不够的，还需要进一步地学习和努力。</p>\n<p>如果你和我一样，不巧没有那么大的平台，此时的选择大概有这么几种：</p>\n<p>1. 你可以凭借你在公司的积累（第一节讲过的），过比较安逸的日子。如果比较幸运，押对了宝，公司发展得比较好，收入一样会变得非常可观；如果比较不幸，公司经营的状况不好，那就要承担比较大的风险了。说得难听一点，公司倒闭了你去哪里？你过去的积累已经一文不值，而你的年龄已经35，水平却相当于只有5年经验。你的竞争力在哪里？</p>\n<p>2. 你可以凭自己的努力将现在所在的平台做大，换言之，把自己的小公司做大。这当然是比较积极的做法，也是我一直努力的方向。现在你看到的大公司，不也是从小公司一步一步做起的吗？不过这里还有两个问题：1、有的时候，你的力量在公司中的占比没那么大，你再怎么努力推进的速度也还是有限；2、你缺乏慧眼，选中的公司本身就缺乏长大的资质。我们往往只看到成功了的公司，却忽视了更多在竞争中倒下的公司。</p>\n<p>3. 主动选择更大的平台，也就是跳槽了。但是跳槽也是有风险的，尤其是过了30岁的程序员。你在这家公司的收入高，是因为有之前的积累，换一家就没有积累了，等于从新人开始，而大多数的公司，5年经验的程序员就够用了。如果跳得不好，收入还可能越跳越低，如果还有老婆、孩子、房贷，那将面临更大的压力。所以当你想要从一个低的平台向更高的平台跳跃的时候，平时就要做足功夫，认真积累自己的实力。对于我来说，我缺乏大型项目的管理经验，但是没关系，我努力学习考一个PMP没什么问题吧？我缺乏大型软件的架构经验，但是没关系，我把.NET的基础知识和各种设计模式掰开了揉碎了没什么问题吧？我缺乏大型团队的管理经验，但是没关系，每次遇到管理方面的问题我都认真思考仔细总结没什么问题吧？有些人总是抱怨没有机会，运气不好，我想机会总是有的，但只属于有准备的人。</p>\n<h3>5.行业</h3>\n<p>我想说的最后一点就是行业。有时候你觉得已经万事俱备了，可是你所处的这个行业本身就属于极低利润率的，你再怎么努力也很难有很高的收入。很多情况下，可能公司也想提高你的待遇，但是由于缺乏利润的支撑，公司也是有心无力。所以，在选择公司，尤其是小公司的时候，要重点考察一下公司所处的行业如何？是不是前景比较好、利润比较高的行业？如果是大公司的话，这方面的问题就会少一些，因为如果方向有问题，它就无法做成大公司。</p>\n<p>行业是有周期性的，可能在一段时期内这个行业好，下一段时期这个行业就不行了。最典型的一个例子就是软盘，我现在的老板在成立这家公司之前是做销售的，他有一个客户，做索尼软盘的，这种软盘我想很多80后都见过。当时生意做得很大，可是当光盘出来以后，软盘的市场是会急剧萎缩的，可是这家公司的领导层居然没有看到，或者是看到了但不愿意转变，像鸵鸟一样在危机来临时把头埋在土里，继续做它的软盘。几年以后，这家公司就倒掉了。</p>\n<p>选择行业也不是选择暴利行业就一定好，比方说房地产。资本都是逐利的，当一个行业属于暴利，同时所有人都知道它是暴利的时候，危机就来了。这个危机就是会有大量的社会资源、人力物力投入到这个行业中企图分一杯羹。而全局上又没有一个统一的把控，这个行业究竟需要多少公司才是合适的？最后的结果就是过剩。就好像股票在崩盘时，也许跌到3000点是比较合理也比较正常的位置，但是由于人们的恐慌，它就跌到1600点了。</p>\n<p>感谢阅读，希望这篇文章能给你带来收获。</p>\n<p>不是所有一年工作经验的毕业生都有这样的待遇，我主要是看能力，而不是年龄、学历等。特别说明一下，以免误导。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112809\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112809votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112809\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["职场", "职场", "跳槽"], "url": "http://blog.jobbole.com/112809/", "url_object_id": "eb6cc8fd6536dae6eac7ae49fc72211b", "fav_nums": 2, "comment_nums": 4}
{"praise_nums": "2", "title": "如何在 Linux 系统中通过用户组来管理用户", "front_image_path": "full/6085acc0af4696f5d49164561c6bc4f9b590fc26.jpg", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/04/e260ae4f5d153b25be87819b25ff0577.jpg"], "create_date": "2017/12/06", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linux.com/learn/intro-to-linux/2017/12/how-manage-users-groups-linux\">Jack Wallen</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9114-1.html\">Linux中国/imquanquan</a>   </div><blockquote><p>本教程可以了解如何通过用户组和访问控制表（ACL）来管理用户。</p></blockquote>\n<p>当你需要管理一台容纳多个用户的 Linux 机器时，比起一些基本的用户管理工具所提供的方法，有时候你需要对这些用户采取更多的用户权限管理方式。特别是当你要管理某些用户的权限时，这个想法尤为重要。比如说，你有一个目录，某个用户组中的用户可以通过读和写的权限访问这个目录，而其他用户组中的用户对这个目录只有读的权限。在 Linux 中，这是完全可以实现的。但前提是你必须先了解如何通过用户组和访问控制表（ACL）来管理用户。</p>\n<p>我们将从简单的用户开始，逐渐深入到复杂的访问控制表（ACL）。你可以在你所选择的 Linux 发行版完成你所需要做的一切。本文的重点是用户组，所以不会涉及到关于用户的基础知识。</p>\n<p>为了达到演示的目的，我将假设：</p>\n<p>你需要用下面两个用户名新建两个用户：</p>\n<ul>\n<li>olivia</li>\n<li>nathan</li>\n</ul>\n<p>你需要新建以下两个用户组：</p>\n<ul>\n<li>readers</li>\n<li>editors</li>\n</ul>\n<p>olivia 属于 editors 用户组，而 nathan 属于 readers 用户组。reader 用户组对 <code>/DATA</code> 目录只有读的权限，而 editors 用户组则对 <code>/DATA</code> 目录同时有读和写的权限。当然，这是个非常小的任务，但它会给你基本的信息，你可以扩展这个任务以适应你其他更大的需求。</p>\n<p>我将在 Ubuntu 16.04 Server 平台上进行演示。这些命令都是通用的，唯一不同的是，要是在你的发行版中不使用 <code>sudo</code> 命令，你必须切换到 root 用户来执行这些命令。</p>\n<h3 id=\"toc_1\">创建用户</h3>\n<p>我们需要做的第一件事是为我们的实验创建两个用户。可以用 <code>useradd</code> 命令来创建用户，我们不只是简单地创建一个用户，而需要同时创建用户和属于他们的家目录，然后给他们设置密码。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef32717251641680946\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo useradd -m olivia\r\nsudo useradd -m nathan\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef32717251641680946-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef32717251641680946-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef32717251641680946-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef32717251641680946-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">useradd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">olivia</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef32717251641680946-2\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">useradd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">nathan</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef32717251641680946-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>我们现在创建了两个用户，如果你看看 <code>/home</code> 目录，你可以发现他们的家目录（因为我们用了 <code>-m</code> 选项，可以在创建用户的同时创建他们的家目录。</p>\n<p>之后，我们可以用以下命令给他们设置密码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef3271725d798037942\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo passwd olivia\r\nsudo passwd nathan\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef3271725d798037942-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef3271725d798037942-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef3271725d798037942-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef3271725d798037942-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">passwd </span><span class=\"crayon-e\">olivia</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef3271725d798037942-2\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">passwd </span><span class=\"crayon-i\">nathan</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef3271725d798037942-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>就这样，我们创建了两个用户。</p>\n<h3 id=\"toc_2\">创建用户组并添加用户</h3>\n<p>现在我们将创建 readers 和 editors 用户组，然后给它们添加用户。创建用户组的命令是：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef32717261924239816\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\naddgroup readers\r\naddgroup editors\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef32717261924239816-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef32717261924239816-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef32717261924239816-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef32717261924239816-1\"><span class=\"crayon-e\">addgroup </span><span class=\"crayon-e\">readers</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef32717261924239816-2\"><span class=\"crayon-e\">addgroup </span><span class=\"crayon-i\">editors</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef32717261924239816-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0310 seconds] -->\r\n<p>（LCTT 译注：当你使用 CentOS 等一些 Linux 发行版时，可能系统没有 <code>addgroup</code> 这个命令，推荐使用 <code>groupadd</code> 命令来替换 <code>addgroup</code> 命令以达到同样的效果）</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/12/a4aeb9d98d79d707090f46b85e6db25b.jpg\" alt=\"groups\"></p>\n<p><em>图一：我们可以使用刚创建的新用户组了。</em></p>\n<p>创建用户组后，我们需要添加我们的用户到这两个用户组。我们用以下命令来将 nathan 用户添加到 readers 用户组：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef32717264614685172\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo usermod -a -G readers nathan\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef32717264614685172-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef32717264614685172-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef32717264614685172-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">usermod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">G</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">readers </span><span class=\"crayon-i\">nathan</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef32717264614685172-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>用以下命令将 olivia 添加到 editors 用户组：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef32717268526942676\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo usermod -a -G editors olivia\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef32717268526942676-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef32717268526942676-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef32717268526942676-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">usermod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">G</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">editors </span><span class=\"crayon-i\">olivia</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef32717268526942676-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>现在我们可以通过用户组来管理用户了。</p>\n<h3 id=\"toc_3\">给用户组授予目录的权限</h3>\n<p>假设你有个目录 <code>/READERS</code> 且允许 readers 用户组的所有成员访问这个目录。首先，我们执行以下命令来更改目录所属用户组：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef3271726b225473726\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo chown -R :readers /READERS \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef3271726b225473726-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef3271726b225473726-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef3271726b225473726-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">chown</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">readers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">READERS</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef3271726b225473726-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0258 seconds] -->\r\n<p>接下来，执行以下命令收回目录所属用户组的写入权限：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef3271726e497956017\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo chmod -R g-w /READERS\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef3271726e497956017-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef3271726e497956017-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef3271726e497956017-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">w</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">READERS</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef3271726e497956017-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>然后我们执行下面的命令来收回其他用户对这个目录的访问权限（以防止任何不在 readers 组中的用户访问这个目录里的文件）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef32717272470855359\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo chmod -R o-x /READERS\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef32717272470855359-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef32717272470855359-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef32717272470855359-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">READERS</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef32717272470855359-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0286 seconds] -->\r\n<p>这时候，只有目录的所有者（root）和用户组 reader 中的用户可以访问 <code>/READES</code> 中的文件。</p>\n<p>假设你有个目录 <code>/EDITORS</code> ，你需要给用户组 editors 里的成员这个目录的读和写的权限。为了达到这个目的，执行下面的这些命令是必要的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef32717275842584540\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo chown -R :editors /EDITORS\r\nsudo chmod -R g+w /EDITORS\r\nsudo chmod -R o-x /EDITORS\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef32717275842584540-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef32717275842584540-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef32717275842584540-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef32717275842584540-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef32717275842584540-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">chown</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">editors</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">EDITORS</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef32717275842584540-2\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">w</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">EDITORS</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef32717275842584540-3\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">EDITORS</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef32717275842584540-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>此时 editors 用户组的所有成员都可以访问和修改其中的文件。除此之外其他用户（除了 root 之外）无法访问 <code>/EDITORS</code> 中的任何文件。</p>\n<p>使用这个方法的问题在于，你一次只能操作一个组和一个目录而已。这时候访问控制表（ACL）就可以派得上用场了。</p>\n<h3 id=\"toc_4\">使用访问控制表（ACL）</h3>\n<p>现在，让我们把这个问题变得棘手一点。假设你有一个目录 <code>/DATA</code> 并且你想给 readers 用户组的成员读取权限，并同时给 editors 用户组的成员读和写的权限。为此，你必须要用到 <code>setfacl</code> 命令。<code>setfacl</code> 命令可以为文件或文件夹设置一个访问控制表（ACL）。</p>\n<p>这个命令的结构如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef32717279969914362\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsetfacl OPTION X:NAME:Y /DIRECTORY\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef32717279969914362-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef32717279969914362-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef32717279969914362-1\"><span class=\"crayon-e\">setfacl </span><span class=\"crayon-i\">OPTION</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">X</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">NAME</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">Y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">DIRECTORY</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef32717279969914362-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>其中 OPTION 是可选选项，X 可以是 <code>u</code>（用户）或者是 <code>g</code> （用户组），NAME 是用户或者用户组的名字，/DIRECTORY 是要用到的目录。我们将使用 <code>-m</code> 选项进行修改。因此，我们给 readers 用户组添加读取权限的命令是：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef3271727c003280550\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo setfacl -m g:readers:rx -R /DATA\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef3271727c003280550-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef3271727c003280550-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef3271727c003280550-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">setfacl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">readers</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">rx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">DATA</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef3271727c003280550-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>现在 readers 用户组里面的每一个用户都可以读取 <code>/DATA</code> 目录里的文件了，但是他们不能修改里面的内容。</p>\n<p>为了给 editors 用户组里面的用户读写权限，我们执行了以下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef32717280147279493\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo setfacl -m g:editors:rwx -R /DATA \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef32717280147279493-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef32717280147279493-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef32717280147279493-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">setfacl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">editors</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">rwx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">R</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">DATA</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef32717280147279493-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0200 seconds] -->\r\n<p>上述命令将赋予 editors 用户组中的任何成员读取权限，同时保留 readers 用户组的只读权限。</p>\n<h3 id=\"toc_5\">更多的权限控制</h3>\n<p>使用访问控制表（ACL），你可以实现你所需的权限控制。你可以添加用户到用户组，并且灵活地控制这些用户组对每个目录的权限以达到你的需求。如果想了解上述工具的更多信息，可以执行下列的命令：</p>\n<ul>\n<li><code>man usradd</code></li>\n<li><code>man addgroup</code></li>\n<li><code>man usermod</code></li>\n<li><code>man sefacl</code></li>\n<li><code>man chown</code></li>\n<li><code>man chmod</code></li>\n</ul>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113200\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113200votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113200\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["IT技术", "Linux"], "url": "http://blog.jobbole.com/113200/", "url_object_id": "ecb07428446047245a1f32f8ff966176", "fav_nums": 1, "comment_nums": 0}
{"praise_nums": "2", "title": "提升网站访问速度的 SQL 查询优化技巧", "front_image_path": "full/30c9c89359420ef7de32e6e32e9620024a38972b.jpg", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/12/d58689380279e0a450fddedcbc06ffc3.jpg"], "create_date": "2017/12/09", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://deliciousbrains.com/sql-query-optimization/\">Delicious Brains</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/sql-query-optimization\">开源中国</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/d58689380279e0a450fddedcbc06ffc3.jpg\"></p>\n<p>你一定知道，一个快速访问的网站能让用户喜欢，可以帮助网站从Google 上提高排名，可以帮助网站增加转化率。如果你看过网站性能优化方面的文章，例如<a href=\"https://deliciousbrains.com/hosting-wordpress-setup-secure-virtual-server/\" rel=\"nofollow\">设置服务器的最佳实现</a>、到<a href=\"https://deliciousbrains.com/finding-bottlenecks-wordpress-code/\" rel=\"nofollow\">干掉慢速代码</a>以及 <a href=\"https://deliciousbrains.com/wp-offload-s3/doc/why-use-a-cdn/\" rel=\"nofollow\">使用CDN 加载图片</a>，就认为你的 WordPress 网站已经足够快了。但是事实果真如此吗？</p>\n<p>使用动态数据库驱动的网站，例如WordPress，你的网站可能依然有一个问题亟待解决：数据库查询拖慢了网站访问速度。</p>\n<p>在这篇文章中，我将介绍如何识别导致性能出现问题的查询，如何找出它们的问题所在，以及快速修复这些问题和其他加快查询速度的方法。我会把门户网站 deliciousbrains.com 出现的拖慢查询速度的情况作为实际的案例。</p>\n<p>定位</p>\n<p>处理慢SQL查询的第一步是找到慢查询。Ashley已经在之前的<a href=\"https://deliciousbrains.com/finding-bottlenecks-wordpress-code/#query-monitor\" target=\"_blank\" rel=\"nofollow\">博客</a>里面赞扬了调试插件<a href=\"https://wordpress.org/plugins/query-monitor/\" target=\"_blank\" rel=\"nofollow\">Query Monitor</a>，而且这个插件的数据库查询特性使其成为定位慢SQL查询的宝贵工具。该插件会报告所有页面请求过程中的数据库请求，并且可以通过调用这些查询代码或者原件(插件，主题，WordPress核)过滤这些查询，高亮重复查询和慢查询。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/fca1e622eea8f23e013e4680c03d0df1.png\"></p>\n<p>要是不愿意在生产安环境装调试插件(性能开销原因)，也可以打开<a href=\"https://dev.mysql.com/doc/refman/5.7/en/slow-query-log.html\" target=\"_blank\" rel=\"nofollow\">MySQL Slow Query Log</a>，这样在特定时间执行的所有查询都会被记录下来。这种方法配置和设置存放查询位置相对简单。由于这是一个服务级别的调整，性能影响会小于使用调试插件，但当不用的时候也应该关闭。</p>\n<h1>理解</h1>\n<p>一旦你找到了一个你要花很大代价找到的查询，那么接下来就是尝试去理解它并找到是什么让查询变慢。最近，在我们开发我们网站的时候，我们找到了一个要执行8秒的查询。</p>\n<p>我们使用WooCommerce和定制版的WooCommerce软件插件来运行我们的插件商店。此查询的目的是获取那些我们知道客户号的客户的所有订阅。WooCommerce是一个稍微复杂的数据模型，即使订单以自定义的类型存储，用户的ID（商店为每一个用户创建的WordPress）也没有存储在post_author，而是作为后期数据的一部分。订阅软件插件给自义定表创建了一对链接。让我们深入了解查询的更多信息。</p>\n<h1>MySQL是你的朋友</h1>\n<p>MySQL有一个很方便的语句<a href=\"https://dev.mysql.com/doc/refman/5.7/en/describe.html\" target=\"_blank\" rel=\"nofollow\">DESCRIBE</a>，它可以输出表结构的信息，比如字段名，数据类型等等。所以，当你执行DESCRIBE wp_postmeta;你将会看到如下的结果：</p>\n<table>\n<tbody>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n<tbody>\n<tr>\n<th>Field</th>\n<th>Type</th>\n<th>Null</th>\n<th>Key</th>\n<th>Default</th>\n<th>Extra</th>\n</tr>\n</tbody>\n<tbody>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n<tbody>\n<tr>\n<td>meta_id</td>\n<td>bigint(20) unsigned</td>\n<td>NO</td>\n<td>PRI</td>\n<td>NULL</td>\n<td>auto_increment</td>\n</tr>\n<tr>\n<td>post_id</td>\n<td>bigint(20) unsigned</td>\n<td>NO</td>\n<td>MUL</td>\n<td>0</td>\n<td></td>\n</tr>\n<tr>\n<td>meta_key</td>\n<td>varchar(255)</td>\n<td>YES</td>\n<td>MUL</td>\n<td>NULL</td>\n<td></td>\n</tr>\n<tr>\n<td>meta_value</td>\n<td>longtext</td>\n<td>YES</td>\n<td></td>\n<td>NULL</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p>你可能已经知道了这个语句。但是你知道DESCRIBE语句可以放在SELECT, INSERT, UPDATE, REPLACE 和 DELETE语句前边使用吗？更为人们所熟知的是他的同义词 <a href=\"https://dev.mysql.com/doc/refman/5.7/en/explain.html\" target=\"_blank\" rel=\"nofollow\">EXPLAIN</a> ，并将提供有关该语句如何执行的详细信息。</p>\n<p>这是我们查询到的结果：</p>\n<table>\n<tbody>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>type</th>\n<th>possible_keys</th>\n<th>key</th>\n<th>key_len</th>\n<th>ref</th>\n<th>rows</th>\n<th>Extra</th>\n</tr>\n</tbody>\n<tbody>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>pm2</td>\n<td>ref</td>\n<td>meta_key</td>\n<td>meta_key</td>\n<td>576</td>\n<td>const</td>\n<td>28</td>\n<td>Using where; Using temporary; Using filesort</td>\n</tr>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>pm</td>\n<td>ref</td>\n<td>post_id,meta_key</td>\n<td>meta_key</td>\n<td>576</td>\n<td>const</td>\n<td>37456</td>\n<td>Using where</td>\n</tr>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>p</td>\n<td>eq_ref</td>\n<td>PRIMARY,type_status_date</td>\n<td>PRIMARY</td>\n<td>8</td>\n<td>deliciousbrainsdev.pm.post_id</td>\n<td>1</td>\n<td>Using where</td>\n</tr>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>l</td>\n<td>ref</td>\n<td>PRIMARY,order_id</td>\n<td>order_id</td>\n<td>8</td>\n<td>deliciousbrainsdev.pm.post_id</td>\n<td>1</td>\n<td>Using index condition; Using where</td>\n</tr>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>s</td>\n<td>eq_ref</td>\n<td>PRIMARY</td>\n<td>PRIMARY</td>\n<td>8</td>\n<td>deliciousbrainsdev.l.key_id</td>\n<td>1</td>\n<td>NULL</td>\n</tr>\n</tbody>\n</table>\n<p>乍一看，这很难解释。幸运的是，人们通过SitePoint总结了一个<a href=\"https://www.sitepoint.com/using-explain-to-write-better-mysql-queries/\" target=\"_blank\" rel=\"nofollow\">理解语句的全面指南</a>。</p>\n<p>最重要的字段是type，它描述了一张表是怎么构成的。如果你想看全部的内容，那就意味着MySQL要从内存读取整张表，增加I/O的速度并在CPU上加载。这种被称为“全表浏览”—稍后将对此进行详细介绍。</p>\n<p>rows字段也是一个好的标识，标识着MySQL将要不得不做的事情，它显示了结果中查找了多少行。</p>\n<p>Explain也给了我们很多可以优化的信息。例如，pm2表（(wp_postmeta），告诉我们是Using filesort，因为我们使用了 ORDER BY语句对结果进行了排序。如果我们要对查询结果进行分组，这将会给执行增加开销。</p>\n<h3>可视化研究</h3>\n<p>对于这种类型的研究，<a href=\"https://www.mysql.com/products/workbench/\" target=\"_blank\" rel=\"nofollow\">MySQL Workbench</a>是另外一个方便，免费的工具。将数据库用MySQL5.6及其以上的版本打开，EXPLAIN的结果可以用JSON格式输出，同时MySQL Workbench将JSON转换成可视化执行语句：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/12/6775c1e9f8647de59507d737a09bb4b4.png\"></p>\n<p>它自动将查询的问题用颜色着重表示提醒用户去注意。我们可以马上看到，连接wp_woocommerce_software_licences（别名l）的表有严重的问题。</p>\n<h3>解决</h3>\n<p>你<a href=\"https://dev.mysql.com/doc/refman/5.7/en/table-scan-avoidance.html\" target=\"_blank\" rel=\"nofollow\">应该避免</a>这种全部表浏览的查询，因为他使用非索引字段order_id去连接wp_woocommerce_software_licences表和wp_posts表。这对于查询慢是常见的问题，而且也是比较容易解决的问题。</p>\n<h3>索引</h3>\n<p>order_id在表中是一个相当重要的标志性数据，如果想像这种方式查询，我们需要在列上建立一个<a href=\"https://dev.mysql.com/doc/refman/5.7/en/mysql-indexes.html\" target=\"_blank\" rel=\"nofollow\">索引</a>，除此之外，MySQL将逐字扫描表的每一行，直到找到我们想要的行为止。让我们添加一个索引并看看它是怎么样工作的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4c352b32852487998\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE INDEX order_id ON wp_woocommerce_software_licences(order_id)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4c352b32852487998-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4c352b32852487998-1\"><span class=\"crayon-i\">CREATE</span> <span class=\"crayon-i\">INDEX</span> <span class=\"crayon-v\">order</span><span class=\"crayon-sy\">_</span>id <span class=\"crayon-i\">ON</span> <span class=\"crayon-e\">wp_woocommerce_software_licences</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">order_id</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/12/1f0eaebba78bc7b76b03d765fdeed020.png\"></p>\n<p>哇，干的漂亮！我们成功的添加了索引并将查询的时间缩短了5s.</p>\n<h3>了解你的查询语句</h3>\n<p>检查下查询语句——看看每一个join，每一个子查询。它们做了它们不该做的事了吗？这里能做什么优化吗？</p>\n<p>这个例子中，我们把licenses 表和posts 表通过order_id 连接起来同时限制post type 为shop_order。这是为了通过保持数据的完整性来保证我们只使用正确的订单记录，但是事实上这在查询中是多余的。我们知道这是一个关于安全的赌注，在posts 表中software license 行是通过order_id 来跟 WooCommerce order 相关联的，这在PHP 插件代码中是强制的。让我们移除join 来看看有什么提升没有：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2017/12/447fc98220e9c37b85807de00e336cb6.png\"></p>\n<p>提升并不算很大但现在查询时间低于3 秒了。</p>\n<h3>缓存一切数据</h3>\n<p>如果你的服务器默认情况下没有使用MySQL查询缓存，那么你应该开启缓存。开启缓存意味着MySQL 会把所有的语句和语句执行的结果保存下来，如果随后有一条与缓存中完全相同的语句需要执行，那么MySQL 就会返回缓存的结果。缓存不会过时，因为MySQL 会在表数据更新后刷新缓存。</p>\n<p>查询监视器发现在加载一个页面时我们的查询语句执行了四次，尽管有MySQL查询缓存很好，但是在一个请求中重复读取数据库的数据是应该完全避免的。你的PHP 代码中的静态缓存很简单并且可以很高效的解决这个问题。基本上，首次请求时从数据库中获取查询结果，并将其存储在类的静态属性中，然后后续的查询语句调用将从静态属性中返回结果：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4c352b40727732551\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass WC_Software_Subscription {\r\n\r\n    protected static $subscriptions = array();\r\n\r\n    public static function get_user_subscriptions( $user_id ) {\r\n        if ( isset( static::$subscriptions[ $user_id ] ) ) {\r\n            return static::$subscriptions[ $user_id ];\r\n        }\r\n\r\n        global $wpdb;\r\n\r\n        $sql = '...';\r\n\r\n        $results = $wpdb-&gt;get_results( $sql, ARRAY_A );\r\n\r\n        static::$subscriptions[ $user_id ] = $results;\r\n\r\n        return $results;\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4c352b40727732551-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4c352b40727732551-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4c352b40727732551-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4c352b40727732551-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4c352b40727732551-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4c352b40727732551-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4c352b40727732551-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4c352b40727732551-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4c352b40727732551-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4c352b40727732551-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4c352b40727732551-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4c352b40727732551-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4c352b40727732551-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4c352b40727732551-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4c352b40727732551-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4c352b40727732551-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4c352b40727732551-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4c352b40727732551-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4c352b40727732551-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4c352b40727732551-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4c352b40727732551-1\"><span class=\"crayon-t\">class</span> <span class=\"crayon-e\">WC_Software_Subscription</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4c352b40727732551-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a2ef4c352b40727732551-3\">    <span class=\"crayon-m\">protected</span> <span class=\"crayon-m\">static</span> <span class=\"crayon-sy\">$</span><span class=\"crayon-i\">subscriptions</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4c352b40727732551-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a2ef4c352b40727732551-5\">    <span class=\"crayon-m\">public</span> <span class=\"crayon-m\">static</span> <span class=\"crayon-t\">function</span> <span class=\"crayon-e\">get_user_subscriptions</span><span class=\"crayon-sy\">(</span> <span class=\"crayon-sy\">$</span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">_</span>id <span class=\"crayon-sy\">)</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4c352b40727732551-6\">        <span class=\"crayon-st\">if</span> <span class=\"crayon-sy\">(</span> <span class=\"crayon-e\">isset</span><span class=\"crayon-sy\">(</span> <span class=\"crayon-m\">static</span><span class=\"crayon-o\">::</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">subscriptions</span><span class=\"crayon-sy\">[</span> <span class=\"crayon-sy\">$</span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">_</span>id <span class=\"crayon-sy\">]</span> <span class=\"crayon-sy\">)</span> <span class=\"crayon-sy\">)</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4c352b40727732551-7\">            <span class=\"crayon-st\">return</span> <span class=\"crayon-m\">static</span><span class=\"crayon-o\">::</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">subscriptions</span><span class=\"crayon-sy\">[</span> <span class=\"crayon-sy\">$</span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">_</span>id <span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4c352b40727732551-8\">        <span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4c352b40727732551-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4c352b40727732551-10\">        <span class=\"crayon-m\">global</span> <span class=\"crayon-sy\">$</span><span class=\"crayon-v\">wpdb</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4c352b40727732551-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4c352b40727732551-12\">        <span class=\"crayon-sy\">$</span><span class=\"crayon-i\">sql</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-s\">'...'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4c352b40727732551-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4c352b40727732551-14\">        <span class=\"crayon-sy\">$</span><span class=\"crayon-i\">results</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-sy\">$</span><span class=\"crayon-v\">wpdb</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">get_results</span><span class=\"crayon-sy\">(</span> <span class=\"crayon-sy\">$</span><span class=\"crayon-v\">sql</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-v\">ARRAY</span><span class=\"crayon-sy\">_</span>A <span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4c352b40727732551-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4c352b40727732551-16\">        <span class=\"crayon-m\">static</span><span class=\"crayon-o\">::</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">subscriptions</span><span class=\"crayon-sy\">[</span> <span class=\"crayon-sy\">$</span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">_</span>id <span class=\"crayon-sy\">]</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-sy\">$</span><span class=\"crayon-v\">results</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4c352b40727732551-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4c352b40727732551-18\">        <span class=\"crayon-st\">return</span> <span class=\"crayon-sy\">$</span><span class=\"crayon-v\">results</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4c352b40727732551-19\">    <span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4c352b40727732551-20\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p>缓存有一个生命周期，具体地说是实例化对象有一个生命周期。如果你正在查看跨请求的查询结果，那么你需要实现一个持久对象缓存。然而不管怎样，你的代码应该负责设置缓存，并且当基础数据变更时让缓存失效。</p>\n<h3>跳出箱子外思考</h3>\n<p>不仅仅是调整查询或添加索引，还有其他方法可以加快查询的执行速度。 我们查询的最慢的部分是从客户ID到产品ID再到加入表格所做的工作，我们必须为每个客户做到。我们是不是可以在需要的时候抓取客户的数据？如果是那样，那我们就只需要加入一次。</p>\n<p>您可以通过创建数据表来存储许可数据，以及所有许可用户标识和产品标识符来对数据进行非规范化（反规范化）处理，并针对特定客户进行查询。 您需要使用INSERT / UPDATE / DELETE上的<a href=\"https://dev.mysql.com/doc/refman/5.7/en/create-trigger.html\" target=\"_blank\" rel=\"nofollow\">MySQL触发器</a>来重建表格（不过这要取决于数据来更改的表格），这会显着提高查询数据的性能。</p>\n<p>类似地，如果一些连接在MySQL中减慢了查询速度，那么将查询分解为两个或更多语句并在PHP中单独执行它们可能会更快，然后可以在代码中收集和过滤结果。 Laravel 通过<a href=\"https://laravel.com/docs/5.5/eloquent-relationships#eager-loading\" target=\"_blank\" rel=\"nofollow\">预加载</a>在 Eloquent 中就做了类似的事情。</p>\n<p>如果您有大量数据和许多不同的自定义帖子类型，WordPress可能会在wp_posts表上减慢查询速度。 如果您发现查询的帖子类型较慢，那么可以考虑从自定义帖子类型的存储模型移动到<a href=\"https://deliciousbrains.com/creating-custom-table-php-wordpress/\" target=\"_blank\" rel=\"nofollow\">自定义表格</a>中 – 更多内容将在后面的文章中介绍。</p>\n<h3>结论</h3>\n<p>通过这些查询优化方法，我们设法将查询从8秒降低到2秒，并且将查询次数从4次减少到1次。需要说明的是，这些查询时间是在我们开发环境运行时记录的 ，生产环境速度会更快。</p>\n<p>这对追踪查询缓慢及其修复等问题是一个有用的指南。 优化查询看起来可能像一个可怕的任务，但只要你尝试一下，并取得一些初步的胜利，你就会开始找到错误，并希望做出进一步改善。</p>\n<p>如果你有任何优化查询的建议或你喜欢使用的工具？ 可以在评论中留言，让我们知道。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113222\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113222votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113222\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["IT技术", "数据库"], "url": "http://blog.jobbole.com/113222/", "url_object_id": "1d272b3f5e772e150256c80369d176bd", "fav_nums": 1, "comment_nums": 0}
{"praise_nums": "1", "title": "如何在 Linux 下统计高速网络中的流量", "front_image_path": "full/662a63e34b6deebe6fc3d2666d88b8eafd6e2826.jpg", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/12/93caf558382f0e23253d7b6a7cc1b012.jpeg"], "create_date": "2017/12/09", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://xmodulo.com/measure-packets-per-second-throughput-high-speed-network-interface.html\">Dan Nanni</a>   译文出处：<a target=\"_blank\" href=\"\">彭秦进</a>   </div><p><a title=\"如何在Linux下统计高速网络中的流量\" href=\"https://dn-linuxcn.qbox.me/data/attachment/album/201401/20/111509bcnzyb75c7v8e1ch.jpeg\" target=\"_blank\" rel=\"lightbox[5558]\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/93caf558382f0e23253d7b6a7cc1b012.jpeg\" alt=\"nethogs2\" width=\"594\" height=\"354\"></a></p>\n<p>在Linux中有很多的流量监控工具，它们可以监控、分类网络流量，以花哨的图形用户界面提供实时流量分析报告。大多数这些工具（例如：<a href=\"http://xmodulo.com/2013/10/set-web-based-network-traffic-monitoring-linux.html\" target=\"_blank\" rel=\"external nofollow\">ntopng </a>, <a href=\"http://xmodulo.com/2013/10/set-web-based-network-traffic-monitoring-linux.html\" target=\"_blank\" rel=\"external nofollow\"> </a><a href=\"http://xmodulo.com/2012/06/how-to-install-iftop-on-linux.html\" target=\"_blank\" rel=\"external nofollow\">iftop </a>）都是基于<a href=\"http://www.tcpdump.org/pcap3_man.html\" target=\"_blank\" rel=\"external nofollow\">libpcap</a> 库的 ，这个函数库是用来截取流经网卡的数据包的，可在用户空间用来监视分析网络流量。尽管这些工具功能齐全，然而基于libpcap库的流量监控工具无法处理高速（Gb以上）的网络接口，原因是由于在用户空间做数据包截取的系统开销过高所致。</p>\n<p>在本文中我们介绍一种简单的Shell 脚本，它可以监控网络流量而且不依赖于缓慢的libpcap库。这些脚本支持Gb以上规模的高速网络接口，如果你对“汇聚型”的网络流量感兴趣的话，它们可统计每个网络接口上的流量。</p>\n<p>脚本主要是基于<a href=\"http://lwn.net/Articles/31185/\" target=\"_blank\" rel=\"external nofollow\">sysfs</a>虚拟文件系统，这是由内核用来将设备或驱动相关的信息输出到用户空间的一种机制。网络接口的相关分析数据会通过“/sys/class/net//statistics”输出。</p>\n<p>举个例子，eth0的网口上分析报告会输出到这些文件中：</p>\n<ul>\n<li><strong>/sys/class/net/eth0/statistics/rx_packets:</strong> 收到的数据包数据</li>\n<li><strong>/sys/class/net/eth0/statistics/tx_packets:</strong> 传输的数据包数量</li>\n<li><strong>/sys/class/net/eth0/statistics/rx_bytes:</strong> 接收的字节数</li>\n<li><strong>/sys/class/net/eth0/statistics/tx_bytes:</strong> 传输的字节数</li>\n<li><strong>/sys/class/net/eth0/statistics/rx_dropped:</strong> 当收到包数据包下降的数据量</li>\n<li><strong>/sys/class/net/eth0/statistics/tx_dropped:</strong> 传输包数据包下降的数据量</li>\n</ul>\n<p>这些数据会根据内核数据发生变更的时候自动刷新。因此，你可以编写一系列的脚本进行分析并计算流量统计。下面就是这样的脚本（感谢 <a href=\"https://gist.github.com/joemiller/4069513\" target=\"_blank\" rel=\"external nofollow\">joemiller</a> 提供）。第一个脚本是统计每秒数据量，包含接收（RX）或发送（TX）。而后面的则是一个描述网络传输中的接收（RX）发送(TX)带宽。这些脚本中安装不需要任何的工具。</p>\n<p>测量网口每秒数据包：</p>\n<div id=\"crayon-52dc688d925f7354156767\">\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f67d0c8670199347840\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/bin/bash\r\n\r\nINTERVAL=\"1\"  # update interval in seconds\r\n\r\nif [ -z \"$1\" ]; then\r\n        echo\r\n        echo usage: $0 [network-interface]\r\n        echo\r\n        echo e.g. $0 eth0\r\n        echo\r\n        echo shows packets-per-second\r\n        exit\r\nfi\r\n\r\nIF=$1\r\n\r\nwhile true\r\ndo\r\n        R1=`cat /sys/class/net/$1/statistics/rx_packets`\r\n        T1=`cat /sys/class/net/$1/statistics/tx_packets`\r\n        sleep $INTERVAL\r\n        R2=`cat /sys/class/net/$1/statistics/rx_packets`\r\n        T2=`cat /sys/class/net/$1/statistics/tx_packets`\r\n        TXPPS=`expr $T2 - $T1`\r\n        RXPPS=`expr $R2 - $R1`\r\n        echo \"TX $1: $TXPPS pkts/s RX $1: $RXPPS pkts/s\"\r\ndone</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c8670199347840-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c8670199347840-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c8670199347840-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c8670199347840-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c8670199347840-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c8670199347840-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c8670199347840-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c8670199347840-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c8670199347840-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c8670199347840-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c8670199347840-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c8670199347840-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c8670199347840-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c8670199347840-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c8670199347840-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c8670199347840-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c8670199347840-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c8670199347840-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c8670199347840-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c8670199347840-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c8670199347840-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c8670199347840-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c8670199347840-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c8670199347840-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c8670199347840-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c8670199347840-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c8670199347840-27\">27</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f67d0c8670199347840-1\"><span class=\"crayon-p\">#!/bin/bash</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c8670199347840-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c8670199347840-3\"><span class=\"crayon-v\">INTERVAL</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># update interval in seconds</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c8670199347840-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c8670199347840-5\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">z</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$1\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c8670199347840-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c8670199347840-7\"><span class=\"crayon-e\">        </span><span class=\"crayon-e\">echo </span><span class=\"crayon-v\">usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">network</span><span class=\"crayon-o\">-</span><span class=\"crayon-t\">interface</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c8670199347840-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c8670199347840-9\"><span class=\"crayon-e\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">g</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">eth0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c8670199347840-10\"><span class=\"crayon-e\">        </span><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c8670199347840-11\"><span class=\"crayon-e\">        </span><span class=\"crayon-e\">echo </span><span class=\"crayon-e\">shows </span><span class=\"crayon-v\">packets</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">per</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">second</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c8670199347840-12\"><span class=\"crayon-e\">        </span><span class=\"crayon-e\">exit</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c8670199347840-13\"><span class=\"crayon-e\">fi</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c8670199347840-14\"> </div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c8670199347840-15\"><span class=\"crayon-st\">IF</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c8670199347840-16\"> </div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c8670199347840-17\"><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c8670199347840-18\"><span class=\"crayon-st\">do</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c8670199347840-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">R1</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">cat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">net</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">statistics</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rx_packets</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c8670199347840-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">T1</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">cat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">net</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">statistics</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tx_packets</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c8670199347840-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">sleep</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">INTERVAL</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c8670199347840-22\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">R2</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">cat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">net</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">statistics</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rx_packets</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c8670199347840-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">T2</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">cat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">net</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">statistics</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tx_packets</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c8670199347840-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">TXPPS</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">expr</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">T2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">T1</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c8670199347840-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">RXPPS</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">expr</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">R2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">R1</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c8670199347840-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"TX $1: $TXPPS pkts/s RX $1: $RXPPS pkts/s\"</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c8670199347840-27\"><span class=\"crayon-v\">done</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0038 seconds] -->\r\n\n</div>\n</div>\n<p>网络带宽测量</p>\n<div id=\"crayon-52dc688d92610571820674\">\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f67d0c867e798130310\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/bin/bash\r\n\r\nINTERVAL=\"1\"  # update interval in seconds\r\n\r\nif [ -z \"$1\" ]; then\r\n        echo\r\n        echo usage: $0 [network-interface]\r\n        echo\r\n        echo e.g. $0 eth0\r\n        echo\r\n        exit\r\nfi\r\n\r\nIF=$1\r\n\r\nwhile true\r\ndo\r\n        R1=`cat /sys/class/net/$1/statistics/rx_bytes`\r\n        T1=`cat /sys/class/net/$1/statistics/tx_bytes`\r\n        sleep $INTERVAL\r\n        R2=`cat /sys/class/net/$1/statistics/rx_bytes`\r\n        T2=`cat /sys/class/net/$1/statistics/tx_bytes`\r\n        TBPS=`expr $T2 - $T1`\r\n        RBPS=`expr $R2 - $R1`\r\n        TKBPS=`expr $TBPS / 1024`\r\n        RKBPS=`expr $RBPS / 1024`\r\n        echo \"TX $1: $TKBPS kb/s RX $1: $RKBPS kb/s\"\r\ndone</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c867e798130310-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c867e798130310-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c867e798130310-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c867e798130310-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c867e798130310-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c867e798130310-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c867e798130310-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c867e798130310-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c867e798130310-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c867e798130310-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c867e798130310-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c867e798130310-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c867e798130310-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c867e798130310-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c867e798130310-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c867e798130310-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c867e798130310-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c867e798130310-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c867e798130310-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c867e798130310-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c867e798130310-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c867e798130310-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c867e798130310-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c867e798130310-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c867e798130310-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c867e798130310-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a2f67d0c867e798130310-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f67d0c867e798130310-28\">28</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f67d0c867e798130310-1\"><span class=\"crayon-p\">#!/bin/bash</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c867e798130310-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c867e798130310-3\"><span class=\"crayon-v\">INTERVAL</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># update interval in seconds</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c867e798130310-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c867e798130310-5\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">z</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$1\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c867e798130310-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c867e798130310-7\"><span class=\"crayon-e\">        </span><span class=\"crayon-e\">echo </span><span class=\"crayon-v\">usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">network</span><span class=\"crayon-o\">-</span><span class=\"crayon-t\">interface</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c867e798130310-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c867e798130310-9\"><span class=\"crayon-e\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">g</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">eth0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c867e798130310-10\"><span class=\"crayon-e\">        </span><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c867e798130310-11\"><span class=\"crayon-e\">        </span><span class=\"crayon-e\">exit</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c867e798130310-12\"><span class=\"crayon-e\">fi</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c867e798130310-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c867e798130310-14\"><span class=\"crayon-st\">IF</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c867e798130310-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c867e798130310-16\"><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c867e798130310-17\"><span class=\"crayon-st\">do</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c867e798130310-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">R1</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">cat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">net</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">statistics</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rx_bytes</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c867e798130310-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">T1</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">cat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">net</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">statistics</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tx_bytes</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c867e798130310-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">sleep</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">INTERVAL</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c867e798130310-21\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">R2</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">cat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">net</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">statistics</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">rx_bytes</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c867e798130310-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">T2</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">cat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sys</span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">net</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">statistics</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tx_bytes</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c867e798130310-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">TBPS</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">expr</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">T2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">T1</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c867e798130310-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">RBPS</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">expr</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">R2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">R1</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c867e798130310-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">TKBPS</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">expr</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">TBPS</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1024</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c867e798130310-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">RKBPS</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">expr</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">RBPS</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1024</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5a2f67d0c867e798130310-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"TX $1: $TKBPS kb/s RX $1: $RKBPS kb/s\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f67d0c867e798130310-28\"><span class=\"crayon-v\">done</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0040 seconds] -->\r\n\n</div>\n</div>\n<p>下面的屏幕截图显示了上面的两个脚本的输出。</p>\n<p><a title=\"如何在Linux下统计高速网络中的流量\" href=\"https://dn-linuxcn.qbox.me/data/attachment/album/201401/20/111511ua1cdxnc8ncu1sdz.jpg\" target=\"_blank\" rel=\"lightbox[5558]\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/2f570edeab36f18c3bf5fc0f64a8feea.jpg\" alt=\"152940zdJ\" width=\"640\" height=\"386\"></a></p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113226\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113226votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113226\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["IT技术", "Linux"], "url": "http://blog.jobbole.com/113226/", "url_object_id": "3d616518c51266775d612bb308e5855a", "fav_nums": 0, "comment_nums": 0}
{"praise_nums": "2", "title": "Google Brain 推荐算法，给了 Youtube 新生", "front_image_path": "full/b1f2264c1f51fd5a79fff3be41bb947d60891d5b.jpg", "front_image_url": ["http://wx3.sinaimg.cn/mw690/7cc829d3gy1fm098yai29j20g40apq4j.jpg"], "create_date": "2017/12/04", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译，<a href=\"http://www.jobbole.com/members/huanglimin\">黄利民</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://www.theverge.com/2017/8/30/16222850/youtube-google-brain-algorithm-video-recommendation-personalized-feed\">Casey Newton</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p><em>YouTube 整合 Google Brain 推荐算法，视频播放量提升 20 倍。</em></p>\n<p>去年晚些时候，我在玩《羞辱2》（Dishonored 2）游戏时，照常在 YouTube 上搜索了如何通过游戏中棘手的部分。和往常一样，我找到了一个能回答我问题的视频。</p>\n<p><img class=\"aligncenter\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fm098xpivkj21hc0u0dmd.jpg\" width=\"621\" height=\"349\"></p>\n<p>但是在我下一次访问 YouTube 时，网站给我推送了更多引人入胜的《羞辱》游戏视频，比如：</p>\n<ul>\n<li>玩家在玩《羞辱》时能够<u><a href=\"https://www.youtube.com/watch?v=wKF5Rs1A8w8\">不被敌人察觉</a></u>的剪辑；</li>\n<li>玩家用<a href=\"https://www.youtube.com/watch?v=tWSIHC2lvn4&amp;t=597s\">极具创造性的方法</a>杀死每一个敌人的剪辑；</li>\n<li>对游戏开发人员的采访；</li>\n<li>聪明的<a href=\"https://www.youtube.com/watch?v=AivuXyh9PV4\">讽刺评价</a>。</li>\n</ul>\n<p>我到 YouTube 去寻找我问题的答案，它则向我展示了一个宇宙。</p>\n<p>随后，我发现自己一天就要访问 YouTube 好几次。大多数时候我都漫无目的，我已经习惯了网站主动提供我会喜欢的视频。一月份的时候，我迷上了一个叫 <a href=\"https://www.youtube.com/watch?v=mgSnptOsCuw&amp;t=996s\">Pinegrove</a> 的民谣摇滚乐队，几周内 YouTube 就向我提供了几乎所有上传到服务器上的该乐队现场演出。当我今年春天有了一个新公寓时，我开始更频繁地下厨了。在我搜索了如何做意大利面包沙拉之后，YouTube 很快就向我推送了大量专业厨师：<a href=\"https://www.youtube.com/user/ByronTalbott\">Byron Talbott</a>、Serious Eat 的 <a href=\"https://www.youtube.com/watch?v=66btvAWmp7g\">J. Kenji López-Alt</a>、以及 <a href=\"https://www.youtube.com/channel/UCJFp8uSYCjXOMnkUyb3CQ3Q\">Tasty</a> 团队等。</p>\n<p>YouTube一直都是非常实用。自从它于 2005 年成立，就一直是网络的中流砥柱。但是过去一年左右，反正对我来说，YouTube 似乎开始变得出奇的好。这个网站开始以怪异的准确性来预测我可能会感兴趣的视频——比以前精准太多了。那么什么改变了呢？</p>\n<p><img class=\"aligncenter\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fm098yai29j20g40apq4j.jpg\" width=\"580\" height=\"385\"></p>\n<p>在 12 年的历程中，YouTube 已经从一个搜索驱动的网站转变成了一个本身就是目的地的网站。实现这一转变需要数百次的实验、少量的重新设计，以及在人工智能领域的一些重大飞跃。但是真正提升了 YouTube 的，是其在 feed 上的演化发展。</p>\n<p>虽然现在很难回忆起来，但是 YouTube 最初不过是基础设施：它提供了一个把视频嵌入其他网页上的简便方法，这也是你最可能用到它的地方。随着 YouTube 的发展，它成了一个寻找档案电视剪辑、补深夜喜剧，以及观看最新热点视频的网站。除了维基百科以外，YouTube 很可能是网上最引人入胜的地方。你的同事在饮水机旁边提到了 <a href=\"https://www.youtube.com/watch?v=8f7wj_RcqYk\">Harlem Shake</a>，于是你花了余下的整个晚上，去 YouTube 上看了 Harlem Shake 的视频。</p>\n<p>与此同时，Facebook 已经发明了我们这个时代的定义形式：News Feed。它是根据你的兴趣，个性化定制的无限更新流。Feed 占领了消费者网络，从 Tumblr 到 Twitter，到 Instagram，再到 LinkedIn。YouTube 早期实现个性化的方法要更有限，包括要求用户订阅频道。这个比喻来自于电视，并且产生了混杂的结果。虽然 2011 年的大量推送订阅取得了一些成功，但是 ComScore 上的数据显示，一个人观看 YouTube 的平均时间却没有变化。</p>\n<p>频道不再像曾经那样支配着 YouTube。现在，在手机上打开 YouTube， 会发现它们隐藏在一个分开的标签页里。而应用打开的则是一个 feed 流，由根据用户兴趣定制的视频集组成。当然有来自你订阅频道的视频，但是还有来自你可能没有看过的频道的视频，这些视频跟你之前观看过的视频相关。</p>\n<p>这就是为什么直接搜索了《羞辱》（Dishonored）视频之后，我开始看到游戏中的秘密行动和讽刺评价的推荐。YouTube 开发的工具使得它的推荐不仅是个性化的，而且极其准确，从而增加了整个网站的视频观看时间。</p>\n<p>YouTube 推荐的技术领导 Jim McFadden 在 2011 年加入了公司，他说：“当人们知道他们是来找什么的时候，我们知道他们会上 YouTube。我们也希望在他们不一定知道想找什么的时候，为他们提供服务。”</p>\n<p>在 2011 年 McFadden 加入 YouTube 几个月后，我第一次访问了这个公司。YouTube 当时和现在一样，<a href=\"http://www.sfgate.com/business/article/YouTube-s-effort-to-get-people-to-watch-longer-2352967.php\">首要目标</a>都是让用户花更多时间来观看视频。那时事情进行得不是特别顺利。McFadden 说：“YouTube.com 作为一个主页，并没有大量参与度。我们想，既然这样怎么才能把它转变成目标呢？”</p>\n<p>Youtube 尝试了很多方法。给顶部的视频主（top creator）购买了专业摄影仪器。引进了 <a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwjTzeaMnf3VAhUQzGMKHfNaA_AQFggoMAA&amp;url=http%3A%2F%2Fwww.youtube.com%2Fplaylist%3Flist%3DPLLTK93ZhdOWb3X4M3xojmqTZKTGeRSXaQ&amp;usg=AFQjCNHrRwK8QlbAD9YRMTacRrTKtN6Ipg\">leanback</a>，这个特性允许用户在当前视频播放时排列一会要看的新视频。重新设计了 Youtube 主页，突出订阅频道而不是单独的视频。</p>\n<p>每个用户观看的视频数量没有变化，但是一个改变让接下来的那个春天终于有了起色：YouTube 的算法推荐不再基于视频点击量，<a href=\"http://www.businessinsider.com/youtube-watch-time-vs-views-2015-7\">而是基于</a>视频观看时长。</p>\n<p>几乎一夜之间，那些从误导人的标题和缩略图中获益的视频主就发现他们的浏览量暴跌。更高质量的视频不断涌现，这些视频与更长的观看时间紧密相连。接下来的三年，YouTube 的用户观看时长每年增长 50%。</p>\n<p>我订阅了几个频道，并认为自己称得上是一个 YouTube 的常客。但是要想让它变成一个每天能被访问很多次的网站，YouTube 需要一些新的工具——这些工具在过去 18 个月内才成为现实。</p>\n<p>这个月当我拜访 YouTube 办公室时，McFadden 揭示了 YouTube 突然的准确推荐的原因：Google Brain，它是母公司的人工智能部门，YouTube 从 2005 年开始使用它。Google Brain 不是 YouTube 使用人工智能（AI）的第一次尝试。YouTube 之前利用过 Google 建立的系统 Sibyl，将机器学习技术应用于推荐。但是 Google Brain 应用了一种叫非监督学习的技术：它的算法能够找到不同输入之间的关系，而软件工程师永远想不到这些关系。</p>\n<p>“它的关键之一是，它能够概化（generalize）。然而之前，如果我看了一个喜剧演员的视频，我们的推荐很擅长说，这还有一个和它一样的视频。但是 Google Brain 模型能选出其他相似但并不完全一样的喜剧演员——甚至有更紧密的关系。它能够看到不那么明显的模式。”McFadden 说。</p>\n<p>举个例子，Brain 算法开始向 YouTube 手机应用用户推送短视频， 向电视应用用户推送长视频。它推测，根据平台来推送不同时长的视频，能够增加视频观看时长；这个想法是正确的。YouTube 在 2016 年发布了 190 个类似的改动，并且会在今年逐步发布另外 300 个。Todd Beaupre 是 YouTube 挖掘团队的产品组经理，他说：“事实是，大量小的改进随着时间逐步积累。对每一个改进，你尝试了 10 件事，并发布一个。”</p>\n<p>Brain 算法比 YouTube 之前运算得更快。过去几年，它需要花几天时间来将用户行为与未来推荐整合起来。该公司说，这使得公司很难确定热门主题。“如果我们想要让用户回来，弄清现在正在发生什么，那么我们已经从某种程度上解决了这个问题。现在的延迟是用分钟或者小时计算的，而不再是几天了。”Beaupre 说。</p>\n<p>整合 Brain 产生了巨大的影响：超过 70% 的 YouTube 视频观看时长都是由算法推荐产生的。每天，YouTube 向用户推荐 200 万个不同的、76 种语言的视频。人们在 YouTube 主页上观看视频的总时长比三年前增长了 20 倍。</p>\n<p>这大概和我自己的行为对上了。几年前，我开始经常在午餐时间访问 YouTube 主页，这样吃饭的时候可以看看视频。但是它的推荐足够好，让我开始更经常地给自己 YouTube 休息时间。本周我失控了，在 PlayStation 4 上登陆了 YouTube，这样我就能在我所拥有的最大屏幕设备上看推荐视频了。</p>\n<p>这就是真正个性化 feed 的强大之处。但是我对 YouTube 的感觉，与其他组成电子生活的事物很不同；这让我感到吃惊。Facebook 的 feed 是基于好友的动态，以及你点过赞的主页的动态。它能告诉你谁订婚了或者生孩子了。但是我觉得，这些关于好友里程碑式事件的动态内容没那么有趣。Twitter 中则有关注人的推文，以及他们转推的内容。作为一个记者，我几乎被要求住在 Twitter 里，尽管最近主页的时间线里只有无穷无尽的、慌张的尖叫。</p>\n<p>每种 feed 都有它的长处，尽管 2017 年让它们消减了。在 Twitter 上，无论你关注了谁，政治都主导了所有讨论。Facebook 对事件和组这类特征的一时热情导致它的 feed 周周都以不和谐的方法转变，让我觉得我和好友们不再那么相联。（都是图片的 Instagram 仍然像个绿洲，这个应用仍然在快速增长也不是什么奇迹。）</p>\n<p>Facebook、Twitter 和 Instagram，他们的 feed 都经常要求你在他们的平台上表演；这似乎很显著。YouTube 明显是由表演驱动的，即使只有小部分的用户上传过视频，它也不曾对用户施加压力，要求他们上传视频。人们可以被动地享受 YouTube，就像它想方设法地想要取代的电视频道。在这个疯狂的时代，在没有被问到我对当天新闻的反应时，有些东西也能保持镇静。</p>\n<p>YouTube 强调与你可能喜欢的视频相关联的视频，这意味着它的 feed 似乎总要比它同类型的网站在视野范围上更广、更好奇。YouTube 越是在远的地方寻找内容，它越像是想要逃离其他 feed。在黑暗的一年，我会接受 YouTube 提供的所有东西来逃避现实。</p>\n<p>2013 年，Alexis Madrigal 在 Atlantic 上写道，假定我们知道 feed 已经达到了顶峰。他认为，未来是属于有限的经历的：时事通讯邮件、Medium 专栏、10 集的 Netflix 剧集。毕竟，无穷无尽的内容流让人感到疲惫。“当媒体主义的秩序废止时，自由不会冲进真空吸尘器里，但是会产生一个有着它自己逻辑的新兴秩序。”Madrigal 写道。“我们发现，流引进了它自己种类的强烈欲望和约束。更快！更多！更快！更多！更快！更多！”</p>\n<p>4 年来，YouTube 的方法表明 feed 只会变得更加重要。抵制一个与不断提高的个性化方法相对应的、不断增长的视频库是困难的。YouTube 现在对用户进行了调查，调查他们有多喜欢推荐给他们的视频；随着时间流逝，结果会使 YouTube 更聪明——会导致更多的视频被「消费」。</p>\n<p>Beaupre 向我把这个过程描述成穿过峡谷。“这里有与你喜欢过的视频紧密联系的视频，也有热点和流行的视频。但是在这之间，是魔法区。”如果 YouTube 的对手无法找到穿过峡谷的路，他们可能会发现很难与 YouTube 抗衡。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113153\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113153votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113153\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 16</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["其他", "Google Brain", "Youtube", "算法"], "url": "http://blog.jobbole.com/113153/", "url_object_id": "c6756a8d7f29cfd491297923fa0cbbcb", "fav_nums": 1, "comment_nums": 1}
{"praise_nums": "1", "title": "MySQL 性能调优技巧", "front_image_path": "full/35011d6168be00e949624c665041dc724e3ad786.jpg", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/e78e36715813f49e9e62fe0c6050075c.png"], "create_date": "2017/12/06", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://dzone.com/articles/mysql-performance-tuning-tips-for-the-shopping-sea\">Shree Nair</a>   译文出处：<a target=\"_blank\" href=\"http://www.iteye.com/news/32796\">ITeye/无阻我飞扬</a>   </div><blockquote><p><em>摘要：针对购物旺季网站流量会对数据库造成的压力，作者给出了MySQL性能调优的一些技巧，这些技巧极具参考价值，通过这些调优，可以有效避免因为流量过大造成服务器宕机，从而给企业造成经济损失。以下是译文</em></p></blockquote>\n<p>万圣节已经过去很久了，该是把注意力集中在即将到来的假日季节的时候了。首先是感恩节，接着就是黑色星期五和网络星期一，最终在圣诞节/节礼周（从12月26日的节礼日开始，到12月31日的除夕结束为期六天或更长时间。这个词是由零售业在2000年代中期左右发明的，试图延长他们的节礼日销售）达到购物高潮。对于企业主来说，一年的这个时候标志着人们期待已久的年底获利了结。对于一些DBA来说，它会带来恐惧，不安，甚至是不眠之夜，他们要努力使系统重新上线。</p>\n<p>值得庆幸是，情况并非如此。通过对MySQL性能变量做一些主动调整，可以使数据库服务器免受购物旺季带来的需求增加的冲击。</p>\n<h3>技巧#1：确定MySQL的最大连接数</h3>\n<p>对于MySQL的最大连接数，一次最好是发送5个请求到Web服务器。对Web服务器的5个请求中的一部分将用于CSS样式表，图像和脚本等资源。由于诸如浏览器缓存等原因，要获得准确的MySQL到Web服务器的请求比率可能很困难; 要想得到一个确切的数字，就需要分析Web服务器的日志文件。例如，可以手动访问Apache的“access_log”日志文件，也可以通过<a href=\"http://www.debianhelp.co.uk/analog.htm\" target=\"_blank\">Analog</a>或<a href=\"http://www.webalizer.org/\" target=\"_blank\">Webalizer</a>等实用程序访问日志文件。</p>\n<p>一旦有了对特定使用情况的准确估计，请将该比率乘以Web服务器的最大连接数。例如，如果Web服务器配置为最多为256个客户端提供服务，MySQL请求与Web请求的比率为1/8，则最好将最大数据库连接数设置为32。还要考虑留有安全余量，把这个数乘以2，得到最终的数量。只有在基础设施支持的情况下，才能尝试将数据库连接数的最大数量与Web服务器的客户端限制相匹配。在大多数情况下，最好保持接近32。</p>\n<p><strong>在Monyog中查看MySQL连接</strong></p>\n<p>在MySQL数据库中，MySQL的最大并发连接数是存储在全局变量max_connections中的。Monyog报告变量“max_connections”作为当前连接监控组中的“最大允许”指标。它还将该数字除以打开的连接数，以生成连接使用百分比：</p>\n<p>还有一个连接历史记录监控，可以帮助计算最佳的最大并发连接数。它包括尝试，拒绝和成功连接的数量。此外，允许达到的最大指标的百分比显示为一个进度条，可以让你快速评估服务器在过去达到的最大并发连接数：</p>\n<h3>技巧#2：为临时表分配足够的内存</h3>\n<p>在某些情况下，服务器在处理语句时会创建内部临时表。临时表用于内部操作如GROUP BY和distinct，还有一些ORDER BY查询以及UNION和FROM子句（派生表）中的子查询。这些都是在内存中创建的内存表。内存中临时表的最大大小由tmp_table_size和max_heap_table_size中较小的值确定。如果临时表的大小超过这个阈值，则将其转换为磁盘上的InnoDB或MyISAM表。此外，如果查询涉及BLOB或TEXT列，而这些列不能存储在内存表中，临时表总是直接指向磁盘。</p>\n<p>这种转换的代价很大，所以考虑增加max_heap_table_size和tmp_table_size变量的大小来帮助减少在磁盘上创建临时表的数量。请记住，这将需要大量内存，因为内存中临时表的大小是基于“最坏情况”的。例如，内存表总是使用固定长度的列，所以字符列使用VARCHAR（255）。这可以使内存中的临时表比想象的要大得多—事实上，这比查询表的总大小要大很多倍！当增加max_heap_table_size和tmp_table_sizevariables的大小时，一定要监视服务器的内存使用情况，因为内存中的临时表可能会增加达到服务器内存容量的风险。</p>\n<p>一般来说，32M到64M是建议值，从这两个变量开始并根据需要进行调优。</p>\n<p><strong>在Monyog中的临时表监测</strong></p>\n<p>临时表的监测是许多预定义的Monyog监测之一。它提供了一些临时表使用的指标，包括：</p>\n<ul>\n<li><strong>允许的最大值</strong>：显示tmp_table_size服务器变量的值，它定义了在内存中创建的临时表的最大大小。与max_heap_table_size一起，这个值定义了可以在内存中创建的临时表的最大大小。如果内存临时表大于此大小，则将其存储在磁盘上。</li>\n<li><strong>内存表的最大大小</strong>：显示max_heap_table_size服务器变量的值，该值定义了显式创建的MEMORY存储引擎表的最大大小。</li>\n<li><strong>创建的临时表总数</strong>：显示created_tmp_tables服务器变量的值，它定义了在内存中创建的临时表的数量。</li>\n<li><strong>在磁盘上创建的临时表</strong>：显示created_tmp_disk_tables服务器变量的值，该变量定义了在磁盘上创建的临时表的数量。如果这个值很高，则应该考虑增加tmp_table_size和max_heap_table_size的值，以便增加创建内存临时表的数量，从而减少在磁盘上创建临时表的数量。</li>\n<li><strong>磁盘：总比率</strong>：基于created_tmp_disk_tables除以created_tmp_tables的计算值。由于tmp_table_size或max_heap_table_size不足而在磁盘上创建的临时表的百分比。Monyog将这个数字显示为一个进度条和百分比，以便快速确定有多少磁盘用于临时表，而不是内存。</li>\n</ul>\n<p>趋势图可用于创建的总表，磁盘上创建的表和磁盘的总比值。这些让我们看到了它们随着时间的演变：</p>\n<h3>技巧#3：增加线程缓存大小</h3>\n<p>连接管理器线程处理服务器监听的网络接口上的客户端连接请求。连接管理器线程将每个客户端连接与专用于它的线程关联，该线程负责处理该连接的身份验证和所有请求处理。因此，线程和当前连接的客户端之间是一对一的比例。确保线程缓存足够大以容纳所有传入请求是非常重要的。</p>\n<p>MySQL提供了许多与连接线程相关的服务器变量：</p>\n<p>线程缓存大小由thread_cache_size系统变量决定。默认值为0（无缓存），这将导致为每个新连接设置一个线程，并在连接终止时需要处理该线程。如果希望服务器每秒接收数百个连接请求，那么应该将thread_cache_size设置的足够高，以便大多数新连接可以使用缓存线程。可以在服务器启动或运行时设置max_connections的值。</p>\n<p>还应该监视缓存中的线程数（Threads_cached）以及创建了多少个线程，因为无法从缓存中获取线程（Threads_created）。关于后者，如果Threads_created继续以每分钟多于几个线程的增加，请考虑增加thread_cache_size的值。</p>\n<p>使用MySQL show status命令显示MySQL的变量和状态信息。这里有几个例子：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f00fa99948053689162\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSHOW GLOBAL STATUS LIKE '%Threads_connected%';\r\n\r\n+-------------------+-------+\r\n\r\n| Variable_name     | Value |\r\n\r\n+-------------------+-------+\r\n\r\n| Threads_connected | 2     |\r\n\r\n+-------------------+-------+\r\nSHOW GLOBAL STATUS LIKE '%Threads_running%';\r\n\r\n+-----------------+-------+\r\n\r\n| Variable_name   | Value |\r\n\r\n+-----------------+-------+\r\n\r\n| Threads_running | 1     |\r\n\r\n+-----------------+-------+\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f00fa99948053689162-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f00fa99948053689162-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f00fa99948053689162-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f00fa99948053689162-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2f00fa99948053689162-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f00fa99948053689162-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2f00fa99948053689162-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f00fa99948053689162-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2f00fa99948053689162-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f00fa99948053689162-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2f00fa99948053689162-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f00fa99948053689162-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2f00fa99948053689162-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f00fa99948053689162-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2f00fa99948053689162-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f00fa99948053689162-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2f00fa99948053689162-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f00fa99948053689162-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2f00fa99948053689162-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f00fa99948053689162-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2f00fa99948053689162-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f00fa99948053689162-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2f00fa99948053689162-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f00fa99948053689162-1\"><span class=\"crayon-e\">SHOW </span><span class=\"crayon-m\">GLOBAL</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">STATUS </span><span class=\"crayon-i\">LIKE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%Threads_connected%'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f00fa99948053689162-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a2f00fa99948053689162-3\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f00fa99948053689162-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a2f00fa99948053689162-5\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\">     </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f00fa99948053689162-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a2f00fa99948053689162-7\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f00fa99948053689162-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a2f00fa99948053689162-9\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Threads_connected</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">     </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f00fa99948053689162-10\"> </div><div class=\"crayon-line\" id=\"crayon-5a2f00fa99948053689162-11\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f00fa99948053689162-12\"><span class=\"crayon-e\">SHOW </span><span class=\"crayon-m\">GLOBAL</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">STATUS </span><span class=\"crayon-i\">LIKE</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%Threads_running%'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2f00fa99948053689162-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f00fa99948053689162-14\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5a2f00fa99948053689162-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f00fa99948053689162-16\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5a2f00fa99948053689162-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f00fa99948053689162-18\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5a2f00fa99948053689162-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f00fa99948053689162-20\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Threads_running</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">     </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5a2f00fa99948053689162-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f00fa99948053689162-22\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5a2f00fa99948053689162-23\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p><strong>Monyog线程缓存监测</strong></p>\n<p>Monyog提供了一个监控线程缓存的屏幕，名为“线程”。与MySQL线程相关的服务器变量映射到以下Monyog指标：</p>\n<ul>\n<li>thread_cache_size：可以缓存的线程数。</li>\n<li>Threads_cached：缓存中的线程数。</li>\n<li>Threads_created：创建用于处理连接的线程。</li>\n</ul>\n<p>Monyog线程屏幕还包括“线程缓存命中率”指标。这是一个提示线程缓存命中率的指标。如果值较低，则应该考虑增加线程缓存。在状态栏以百分比形式显示该值；它的值越接近100％越好。</p>\n<p>如果这些指标的值等于或超过指定值，则可以将每一个指标配置为发出警告和/或严重警报。</p>\n<h3>其他相关的服务器变量</h3>\n<p>除了上述指标以外，还应该监控以下内容：</p>\n<ol>\n<li><strong>InnoDB缓冲池大小</strong>： InnoDB缓冲池大小在使用InnoDB的MySQL数据库中起着至关重要的作用。缓冲池同时缓存数据和索引。它的值应该尽可能的大，以确保数据库使用内存而不是硬盘驱动器进行读取操作。</li>\n<li><strong>临时表大小</strong>： MySQL使用max_heap_table_size和tmp_table_size中较小的一个来限制内存中临时表的大小。拥有较大的值可以帮助减少在磁盘上创建临时表的数量，但也会增加服务器内存容量的风险，因为这个指标适用于每个客户端。一般来说，32M到64M是建议的值，从这两个变量开始并根据需要进行调优。</li>\n<li><strong>InnoDB日志缓冲区大小</strong>： MySQL每次写入日志文件时，它都会利用可用于处理销售数据的重要系统资源。因此，将InnoDB日志缓冲区大小设置为较大值才有意义。这样，服务器在大型事务中写入磁盘的次数就减少了，从而最大限度地减少了这些耗时的操作。64M是这个变量的一个很好的起点。</li>\n</ol>\n<h3>结论</h3>\n<p>虽然即便是最大的公司网站也会因宕机而遭受损失，但这种影响对于处理网上销售的中小型企业尤其关键。根据<a href=\"https://blog.100tb.com/the-real-cost-of-downtime-for-business\" target=\"_blank\">最近的一份调查报告</a>显示，一分钟的宕机导致企业平均损失约5000美元。不要让你的业务成为那种统计数据（因为宕机造成的损失）的一部分。在假日繁忙之前，主动调优MySQL数据库服务器（S）并收获回报吧！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113197\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113197votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113197\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["IT技术", "MySQL", "数据库"], "url": "http://blog.jobbole.com/113197/", "url_object_id": "9d1a4f483de8dad0a4da4300eacbcc09", "fav_nums": 1, "comment_nums": 2}
{"praise_nums": "1", "title": "分布式、服务化的 ERP 系统架构设计", "front_image_path": "full/900573f30c0b83190d0af33044be8518edaae066.jpg", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/03/architecture.jpg"], "create_date": "2017/12/07", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/liuche/p/7955462.html\">刘彻</a>   </div><p><strong>ERP</strong><strong>之痛</strong></p>\n<p>曾几何时，我混迹于电商、珠宝行业4年多，为这两个行业开发过两套大型业务系统（ERP）。作为一个ERP系统，系统主要功能模块无非是订单管理、商品管理、生产采购、仓库管理、物流管理、财务管理等等。作为一个管理系统，大家的一般开发习惯就是使用.Net或Java技术，建立一个单块（单进程）架构的应用，只有一个SQLServer或MySql数据库。然后在项目文件中分一下各个模块，三层结构方式组织代码编写开发。最后测试，交付上线。</p>\n<p>起初，因为数据量不大，系统性能还不错，各种列表查询，报表查询，Excel数据导出功能等用的都很流畅。但是随着公司业务发展，订单量日积月累，后期各种业务部门的报表查询、数据导出需求不断增多，我们渐渐就感觉系统运行越来越慢。于是我们可能最先想到的解决方案就是，优化系统瓶颈数据库这个大头。我们可能的一种尝试就是将数据库单独放置到一个服务器，实现数据库和应用程序分离，或者是建立各种数据库表索引，优化程序代码等方法。经过这样一番研究优化，系统某些功能可能性能的确大大提高，但是我们还是发现某些功能列表的数据查询导出依然很慢，或者随着数据量继续积累，原来较快的列表导出功能，也愈来愈变得缓慢了。我们用尽各种办法，最后也达不到理想的系统性能速度。</p>\n<p>为了提高系统性能，我们也许会主动学习一些互联网公司的技术经验，什么高并发、高性能、大数据、读写分离等方案，发现自己根本无从下手。我们会觉得因为系统业务特点不一样。ERP系统并发量不高，主要是业务复杂，各种业务耦合度远高于那些互联网应用，不好做拆分，数据查询逻辑要远比互联网系统复杂，一个列表页查询出来的数据，往往需要关联4、5张表才能得到结果。有些报表类的甚至更多。加上各种业务操作事务性、数据一致性要求很高，很多时候导致我们措不及手，无法进一步优化系统。</p>\n<p>曾几何时，我也被这样或那样的理由所挫败，认为ERP系统非常特殊，无药可救，可是后来。。。</p>\n<p>我现在已经不这么认为了，似乎有了新的解决方案O(∩_∩)O哈哈~</p>\n<p><strong>曙光乍现</strong></p>\n<p>在叙述具体方案前，先说下自己的想法。我首先觉得我们做ERP系统前，就得有当今互联网思维。我们不要再去做一个大一统的系统了。我们要分拆一个大系统，做成一个个小系统。然后通过系统接口让这些小系统相互通信。这样来组成一个大系统，具体来说就是“分布式”、“服务化”的互联网思维。让系统在架构设计上就是一个先天支持高度可扩展的系统。</p>\n<p>怎么做呢？具体来说就是要将订单管理、商品管理、生产采购、仓库管理、物流管理、财务管理拆分成一个个子系统。这些子系统可以单独设计开发，对外暴露出各种其他子系统需求的数据接口即可。每个子系统都有单独的数据库。甚至这些子系统可以交由不同的团队去开发和维护，使用不同的技术体系，使用不同的数据库。而不是再像以前那样，都集成在同一个大而全的系统中，一个大而全的数据库。</p>\n<p>对于新架构的系统他有什么优点呢？</p>\n<p>首先，也是最重要的就是解决系统的性能问题。以往数据库实例只有一个，没法扩展出多个实例，以便在性能受限的情况下依靠增加数据库实例来达到负载均衡。也许有人会说可以使用读写分离方案，但是因为ERP系统的特点，这个方案很多时候不现实。比如说操作库存的时候，你不能从读库里读库存，然后在写库里写入库存。因为主从复制会有时效性，写入的库存并不能马上写入从库。这样的场景在ERP中也有多处。何况写库不能扩展，只能有一个。而新设计方案是写库是分离的，每个子系统有自己的数据库。</p>\n<p>其次，就是更新非常方便，各个子系统以后台微服务的方式存在。前台一个单独的web项目，这个web项目调用后台这些子系统的服务接口。这样的设计，在某个业务子系统需要更新的时候，可以单独更新。不用像以前那种单进程架构时，一个小更新需要整个系统重启，导致用户会话也丢失，用户需要新登录。而现在的这种设计就不会有这个问题。</p>\n<p><strong>系统整体设计</strong></p>\n<p>系统物理部署视图</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/92662fec4eb3e86e81fbd23e062cef51.png\" alt=\"\" width=\"659\" height=\"534\"></p>\n<p><strong>详细设计</strong></p>\n<p><strong>   拆分应用层</strong></p>\n<p>拆分应用层，是践行“微服务”架构的理念。将原来大而全的单进程架构按照业务模块拆分成可独立部署的应用程序，以此来达到平滑系统更新、升级、方便负载扩展的目的。具体来说，技术上可以使用restfull风格的接口，也可以使用像java中dubbo框架方式来简化开发复杂度。ERPWeb端或其他移动端也是一个单独的应用充当表现层。非常薄，只是简单的接受参数，调取后台其他各种微服务程序的接口获取所需展示的数据。微服务充当业务逻辑层，每个微服务都是可独立部署上线的程序，对外提供数据访问接口。</p>\n<p>微服务可以使用流行的各种RPC框架，比如dubbo，可以支持多种调用协议Http、TCP等，这些框架使得编码比较容易，框架封装底层数据通信细节，使得客户端执行远程方法如同执行本地方法一样简单。</p>\n<p>dubbo微服务架构，还支持服务治理，负载均衡等功能。这样不仅可以提高系统的可用性，还能动态提升系统应用层的性能。比如仓库管理中入库业务非常繁忙，占用非常多的CPU和内存资源，我们可以另外加一台机器，单独再部署一个仓库管理服务上去。这样使得整个系统，有两个仓库管理服务在同时工作，平衡负载。而这一切都是在服务注册中心，比如Zookeeper下自动完成的。</p>\n<p>微服务结构，天生很好的支持系统更新升级操作。比如财务模块有个新需求需要上线，我们只需要替换财务模块的服务重启即可。这对已经登录系统的用户来说，没有多少影响，不用重新登陆系统，其他模块服务使用也不受影响。</p>\n<p><strong>    拆分数据层</strong></p>\n<p>数据库瓶颈是ERP系统的永久之伤。大量复杂的数据查询表连接逻辑充斥着整个系统。数据库垂直拆分成功的关键就是如何重新设计系统数据层各个模块相互耦合的问题。能解决这个问题，永久之伤便可以解决了。</p>\n<p>我们先来看一个典型数据层模块耦合问题。需求是展示物料库存，列表字段：物料编号、物料名称、品类、仓库、数量</p>\n<p>物料表：</p>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>物料ID</td>\n<td>名称</td>\n<td>品类ID</td>\n</tr>\n<tr>\n<td>Z0001</td>\n<td>Iphone6红色手机壳</td>\n<td>Z</td>\n</tr>\n<tr>\n<td>Z0002</td>\n<td>iPhone6黑色手机壳</td>\n<td>Z</td>\n</tr>\n</tbody>\n</table>\n<p>库存表：</p>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>物料ID</td>\n<td>仓库ID</td>\n<td>数量</td>\n</tr>\n<tr>\n<td>Z0001</td>\n<td>W1</td>\n<td>10</td>\n</tr>\n<tr>\n<td>Z0002</td>\n<td>W1</td>\n<td>20</td>\n</tr>\n</tbody>\n</table>\n<p>品类和仓库表省略。。。</p>\n<p>很显然，传统一个数据库中，我们只需要简单的join操作，即可关联这两张表，外加关联品类和仓库表即可查询出我们所要的数据。但是现在我们的架构中，物料表和商品表不在同一个数据库实例中，我们不能使用join操作了，那我们该怎么实现需求呢？</p>\n<p>新的架构，只允许我们通过对方的服务接口来获取数据，不能直接关联对方服务的私有数据库。至少从架构上，服务化角度来说不能直接访问对方服务的数据库。这种情况下，假设web模块子系统调用仓库子系统来获取数据，则我们需要在仓库模块中创建一个service方法来装配这些数据。然后返回给web子系统。如下图所示，仓库管理方法首先获取本地库存表的物料编码、和仓库表的仓库名称字段信息，并且分页完后最终准备返回20条数据到Web模块前，将这20条数据中的物料ID作为参数请求商品模块子系统，商品子系统返回这20个物料ID相关的商品信息给到仓库管理模块，然后仓库管理模块重新组装上列表所需的物料名称和品类两个字段数据，实现最终要返回给Web子系统的数据。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/5844da7dc1a895e04903b2e7e9a80583.png\" alt=\"\" width=\"492\" height=\"484\"></p>\n<p>也许你会说，这太麻烦了，这种方法的性能肯定没有直接join来的高，解决不了性能问题。咋看起来好像是这么回事，但是仔细考虑看看，在系统并发量低、数据量小、业务不算繁忙的环境下，的确性能还不如传统一个数据中join方式来的快速。但我们想想以后吧！我们现在的架构设计是将一个数据库拆成多个数据库，每个数据库可以运行在单独的服务器上去，这样以后就能负载数据库的压力了。整体来说这样才能不会让数据库成为未来业务繁忙时候的性能瓶颈了。想想都觉得让人兴奋不已，是不是？</p>\n<p>这时候有人又会问，那以后系统数据量、业务更大了，连你这个拆分成几个数据库还不够用怎么办呢？我的方法是，可以基于拆分的数据库，单独每个库可以做读写分离、使用缓存等。甚至可以继续拆分下去，将子系统再次拆分成多个孙子系统。视业务模块繁忙程度而定。</p>\n<p><strong>报表系统</strong></p>\n<p>有人又会问，有些列表查询逻辑非常复杂，关联十多张表，如果按上述方法拆分数据，那简直是灾难啊！是的，你说的没有错。这种情况下我的方案是将这种更加复杂的报表级别的数据查询展示需求，可以单独做个报表系统。报表数据库设计采用数据仓库方式。为了更高的读取性能，我们可以将数据库表设计成很多冗余字段方式也就是反范式设计，以及建立非常多的组合索引。</p>\n<p>这种系统成功的关键就是数据和主ERP系统业务库的同步问题了。一般可以写一个定时同步程序，将ERP主业务系统的数据经过帅选、转化等方式直接生成报表视图所需的最终或中间数据，简化关联查询。报表系统也可以采用微服务架构设计。如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/522a3600daf64a8e983f09ed54353a98.png\" alt=\"\" width=\"651\" height=\"294\"></p>\n<p>如果报表所需的数据要求实时的，我们可以让ERP系统业务操作时，触发同步数据的请求，实时同步至报表库。</p>\n<p><strong>分布式事务</strong></p>\n<p>也许有人又又问了，ERP系统很多操作都要求事务性，你拆分系统后怎么实现事务性，保障数据一致性呢？</p>\n<p>这个问题很好，也是我决定写这篇文章前思考的最后一个问题。在微服务架构中，实现夸服务的事务并不容易，至少不像本地应用使用本地数据库事务那样方便，性能高效，数据一致性好。</p>\n<p>也许你听过分布式事务这个概念。有两种情景，一种是一个应用中使用多个数据库，为保障数据一致性，需要使用分布式事务。还有一种情况就是针对我们这个架构而言的。微服务环境下的分布式事务，具体来说打个比方。采购入库这个操作设计在仓库管理服务中。入库后，需要更新采购子系统中的采购单中的入库数量。这个过程要求数据一致性，也就是采购单入库成功后写入了库存表中的数量，同时要更新采购单表中的入库数量。我们不能直接在仓库服务中去访问采购服务中的数据库，必须通过采购服务提供的服务接口才行。如果这样，我们怎么能保证数据一致性呢？因为很有可能库存表写入成功，但调取采购服务写入采购单数据时失败了。可能是网络问题原因导致的，这样数据就不一致了。</p>\n<p>在分布式事务技术中，有实现最终一致性这么一说，意思就是只要我能保证两边数据最终实现了一致性就行，不一定要使用事务。这样说来就有方案了。如仓库子系统在处理采购入库时需要增加入库单数据和更新库存数据等多个表。这多个表都在仓库子系统中，我们可以使用一个本地事务来保证仓库子系统中的表数据一致性。然后调用采购子系统更新采购单里的入库数量。为了防止这个过程突然中断导致调用失败，我们考虑增加一个消息队列中间件如ActiveMQ。如果接口返回失败我们就往MQ里写入这个处理请求，等到采购子系统恢复正常后，MQ通知采购子系统处理这个更新操作。由于消息消费掉以后不会再有通知了，采购子系统处理过程中发生异常导致更新失败，需要将问题写入本地的日志库，以便通知管理员做后续补偿处理。就这样通过各种办法来达到数据的最终一致性即可。虽然听上去有点坑，但这就是解决方案。没有其他更好的了。或者更新失败后重新调用仓库子系统回滚入库单和库存数据，达到最终一致性！如图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/a5b2c925209ba4a005c3b909e598de99.png\" alt=\"\" width=\"651\" height=\"312\"></p>\n<p>非常有幸能和大家一起分享知识和经验，正是由于大家的无私分享，才让我们得以成长和进步，我最近几年来都很少分享东西，有时候是因为工作很忙没有时间写点东西，有时候也是因为自己懒或是没有什么新东西可以分享给大家的。最后也希望大家对我的分享不足之处给予批评指正，一起进步！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113174\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113174votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113174\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["IT技术", "分布式", "架构"], "url": "http://blog.jobbole.com/113174/", "url_object_id": "fa24eafc29a7a991a5f4b675e3fe9aab", "fav_nums": 1, "comment_nums": 2}
{"praise_nums": "1", "title": "机器学习之Logistic回归算法", "front_image_path": "full/eadb28355fab57e9672e5c965147ef4caca04ac4.jpg", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/04/ff247977ac3e5237654ad324e8c880ed.jpg"], "create_date": "2017/12/05", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://holynull.leanote.com/post/Logistic-2\">Holy Null</a>   </div><h1 id=\"title\">Logistic回归算法</h1>\n<p>本文介绍机器学习中的Logistic回归算法，我们使用这个算法来给数据进行分类。Logistic回归算法同样是需要通过样本空间学习的监督学习算法，并且适用于数值型和标称型数据，例如，我们需要根据输入数据的特征值（数值型）的大小来判断数据是某种分类或者不是某种分类。</p>\n<h2 id=\"title-1\">一、样本数据</h2>\n<p>在我们的例子中，我们有这样一些样本数据：</p>\n<ul>\n<li>样本数据有3个特征值：<span id=\"MathJax-Element-1-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-1\" class=\"math\"><span id=\"MathJax-Span-2\" class=\"mrow\"><span id=\"MathJax-Span-3\" class=\"msubsup\"><span id=\"MathJax-Span-4\" class=\"mi\">X</span><span id=\"MathJax-Span-5\" class=\"mn\">0</span></span></span></span><span class=\"MJX_Assistive_MathML\">X0</span></span>，<span id=\"MathJax-Element-2-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-6\" class=\"math\"><span id=\"MathJax-Span-7\" class=\"mrow\"><span id=\"MathJax-Span-8\" class=\"msubsup\"><span id=\"MathJax-Span-9\" class=\"mi\">X</span><span id=\"MathJax-Span-10\" class=\"mn\">1</span></span></span></span><span class=\"MJX_Assistive_MathML\">X1</span></span>，<span id=\"MathJax-Element-3-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-11\" class=\"math\"><span id=\"MathJax-Span-12\" class=\"mrow\"><span id=\"MathJax-Span-13\" class=\"msubsup\"><span id=\"MathJax-Span-14\" class=\"mi\">X</span><span id=\"MathJax-Span-15\" class=\"mn\">2</span></span></span></span><span class=\"MJX_Assistive_MathML\">X2</span></span></li>\n<li>我们通过这3个特征值中的<span id=\"MathJax-Element-4-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-16\" class=\"math\"><span id=\"MathJax-Span-17\" class=\"mrow\"><span id=\"MathJax-Span-18\" class=\"msubsup\"><span id=\"MathJax-Span-19\" class=\"mi\">X</span><span id=\"MathJax-Span-20\" class=\"mn\">1</span></span></span></span><span class=\"MJX_Assistive_MathML\">X1</span></span>和<span id=\"MathJax-Element-5-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-21\" class=\"math\"><span id=\"MathJax-Span-22\" class=\"mrow\"><span id=\"MathJax-Span-23\" class=\"msubsup\"><span id=\"MathJax-Span-24\" class=\"mi\">X</span><span id=\"MathJax-Span-25\" class=\"mn\">2</span></span></span></span><span class=\"MJX_Assistive_MathML\">X2</span></span>来判断数据是否符合要求，即符合要求的为1，不符合要求的为0。</li>\n<li>样本数据分类存放在一个数组中</li>\n</ul>\n<p>我们在logRegres.py文件中编写如下函数来准备数据，并将数据打印观察一下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f59c54918d320244449\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#coding=utf-8\r\nfrom numpy import *\r\ndef loadDataSet():\r\n    dataMat = []; labelMat = []\r\n    fr = open('testSet.txt')\r\n    for line in fr.readlines():\r\n        lineArr = line.strip().split()\r\n        dataMat.append([1.0, float(lineArr[0]), float(lineArr[1])])\r\n        labelMat.append(int(lineArr[2]))\r\n    return dataMat,labelMat\r\nif __name__=='__main__':\r\n    dataMat,labelMat=loadDataSet()\r\n    print 'dataMat:\\n',dataMat</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f59c54918d320244449-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c54918d320244449-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c54918d320244449-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c54918d320244449-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c54918d320244449-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c54918d320244449-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c54918d320244449-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c54918d320244449-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c54918d320244449-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c54918d320244449-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c54918d320244449-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c54918d320244449-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c54918d320244449-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f59c54918d320244449-1\"><span class=\"crayon-p\">#coding=utf-8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c54918d320244449-2\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-e \">import *</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c54918d320244449-3\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">loadDataSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c54918d320244449-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c54918d320244449-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">fr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'testSet.txt'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c54918d320244449-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">line </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">readlines</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c54918d320244449-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">lineArr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">line</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c54918d320244449-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lineArr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lineArr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c54918d320244449-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lineArr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c54918d320244449-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">labelMat</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c54918d320244449-11\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-o\">==</span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c54918d320244449-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">loadDataSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c54918d320244449-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'dataMat:\\n'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">dataMat</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p>我们来观察一下这个数据样本：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f59c549199960935738\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndataMat:\r\n[[1.0, -0.017612, 14.053064], [1.0, -1.395634, 4.662541], [1.0, -0.752157, 6.53862], [1.0, -1.322371, 7.152853], [1.0, 0.423363, 11.054677], [1.0, 0.406704, 7.067335], [1.0, 0.667394, 12.741452], [1.0, -2.46015, 6.866805], [1.0, 0.569411, 9.548755], [1.0, -0.026632, 10.427743], [1.0, 0.850433, 6.920334], [1.0, 1.347183, 13.1755], [1.0, 1.176813, 3.16702], [1.0, -1.781871, 9.097953], [1.0, -0.566606, 5.749003], [1.0, 0.931635, 1.589505], [1.0, -0.024205, 6.151823], [1.0, -0.036453, 2.690988], [1.0, -0.196949, 0.444165], [1.0, 1.014459, 5.754399], [1.0, 1.985298, 3.230619], [1.0, -1.693453, -0.55754], [1.0, -0.576525, 11.778922], [1.0, -0.346811, -1.67873], [1.0, -2.124484, 2.672471], [1.0, 1.217916, 9.597015], [1.0, -0.733928, 9.098687], [1.0, -3.642001, -1.618087], [1.0, 0.315985, 3.523953], [1.0, 1.416614, 9.619232], [1.0, -0.386323, 3.989286], [1.0, 0.556921, 8.294984], [1.0, 1.224863, 11.58736], [1.0, -1.347803, -2.406051], [1.0, 1.196604, 4.951851], [1.0, 0.275221, 9.543647], [1.0, 0.470575, 9.332488], [1.0, -1.889567, 9.542662], [1.0, -1.527893, 12.150579], [1.0, -1.185247, 11.309318], [1.0, -0.445678, 3.297303], [1.0, 1.042222, 6.105155], [1.0, -0.618787, 10.320986], [1.0, 1.152083, 0.548467], [1.0, 0.828534, 2.676045], [1.0, -1.237728, 10.549033], [1.0, -0.683565, -2.166125], [1.0, 0.229456, 5.921938], [1.0, -0.959885, 11.555336], [1.0, 0.492911, 10.993324], [1.0, 0.184992, 8.721488], [1.0, -0.355715, 10.325976], [1.0, -0.397822, 8.058397], [1.0, 0.824839, 13.730343], [1.0, 1.507278, 5.027866], [1.0, 0.099671, 6.835839], [1.0, -0.344008, 10.717485], [1.0, 1.785928, 7.718645], [1.0, -0.918801, 11.560217], [1.0, -0.364009, 4.7473], [1.0, -0.841722, 4.119083], [1.0, 0.490426, 1.960539], [1.0, -0.007194, 9.075792], [1.0, 0.356107, 12.447863], [1.0, 0.342578, 12.281162], [1.0, -0.810823, -1.466018], [1.0, 2.530777, 6.476801], [1.0, 1.296683, 11.607559], [1.0, 0.475487, 12.040035], [1.0, -0.783277, 11.009725], [1.0, 0.074798, 11.02365], [1.0, -1.337472, 0.468339], [1.0, -0.102781, 13.763651], [1.0, -0.147324, 2.874846], [1.0, 0.518389, 9.887035], [1.0, 1.015399, 7.571882], [1.0, -1.658086, -0.027255], [1.0, 1.319944, 2.171228], [1.0, 2.056216, 5.019981], [1.0, -0.851633, 4.375691], [1.0, -1.510047, 6.061992], [1.0, -1.076637, -3.181888], [1.0, 1.821096, 10.28399], [1.0, 3.01015, 8.401766], [1.0, -1.099458, 1.688274], [1.0, -0.834872, -1.733869], [1.0, -0.846637, 3.849075], [1.0, 1.400102, 12.628781], [1.0, 1.752842, 5.468166], [1.0, 0.078557, 0.059736], [1.0, 0.089392, -0.7153], [1.0, 1.825662, 12.693808], [1.0, 0.197445, 9.744638], [1.0, 0.126117, 0.922311], [1.0, -0.679797, 1.22053], [1.0, 0.677983, 2.556666], [1.0, 0.761349, 10.693862], [1.0, -2.168791, 0.143632], [1.0, 1.38861, 9.341997], [1.0, 0.317029, 14.739025]]\r\nlabelMat:\r\n[0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 1, 0, 0]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f59c549199960935738-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c549199960935738-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c549199960935738-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c549199960935738-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f59c549199960935738-1\"><span class=\"crayon-v\">dataMat</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c549199960935738-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.017612</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14.053064</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.395634</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.662541</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.752157</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.53862</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.322371</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.152853</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.423363</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.054677</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.406704</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.067335</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.667394</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.741452</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.46015</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.866805</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.569411</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.548755</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.026632</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.427743</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.850433</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.920334</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.347183</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.1755</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.176813</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.16702</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.781871</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.097953</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.566606</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.749003</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.931635</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.589505</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.024205</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.151823</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.036453</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.690988</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.196949</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.444165</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.014459</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.754399</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.985298</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.230619</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.693453</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.55754</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.576525</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.778922</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.346811</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.67873</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.124484</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.672471</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.217916</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.597015</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.733928</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.098687</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3.642001</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.618087</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.315985</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.523953</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.416614</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.619232</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.386323</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.989286</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.556921</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8.294984</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.224863</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.58736</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.347803</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.406051</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.196604</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.951851</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.275221</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.543647</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.470575</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.332488</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.889567</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.542662</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.527893</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.150579</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.185247</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.309318</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.445678</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.297303</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.042222</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.105155</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.618787</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.320986</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.152083</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.548467</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.828534</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.676045</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.237728</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.549033</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.683565</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.166125</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.229456</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.921938</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.959885</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.555336</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.492911</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.993324</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.184992</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8.721488</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.355715</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.325976</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.397822</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8.058397</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.824839</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.730343</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.507278</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.027866</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.099671</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.835839</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.344008</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.717485</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.785928</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.718645</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.918801</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.560217</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.364009</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.7473</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.841722</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.119083</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.490426</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.960539</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.007194</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.075792</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.356107</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.447863</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.342578</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.281162</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.810823</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.466018</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.530777</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.476801</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.296683</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.607559</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.475487</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.040035</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.783277</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.009725</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.074798</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.02365</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.337472</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.468339</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.102781</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.763651</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.147324</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.874846</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.518389</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.887035</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.015399</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7.571882</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.658086</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.027255</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.319944</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.171228</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.056216</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.019981</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.851633</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.375691</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.510047</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6.061992</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.076637</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3.181888</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.821096</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.28399</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.01015</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8.401766</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.099458</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.688274</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.834872</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.733869</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.846637</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.849075</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.400102</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.628781</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.752842</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.468166</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.078557</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.059736</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.089392</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.7153</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.825662</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.693808</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.197445</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.744638</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.126117</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.922311</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.679797</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.22053</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.677983</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.556666</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.761349</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.693862</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.168791</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.143632</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.38861</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9.341997</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.317029</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14.739025</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c549199960935738-3\"><span class=\"crayon-v\">labelMat</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c549199960935738-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0255 seconds] -->\r\n<p>样本数据<code>dataMat</code>的第一列，也就是我们的特征值<span id=\"MathJax-Element-6-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-26\" class=\"math\"><span id=\"MathJax-Span-27\" class=\"mrow\"><span id=\"MathJax-Span-28\" class=\"msubsup\"><span id=\"MathJax-Span-29\" class=\"mi\">X</span><span id=\"MathJax-Span-30\" class=\"mn\">0</span></span></span></span><span class=\"MJX_Assistive_MathML\">X0</span></span>全部为1，这个问题我们之后在计算回归参数时需要注意理解。所有的样本数据一共100条，对应的分类结果也是100个。</p>\n<p><strong>那么，我们现在的问题是：</strong><br>\n<strong>我们要找到样本空间中的特征值与分类结果的关系。设计一个函数或者功能，实现在输入一组特征值后，能够根据样本空间特征值与分类结果的关系，自动为输入的数据进行分类，即得到结果要么是1，要么是0。</strong></p>\n<h2 id=\"title-2\">二、Sigmoid函数</h2>\n<p>为了解决上一节我们提到的问题，我们这里先介绍一下Sigmoid函数：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fm60lvcgxjj208p03cdfn.jpg\" width=\"313\" height=\"120\"></p>\n<p>这个函数有如下几个特征：</p>\n<ul>\n<li>当<span id=\"MathJax-Element-8-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-49\" class=\"math\"><span id=\"MathJax-Span-50\" class=\"mrow\"><span id=\"MathJax-Span-51\" class=\"mi\">z</span><span id=\"MathJax-Span-52\" class=\"mo\">=</span><span id=\"MathJax-Span-53\" class=\"mn\">0</span></span></span><span class=\"MJX_Assistive_MathML\">z=0</span></span>时，值为<span id=\"MathJax-Element-9-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-54\" class=\"math\"><span id=\"MathJax-Span-55\" class=\"mrow\"><span id=\"MathJax-Span-56\" class=\"mn\">0.5</span></span></span><span class=\"MJX_Assistive_MathML\">0.5</span></span></li>\n<li>当<span id=\"MathJax-Element-10-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-57\" class=\"math\"><span id=\"MathJax-Span-58\" class=\"mrow\"><span id=\"MathJax-Span-59\" class=\"mi\">z</span></span></span><span class=\"MJX_Assistive_MathML\">z</span></span>不断增大时，值将趋近于1</li>\n<li>当<span id=\"MathJax-Element-11-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-60\" class=\"math\"><span id=\"MathJax-Span-61\" class=\"mrow\"><span id=\"MathJax-Span-62\" class=\"mi\">z</span></span></span><span class=\"MJX_Assistive_MathML\">z</span></span>不断减小时，值将趋近于0</li>\n</ul>\n<p>我们来看一下函数的曲线图：</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fm60ltmj50j20fu0ag0sv.jpg\" width=\"570\" height=\"376\"></p>\n<p>我们如果将样本空间的3个特征值<span id=\"MathJax-Element-12-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-63\" class=\"math\"><span id=\"MathJax-Span-64\" class=\"mrow\"><span id=\"MathJax-Span-65\" class=\"msubsup\"><span id=\"MathJax-Span-66\" class=\"mi\">X</span><span id=\"MathJax-Span-67\" class=\"mn\">0</span></span></span></span><span class=\"MJX_Assistive_MathML\">X0</span></span>、<span id=\"MathJax-Element-13-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-68\" class=\"math\"><span id=\"MathJax-Span-69\" class=\"mrow\"><span id=\"MathJax-Span-70\" class=\"msubsup\"><span id=\"MathJax-Span-71\" class=\"mi\">X</span><span id=\"MathJax-Span-72\" class=\"mn\">1</span></span></span></span><span class=\"MJX_Assistive_MathML\">X1</span></span>和<span id=\"MathJax-Element-14-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-73\" class=\"math\"><span id=\"MathJax-Span-74\" class=\"mrow\"><span id=\"MathJax-Span-75\" class=\"msubsup\"><span id=\"MathJax-Span-76\" class=\"mi\">X</span><span id=\"MathJax-Span-77\" class=\"mn\">2</span></span></span></span><span class=\"MJX_Assistive_MathML\">X2</span></span>的值代入到函数中，计算出一个结果。那么这个结果将是接近与我们的分类结果的（0到1之间的一个数值）。如果这个结果接近0那么我们就认为分类为0，如果结果接近1我们就认为分类为1。</p>\n<p>以什么方式代入到函数中呢？其实简单的相加就可以，因为<span id=\"MathJax-Element-15-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-78\" class=\"math\"><span id=\"MathJax-Span-79\" class=\"mrow\"><span id=\"MathJax-Span-80\" class=\"mi\">z</span></span></span><span class=\"MJX_Assistive_MathML\">z</span></span>不断增大或者减小时，函数的值就相应的趋近于1或者0。我们使<span id=\"MathJax-Element-16-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-81\" class=\"math\"><span id=\"MathJax-Span-82\" class=\"mrow\"><span id=\"MathJax-Span-83\" class=\"mi\">z</span><span id=\"MathJax-Span-84\" class=\"mo\">=</span><span id=\"MathJax-Span-85\" class=\"msubsup\"><span id=\"MathJax-Span-86\" class=\"mi\">x</span><span id=\"MathJax-Span-87\" class=\"mn\">0</span></span><span id=\"MathJax-Span-88\" class=\"mo\">+</span><span id=\"MathJax-Span-89\" class=\"msubsup\"><span id=\"MathJax-Span-90\" class=\"mi\">x</span><span id=\"MathJax-Span-91\" class=\"mn\">1</span></span><span id=\"MathJax-Span-92\" class=\"mo\">+</span><span id=\"MathJax-Span-93\" class=\"msubsup\"><span id=\"MathJax-Span-94\" class=\"mi\">x</span><span id=\"MathJax-Span-95\" class=\"mn\">2</span></span></span></span><span class=\"MJX_Assistive_MathML\">z=x0+x1+x2</span></span></p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fm60lvuesej2089027dfn.jpg\" width=\"297\" height=\"79\"></p>\n<p>但是实际的情况是我们的计算结果和实际的分类值，会有误差，甚至是完全不正确。为了矫正这个问题，我们为样本空间的3个特征值<span id=\"MathJax-Element-18-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-126\" class=\"math\"><span id=\"MathJax-Span-127\" class=\"mrow\"><span id=\"MathJax-Span-128\" class=\"msubsup\"><span id=\"MathJax-Span-129\" class=\"mi\">X</span><span id=\"MathJax-Span-130\" class=\"mn\">0</span></span></span></span><span class=\"MJX_Assistive_MathML\">X0</span></span>、<span id=\"MathJax-Element-19-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-131\" class=\"math\"><span id=\"MathJax-Span-132\" class=\"mrow\"><span id=\"MathJax-Span-133\" class=\"msubsup\"><span id=\"MathJax-Span-134\" class=\"mi\">X</span><span id=\"MathJax-Span-135\" class=\"mn\">1</span></span></span></span><span class=\"MJX_Assistive_MathML\">X1</span></span>和<span id=\"MathJax-Element-20-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-136\" class=\"math\"><span id=\"MathJax-Span-137\" class=\"mrow\"><span id=\"MathJax-Span-138\" class=\"msubsup\"><span id=\"MathJax-Span-139\" class=\"mi\">X</span><span id=\"MathJax-Span-140\" class=\"mn\">2</span></span></span></span><span class=\"MJX_Assistive_MathML\">X2</span></span>，一一定义一个回归系数<span id=\"MathJax-Element-21-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-141\" class=\"math\"><span id=\"MathJax-Span-142\" class=\"mrow\"><span id=\"MathJax-Span-143\" class=\"msubsup\"><span id=\"MathJax-Span-144\" class=\"mi\">w</span><span id=\"MathJax-Span-145\" class=\"mn\">0</span></span></span></span><span class=\"MJX_Assistive_MathML\">w0</span></span>、<span id=\"MathJax-Element-22-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-146\" class=\"math\"><span id=\"MathJax-Span-147\" class=\"mrow\"><span id=\"MathJax-Span-148\" class=\"msubsup\"><span id=\"MathJax-Span-149\" class=\"mi\">w</span><span id=\"MathJax-Span-150\" class=\"mn\">1</span></span></span></span><span class=\"MJX_Assistive_MathML\">w1</span></span>和<span id=\"MathJax-Element-23-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-151\" class=\"math\"><span id=\"MathJax-Span-152\" class=\"mrow\"><span id=\"MathJax-Span-153\" class=\"msubsup\"><span id=\"MathJax-Span-154\" class=\"mi\">w</span><span id=\"MathJax-Span-155\" class=\"mn\">2</span></span></span></span><span class=\"MJX_Assistive_MathML\">w2</span></span>，使这个误差减小。即使<span id=\"MathJax-Element-24-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-156\" class=\"math\"><span id=\"MathJax-Span-157\" class=\"mrow\"><span id=\"MathJax-Span-158\" class=\"mi\">z</span><span id=\"MathJax-Span-159\" class=\"mo\">=</span><span id=\"MathJax-Span-160\" class=\"msubsup\"><span id=\"MathJax-Span-161\" class=\"mi\">w</span><span id=\"MathJax-Span-162\" class=\"mn\">0</span></span><span id=\"MathJax-Span-163\" class=\"msubsup\"><span id=\"MathJax-Span-164\" class=\"mi\">x</span><span id=\"MathJax-Span-165\" class=\"mn\">0</span></span><span id=\"MathJax-Span-166\" class=\"mo\">+</span><span id=\"MathJax-Span-167\" class=\"msubsup\"><span id=\"MathJax-Span-168\" class=\"mi\">w</span><span id=\"MathJax-Span-169\" class=\"mn\">1</span></span><span id=\"MathJax-Span-170\" class=\"msubsup\"><span id=\"MathJax-Span-171\" class=\"mi\">x</span><span id=\"MathJax-Span-172\" class=\"mn\">1</span></span><span id=\"MathJax-Span-173\" class=\"mo\">+</span><span id=\"MathJax-Span-174\" class=\"msubsup\"><span id=\"MathJax-Span-175\" class=\"mi\">w</span><span id=\"MathJax-Span-176\" class=\"mn\">2</span></span><span id=\"MathJax-Span-177\" class=\"msubsup\"><span id=\"MathJax-Span-178\" class=\"mi\">x</span><span id=\"MathJax-Span-179\" class=\"mn\">2</span></span></span></span></span></p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fm60lw5fe7j20a402ajr8.jpg\" width=\"364\" height=\"82\"></p>\n<p>其实不难想象，这组<span id=\"MathJax-Element-26-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-221\" class=\"math\"><span id=\"MathJax-Span-222\" class=\"mrow\"><span id=\"MathJax-Span-223\" class=\"mi\">w</span></span></span><span class=\"MJX_Assistive_MathML\">w</span></span>回归系数的值决定了我们计算结果的准确性，甚至是正确性。也就是说，这组<span id=\"MathJax-Element-27-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-224\" class=\"math\"><span id=\"MathJax-Span-225\" class=\"mrow\"><span id=\"MathJax-Span-226\" class=\"mi\">w</span></span></span><span class=\"MJX_Assistive_MathML\">w</span></span>的值反应了样本空间分类的规则。<br>\n那么，我们在输入一组样本之外的数据时，配合正确的<span id=\"MathJax-Element-28-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-227\" class=\"math\"><span id=\"MathJax-Span-228\" class=\"mrow\"><span id=\"MathJax-Span-229\" class=\"mi\">w</span></span></span><span class=\"MJX_Assistive_MathML\">w</span></span>回归系数，我们就能得到比较接近样本空间分类规则的分类结果。<br>\n问题又来了，我们怎么来得到这样一组<span id=\"MathJax-Element-29-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-230\" class=\"math\"><span id=\"MathJax-Span-231\" class=\"mrow\"><span id=\"MathJax-Span-232\" class=\"mi\">w</span></span></span><span class=\"MJX_Assistive_MathML\">w</span></span>回归系数呢？</p>\n<h2 id=\"title-3\">三、梯度上升法</h2>\n<p>梯度上升法，是在函数的梯度方向上，不断的迭代计算参数值，以找到一个最大的参数值。迭代公式如下：</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fm60lwk7ihj208o01iglf.jpg\" width=\"312\" height=\"54\"></p>\n<p>其中，<span id=\"MathJax-Element-31-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-255\" class=\"math\"><span id=\"MathJax-Span-256\" class=\"mrow\"><span id=\"MathJax-Span-257\" class=\"mi\">α</span></span></span><span class=\"MJX_Assistive_MathML\">α</span></span>为步长，<span id=\"MathJax-Element-32-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-258\" class=\"math\"><span id=\"MathJax-Span-259\" class=\"mrow\"><span id=\"MathJax-Span-260\" class=\"mi\">Δ</span><span id=\"MathJax-Span-261\" class=\"mi\">σ</span><span id=\"MathJax-Span-262\" class=\"mo\">(</span><span id=\"MathJax-Span-263\" class=\"mi\">w</span><span id=\"MathJax-Span-264\" class=\"mo\">)</span></span></span><span class=\"MJX_Assistive_MathML\">Δσ(w)</span></span>为<span id=\"MathJax-Element-33-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-265\" class=\"math\"><span id=\"MathJax-Span-266\" class=\"mrow\"><span id=\"MathJax-Span-267\" class=\"mi\">σ</span><span id=\"MathJax-Span-268\" class=\"mo\">(</span><span id=\"MathJax-Span-269\" class=\"mi\">w</span><span id=\"MathJax-Span-270\" class=\"mo\">)</span></span></span><span class=\"MJX_Assistive_MathML\">σ(w)</span></span>函数梯度。关于梯度的推导请参考<a href=\"http://blog.csdn.net/taotaofu/article/details/52831965\">这里</a>。作者的数学能力有限，就不做说明了。<br>\n最后，我们可以得到梯度的计算公式：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fm60lwxeqdj20ae02c746.jpg\" width=\"374\" height=\"84\"></p>\n<p>那么，迭代公式如下：</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fm60lx83osj20b502ca9y.jpg\" width=\"401\" height=\"84\"></p>\n<p>公式说明：</p>\n<ul>\n<li><span id=\"MathJax-Element-36-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-354\" class=\"math\"><span id=\"MathJax-Span-355\" class=\"mrow\"><span id=\"MathJax-Span-356\" class=\"msubsup\"><span id=\"MathJax-Span-357\" class=\"mi\">w</span><span id=\"MathJax-Span-358\" class=\"texatom\"><span id=\"MathJax-Span-359\" class=\"mrow\"><span id=\"MathJax-Span-360\" class=\"mi\">k</span><span id=\"MathJax-Span-361\" class=\"mo\">+</span><span id=\"MathJax-Span-362\" class=\"mn\">1</span></span></span></span></span></span><span class=\"MJX_Assistive_MathML\">wk+1</span></span>为本次迭代<span id=\"MathJax-Element-37-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-363\" class=\"math\"><span id=\"MathJax-Span-364\" class=\"mrow\"><span id=\"MathJax-Span-365\" class=\"mi\">X</span></span></span><span class=\"MJX_Assistive_MathML\">X</span></span>特征项的回归系数结果</li>\n<li><span id=\"MathJax-Element-38-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-366\" class=\"math\"><span id=\"MathJax-Span-367\" class=\"mrow\"><span id=\"MathJax-Span-368\" class=\"msubsup\"><span id=\"MathJax-Span-369\" class=\"mi\">w</span><span id=\"MathJax-Span-370\" class=\"mi\">k</span></span></span></span><span class=\"MJX_Assistive_MathML\">wk</span></span>为上一次迭代<span id=\"MathJax-Element-39-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-371\" class=\"math\"><span id=\"MathJax-Span-372\" class=\"mrow\"><span id=\"MathJax-Span-373\" class=\"mi\">X</span></span></span><span class=\"MJX_Assistive_MathML\">X</span></span>特征项的回归系数结果</li>\n<li><span id=\"MathJax-Element-40-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-374\" class=\"math\"><span id=\"MathJax-Span-375\" class=\"mrow\"><span id=\"MathJax-Span-376\" class=\"mi\">α</span></span></span><span class=\"MJX_Assistive_MathML\">α</span></span>为每次迭代向梯度方向移动的步长</li>\n<li><span id=\"MathJax-Element-41-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-377\" class=\"math\"><span id=\"MathJax-Span-378\" class=\"mrow\"><span id=\"MathJax-Span-379\" class=\"msubsup\"><span id=\"MathJax-Span-380\" class=\"mi\">x</span><span id=\"MathJax-Span-381\" class=\"texatom\"><span id=\"MathJax-Span-382\" class=\"mrow\"><span id=\"MathJax-Span-383\" class=\"mi\">i</span></span></span></span></span></span><span class=\"MJX_Assistive_MathML\">xi</span></span>为<span id=\"MathJax-Element-42-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-384\" class=\"math\"><span id=\"MathJax-Span-385\" class=\"mrow\"><span id=\"MathJax-Span-386\" class=\"mi\">X</span></span></span><span class=\"MJX_Assistive_MathML\">X</span></span>特征项中第i个元素</li>\n<li><span id=\"MathJax-Element-43-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-387\" class=\"math\"><span id=\"MathJax-Span-388\" class=\"mrow\"><span id=\"MathJax-Span-389\" class=\"msubsup\"><span id=\"MathJax-Span-390\" class=\"mi\">y</span><span id=\"MathJax-Span-391\" class=\"mi\">i</span></span></span></span><span class=\"MJX_Assistive_MathML\">yi</span></span>是样本中第i条记录的分类样本结果</li>\n<li><span id=\"MathJax-Element-44-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-392\" class=\"math\"><span id=\"MathJax-Span-393\" class=\"mrow\"><span id=\"MathJax-Span-394\" class=\"mi\">σ</span><span id=\"MathJax-Span-395\" class=\"mo\">(</span><span id=\"MathJax-Span-396\" class=\"msubsup\"><span id=\"MathJax-Span-397\" class=\"mi\">x</span><span id=\"MathJax-Span-398\" class=\"mi\">i</span></span><span id=\"MathJax-Span-399\" class=\"mo\">,</span><span id=\"MathJax-Span-400\" class=\"msubsup\"><span id=\"MathJax-Span-401\" class=\"mi\">w</span><span id=\"MathJax-Span-402\" class=\"mi\">k</span></span><span id=\"MathJax-Span-403\" class=\"mo\">)</span></span></span><span class=\"MJX_Assistive_MathML\">σ(xi,wk)</span></span>是样本中第i条记录，使用sigmoid函数和<span id=\"MathJax-Element-45-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-404\" class=\"math\"><span id=\"MathJax-Span-405\" class=\"mrow\"><span id=\"MathJax-Span-406\" class=\"msubsup\"><span id=\"MathJax-Span-407\" class=\"mi\">w</span><span id=\"MathJax-Span-408\" class=\"mi\">k</span></span></span></span><span class=\"MJX_Assistive_MathML\">wk</span></span>作为回归系数计算的分类结果</li>\n<li><span id=\"MathJax-Element-46-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-409\" class=\"math\"><span id=\"MathJax-Span-410\" class=\"mrow\"><span id=\"MathJax-Span-411\" class=\"mo\">[</span><span id=\"MathJax-Span-412\" class=\"msubsup\"><span id=\"MathJax-Span-413\" class=\"mi\">y</span><span id=\"MathJax-Span-414\" class=\"mi\">i</span></span><span id=\"MathJax-Span-415\" class=\"mo\">−</span><span id=\"MathJax-Span-416\" class=\"mi\">σ</span><span id=\"MathJax-Span-417\" class=\"mo\">(</span><span id=\"MathJax-Span-418\" class=\"msubsup\"><span id=\"MathJax-Span-419\" class=\"mi\">x</span><span id=\"MathJax-Span-420\" class=\"mi\">i</span></span><span id=\"MathJax-Span-421\" class=\"mo\">,</span><span id=\"MathJax-Span-422\" class=\"msubsup\"><span id=\"MathJax-Span-423\" class=\"mi\">w</span><span id=\"MathJax-Span-424\" class=\"mi\">k</span></span><span id=\"MathJax-Span-425\" class=\"mo\">)</span><span id=\"MathJax-Span-426\" class=\"mo\">]</span></span></span><span class=\"MJX_Assistive_MathML\">[yi−σ(xi,wk)]</span></span>是样本第i条记录对应的分类结果值,与sigmoid函数使用<span id=\"MathJax-Element-47-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px\"><span id=\"MathJax-Span-427\" class=\"math\"><span id=\"MathJax-Span-428\" class=\"mrow\"><span id=\"MathJax-Span-429\" class=\"msubsup\"><span id=\"MathJax-Span-430\" class=\"mi\">w</span><span id=\"MathJax-Span-431\" class=\"mi\">k</span></span></span></span><span class=\"MJX_Assistive_MathML\">wk</span></span>作为回归系数计算的分类结果值的误差值。</li>\n</ul>\n<p>现在，我们有了计算回归系数的公式，下面我们在logRegres.py文件中来实现一个函数，实现计算样本空间的回归系数，并打印一下我们的结果：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f59c5491b9921183070\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef gradAscent(dataMatIn, classLabels):\r\n    dataMatrix = mat(dataMatIn)             #100行3列\r\n    #print dataMatrix\r\n    labelMat = mat(classLabels).transpose() #100行1列\r\n    #print 'labelMat:\\n',labelMat\r\n    print 'labelMat 的形状:rowNum=',shape(labelMat)[0],'colNum=',shape(labelMat)[1]\r\n    rowNum,colNum = shape(dataMatrix)\r\n    alpha = 0.001\r\n    maxCycles = 500\r\n    weights = ones((colNum,1))  #3行1列\r\n    #print shape(dataMatrix)\r\n    #print shape(weights)\r\n    #print shape(labelMat)\r\n    for k in range(maxCycles):              #heavy on matrix operations\r\n        h = sigmoid(dataMatrix*weights)     #100行1列\r\n        #print h\r\n        error = (labelMat - h)              #vector subtraction\r\n        weights = weights + alpha * dataMatrix.transpose()* error #3行1列\r\n    return weights\r\nif __name__=='__main__':\r\n    dataMat,labelMat=loadDataSet()\r\n    #weights=gradAscent(dataMat,labelMat)\r\n    #print 'dataMat:\\n',dataMat\r\n    #print 'labelMat:\\n',labelMat\r\n    print weights</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491b9921183070-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491b9921183070-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491b9921183070-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491b9921183070-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491b9921183070-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491b9921183070-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491b9921183070-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491b9921183070-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491b9921183070-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491b9921183070-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491b9921183070-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491b9921183070-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491b9921183070-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491b9921183070-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491b9921183070-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491b9921183070-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491b9921183070-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491b9921183070-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491b9921183070-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491b9921183070-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491b9921183070-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491b9921183070-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491b9921183070-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491b9921183070-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491b9921183070-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f59c5491b9921183070-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">gradAscent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatIn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">classLabels</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491b9921183070-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatIn</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-p\">#100行3列</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491b9921183070-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print dataMatrix</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491b9921183070-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">classLabels</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">transpose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#100行1列</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491b9921183070-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print 'labelMat:\\n',labelMat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491b9921183070-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'labelMat 的形状:rowNum='</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'colNum='</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491b9921183070-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">rowNum</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">colNum</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491b9921183070-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.001</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491b9921183070-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">maxCycles</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">500</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491b9921183070-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ones</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">colNum</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\">#3行1列</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491b9921183070-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print shape(dataMatrix)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491b9921183070-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print shape(weights)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491b9921183070-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print shape(labelMat)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491b9921183070-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">maxCycles</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">              </span><span class=\"crayon-p\">#heavy on matrix operations</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491b9921183070-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sigmoid</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">dataMatrix*</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">     </span><span class=\"crayon-p\">#100行1列</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491b9921183070-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\">#print h</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491b9921183070-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">error</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-p\">#vector subtraction</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491b9921183070-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">alpha *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">transpose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">error</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#3行1列</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491b9921183070-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">weights</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491b9921183070-20\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-o\">==</span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491b9921183070-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">loadDataSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491b9921183070-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#weights=gradAscent(dataMat,labelMat)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491b9921183070-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print 'dataMat:\\n',dataMat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491b9921183070-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print 'labelMat:\\n',labelMat</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491b9921183070-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print </span><span class=\"crayon-v\">weights</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0040 seconds] -->\r\n<p>打印结果:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f59c5491c0275604412\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n回归系数：\r\n[[ 4.12414349]\r\n [ 0.48007329]\r\n [-0.6168482 ]]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c0275604412-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491c0275604412-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c0275604412-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491c0275604412-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c0275604412-1\">回归系数：</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491c0275604412-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.12414349</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c0275604412-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.48007329</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491c0275604412-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.6168482</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>为了验证我们计算的回顾系数的准确性，我们观察一下样本空间的散点图和回归系数的拟合曲线。我们以<span id=\"MathJax-Element-48-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-432\" class=\"math\"><span id=\"MathJax-Span-433\" class=\"mrow\"><span id=\"MathJax-Span-434\" class=\"mi\">z</span><span id=\"MathJax-Span-435\" class=\"mo\">(</span><span id=\"MathJax-Span-436\" class=\"msubsup\"><span id=\"MathJax-Span-437\" class=\"mi\">x</span><span id=\"MathJax-Span-438\" class=\"mn\">1</span></span><span id=\"MathJax-Span-439\" class=\"mo\">,</span><span id=\"MathJax-Span-440\" class=\"msubsup\"><span id=\"MathJax-Span-441\" class=\"mi\">x</span><span id=\"MathJax-Span-442\" class=\"mn\">2</span></span><span id=\"MathJax-Span-443\" class=\"mo\">)</span><span id=\"MathJax-Span-444\" class=\"mo\">=</span><span id=\"MathJax-Span-445\" class=\"msubsup\"><span id=\"MathJax-Span-446\" class=\"mi\">w</span><span id=\"MathJax-Span-447\" class=\"mn\">0</span></span><span id=\"MathJax-Span-448\" class=\"mo\">+</span><span id=\"MathJax-Span-449\" class=\"msubsup\"><span id=\"MathJax-Span-450\" class=\"mi\">w</span><span id=\"MathJax-Span-451\" class=\"mn\">1</span></span><span id=\"MathJax-Span-452\" class=\"msubsup\"><span id=\"MathJax-Span-453\" class=\"mi\">x</span><span id=\"MathJax-Span-454\" class=\"mn\">1</span></span><span id=\"MathJax-Span-455\" class=\"mo\">+</span><span id=\"MathJax-Span-456\" class=\"msubsup\"><span id=\"MathJax-Span-457\" class=\"mi\">w</span><span id=\"MathJax-Span-458\" class=\"mn\">2</span></span><span id=\"MathJax-Span-459\" class=\"msubsup\"><span id=\"MathJax-Span-460\" class=\"mi\">x</span><span id=\"MathJax-Span-461\" class=\"mn\">2</span></span></span></span></span>作为我们的拟合函数，在坐标系中画出它的拟合曲线。以样本空间中<span id=\"MathJax-Element-49-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-462\" class=\"math\"><span id=\"MathJax-Span-463\" class=\"mrow\"><span id=\"MathJax-Span-464\" class=\"msubsup\"><span id=\"MathJax-Span-465\" class=\"mi\">X</span><span id=\"MathJax-Span-466\" class=\"mn\">1</span></span></span></span><span class=\"MJX_Assistive_MathML\">X1</span></span>和<span id=\"MathJax-Element-50-Frame\" class=\"MathJax\" style=\"font-family: 'lucida grande', 'lucida sans unicode', lucida, helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;font-weight: normal;font-size: 18px;line-height: 30px;font-style: normal;text-indent: 0px;text-align: left;letter-spacing: normal;float: none;direction: ltr;max-width: none;max-height: none;min-width: 0px;min-height: 0px;border: 0px;padding: 0px;margin: 0px;color: #333333;background-color: #ffffff\"><span id=\"MathJax-Span-467\" class=\"math\"><span id=\"MathJax-Span-468\" class=\"mrow\"><span id=\"MathJax-Span-469\" class=\"msubsup\"><span id=\"MathJax-Span-470\" class=\"mi\">X</span><span id=\"MathJax-Span-471\" class=\"mn\">2</span></span></span></span><span class=\"MJX_Assistive_MathML\">X2</span></span>的值作为横坐标和纵坐标，画出样本空间的散点。代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f59c5491c6994190117\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef plotBestFit(weights):\r\n    import matplotlib.pyplot as plt\r\n    dataMat,labelMat=loadDataSet()\r\n    dataArr = array(dataMat)\r\n    n = shape(dataArr)[0] \r\n    xcord1 = []; ycord1 = []\r\n    xcord2 = []; ycord2 = []\r\n    for i in range(n):\r\n        if int(labelMat[i])== 1:\r\n            xcord1.append(dataArr[i,1]); ycord1.append(dataArr[i,2])\r\n        else:\r\n            xcord2.append(dataArr[i,1]); ycord2.append(dataArr[i,2])\r\n    fig = plt.figure()\r\n    ax = fig.add_subplot(111)\r\n    ax.scatter(xcord1, ycord1, s=30, c='red', marker='s')\r\n    ax.scatter(xcord2, ycord2, s=30, c='green')\r\n    x = arange(-3.0, 3.0, 0.1)\r\n    y = (-weights[0]-weights[1]*x)/weights[2]\r\n    y = y.transpose()\r\n    ax.plot(x, y)\r\n    plt.xlabel('X1'); plt.ylabel('X2');\r\n    plt.show()\r\nif __name__=='__main__':\r\n    dataMat,labelMat=loadDataSet()\r\n    weights=gradAscent(dataMat,labelMat)\r\n    print '回归系数：\\n',weights\r\n    plotBestFit(weights)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c6994190117-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491c6994190117-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c6994190117-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491c6994190117-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c6994190117-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491c6994190117-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c6994190117-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491c6994190117-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c6994190117-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491c6994190117-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c6994190117-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491c6994190117-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c6994190117-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491c6994190117-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c6994190117-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491c6994190117-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c6994190117-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491c6994190117-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c6994190117-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491c6994190117-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c6994190117-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491c6994190117-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c6994190117-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491c6994190117-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c6994190117-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491c6994190117-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491c6994190117-27\">27</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c6994190117-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">plotBestFit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491c6994190117-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plt</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c6994190117-3\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">loadDataSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491c6994190117-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataArr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c6994190117-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataArr</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491c6994190117-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">xcord1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ycord1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c6994190117-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">xcord2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ycord2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491c6994190117-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c6994190117-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491c6994190117-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">xcord1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataArr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ycord1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataArr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c6994190117-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491c6994190117-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">xcord2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataArr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ycord2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataArr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c6994190117-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">fig</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">figure</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491c6994190117-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ax</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fig</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add_subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">111</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c6994190117-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ax</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">scatter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">xcord1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ycord1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'red'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">marker</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'s'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491c6994190117-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ax</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">scatter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">xcord2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ycord2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'green'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c6994190117-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491c6994190117-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c6994190117-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">transpose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491c6994190117-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ax</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c6994190117-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">xlabel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'X1'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ylabel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'X2'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491c6994190117-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c6994190117-23\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-o\">==</span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491c6994190117-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">loadDataSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c6994190117-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">weights</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">gradAscent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491c6994190117-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'回归系数：\\n'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">weights</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491c6994190117-27\"><span class=\"crayon-e\">    </span><span class=\"crayon-e\">plotBestFit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0063 seconds] -->\r\n<p>运行后，我们得到如下图片：</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fm60lu2rxoj20hs0dcdg0.jpg\" width=\"640\" height=\"480\"></p>\n<p>通过我们的观察，我们的这个回归系数的算法还是比较准确的，拟合曲线将样本数据分成两部分，并且符合样本的分类规则。</p>\n<p>接下来，我们来实现一个分类器，并测试这个分类器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f59c5491cb122891521\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef classify0(targetData,weights):\r\n    v = sigmoid(targetData*weights)\r\n    if v&gt;0.5:\r\n        return 1.0\r\n    else :\r\n        return 0\r\ndef testClassify0():\r\n    dataMat,labelMat=loadDataSet()\r\n    examPercent=0.7\r\n    row,col=shape(dataMat)\r\n    exam=[]\r\n    exam_label=[]\r\n    test=[]\r\n    test_label=[]\r\n    for i in range(row):\r\n        if i &lt; row*examPercent:\r\n            exam.append(dataMat[i])\r\n            exam_label.append(labelMat[i])\r\n        else:\r\n            test.append(dataMat[i])\r\n            test_label.append(labelMat[i])\r\n    weights=gradAscent(exam,exam_label)\r\n    errCnt=0\r\n    trow,tcol=shape(test)\r\n    for i in range(trow):\r\n        v=int(classify0(test[i],weights))\r\n        if v != int(test_label[i]):\r\n            errCnt += 1\r\n            print '计算值：',v,' 原值',test_label[i]\r\n    print '错误率：',errCnt/trow\r\nif __name__=='__main__':\r\n    #dataMat,labelMat=loadDataSet()\r\n    #weights=gradAscent(dataMat,labelMat)\r\n    ##print 'dataMat:\\n',dataMat\r\n    ##print 'labelMat:\\n',labelMat\r\n    #print '回归系数：\\n',weights\r\n    #plotBestFit(weights)\r\n    testClassify0()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491cb122891521-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491cb122891521-38\">38</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">classify0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">targetData</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sigmoid</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">targetData*</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.0</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-7\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">testClassify0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">loadDataSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">examPercent</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.7</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">col</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">exam</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">exam_label</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">test</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">test_label</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">row*</span><span class=\"crayon-v\">examPercent</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">exam</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">exam_label</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-20\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-21\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">test_label</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">weights</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">gradAscent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">exam</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">exam_label</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">errCnt</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">trow</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">tcol</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">trow</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">v</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">classify0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">test_label</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">errCnt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'计算值：'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">' 原值'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">test_label</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'错误率：'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">errCnt</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">trow</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-31\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-o\">==</span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#dataMat,labelMat=loadDataSet()</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#weights=gradAscent(dataMat,labelMat)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">##print 'dataMat:\\n',dataMat</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">##print 'labelMat:\\n',labelMat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print '回归系数：\\n',weights</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491cb122891521-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#plotBestFit(weights)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491cb122891521-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">testClassify0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0053 seconds] -->\r\n<p>分类器的实现很简单。我们使用之前的样本数据中的70条数据作为我们测试的样本数据，计算出回归系数。然后用分类器对剩下的30条记录进行分类，然后将结果和样本数据进行对比。最后打印出错误率。我们可以看到，错误率是0，近乎完美！我们可以修改测试样本在原样本空间的比例多测试几遍。那么，结论是我们的算法的准确率还不错！</p>\n<p>那么，到这里问题就解决了吗？好像还差一点什么。我们来仔细研究一下我们计算回归系数的方法，不难发现，这个过程中我们用样本数据组成的矩阵进行了矩阵乘法。也就是说，为了计算回归系数，我们遍历了整个样本数据。</p>\n<p>我们的问题又来了，我们例子中的样本数据只有100条，如果处理成千上万的样本数据，我们的计算回归系数的函数的计算复杂度会直线上升。下面我们来看看如何优化这个算法。</p>\n<h2 id=\"title-4\">四、优化梯度上升算法——随机梯度上升法</h2>\n<p>我们在理解了回归系数迭代计算的公式</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fm60lxkhvdj20ba02f746.jpg\" width=\"406\" height=\"87\"><br>\n和我们实现的程序之后。我们将计算回归系数的方法进行如下改进：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f59c5491d1365568224\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef stocGradAscent0(dataMatrix, classLabels):\r\n    m,n = shape(dataMatrix)\r\n    alpha = 0.01\r\n    weights = ones((n,1))   #initialize to all ones\r\n    for i in range(m):\r\n        h = sigmoid(sum(dataMatrix[i]*weights))\r\n        error = classLabels[i] - h\r\n        weights = weights + alpha * error * mat(dataMatrix[i]).transpose()\r\n    return weights</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d1365568224-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491d1365568224-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d1365568224-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491d1365568224-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d1365568224-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491d1365568224-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d1365568224-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491d1365568224-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d1365568224-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d1365568224-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">stocGradAscent0</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">classLabels</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491d1365568224-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d1365568224-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.01</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491d1365568224-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ones</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-p\">#initialize to all ones</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d1365568224-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491d1365568224-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sigmoid</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d1365568224-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">error</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">classLabels</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491d1365568224-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">alpha *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">error *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">transpose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d1365568224-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">weights</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>每一次迭代计算回归系数时，只使用样本空间中的一个样本点来计算。我们通过程序生成一个样本散点和拟合曲线的图来看一下这个算法的准确程度：</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fm60luh3ndj20hs0dcdg5.jpg\" width=\"640\" height=\"480\"></p>\n<p>不难看出跟之前的算法相差还是比较大的。原因是之前的算法是通过500次迭代算出的结果，后者只经过了100次迭代。那么这里要说明的问题是，回归系数在随着迭代次数的增加是趋于收敛的，并且收敛的过程是存在波动的。说白了，就是迭代的次数越多，越接近我们想要的那个值，但是由于样本的数据是非线性的，这个过程也会有一定的误差。具体的回归系数和迭代次数的关系大家可以参考一些教材，例如《机器学习实战》中的描述，这里就不做详细介绍了。<br>\n我们这里只介绍一下如何改进我们的算法，使我们的算法能够快速的收敛并减小波动。方法如下：</p>\n<ul>\n<li>每次迭代随机的抽取一个样本点来计算回归向量</li>\n<li>迭代的步长随着迭代次数增大而不断减少，但是永远不等于0</li>\n</ul>\n<p>改进代码，并打印出拟合曲线和样本散点图：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f59c5491d5857669689\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef stocGradAscent1(dataMatrix, classLabels, numIter=150):\r\n    m,n = shape(dataMatrix)\r\n    weights = ones((n,1))   #initialize to all ones\r\n    for j in range(numIter):\r\n        dataIndex = range(m)\r\n        for i in range(m):\r\n            alpha = 4/(1.0+j+i)+0.0001    #apha decreases with iteration, does not \r\n            randIndex = int(random.uniform(0,len(dataIndex)))#go to 0 because of the constant\r\n            h = sigmoid(sum(dataMatrix[randIndex]*weights))\r\n            error = classLabels[randIndex] - h\r\n            weights = weights + alpha * error * mat(dataMatrix[randIndex]).transpose()\r\n            del(dataIndex[randIndex])\r\n    return weights\r\nif __name__=='__main__':\r\n    dataMat,labelMat=loadDataSet()\r\n    #weights=stocGradAscent0(dataMat,labelMat)\r\n    weights=stocGradAscent1(dataMat,labelMat)\r\n    #weights=gradAscent(dataMat,labelMat)\r\n    #print 'dataMat:\\n',dataMat\r\n    #print 'labelMat:\\n',labelMat\r\n    #print '回归系数：\\n',weights\r\n    plotBestFit(weights)\r\n    #testClassify0()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d5857669689-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491d5857669689-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d5857669689-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491d5857669689-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d5857669689-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491d5857669689-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d5857669689-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491d5857669689-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d5857669689-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491d5857669689-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d5857669689-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491d5857669689-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d5857669689-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491d5857669689-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d5857669689-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491d5857669689-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d5857669689-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491d5857669689-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d5857669689-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491d5857669689-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d5857669689-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f59c5491d5857669689-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2f59c5491d5857669689-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d5857669689-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">stocGradAscent1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">classLabels</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numIter</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">150</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491d5857669689-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d5857669689-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ones</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-p\">#initialize to all ones</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491d5857669689-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">numIter</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d5857669689-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dataIndex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491d5857669689-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d5857669689-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0.0001</span><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#apha decreases with iteration, does not </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491d5857669689-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">randIndex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">uniform</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataIndex</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-p\">#go to 0 because of the constant</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d5857669689-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sigmoid</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">randIndex</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491d5857669689-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">error</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">classLabels</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">randIndex</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d5857669689-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">weights</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">alpha *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">error *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMatrix</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">randIndex</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">transpose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491d5857669689-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">del</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataIndex</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">randIndex</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d5857669689-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">weights</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491d5857669689-14\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-o\">==</span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d5857669689-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">loadDataSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491d5857669689-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#weights=stocGradAscent0(dataMat,labelMat)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d5857669689-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">weights</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">stocGradAscent1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataMat</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">labelMat</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491d5857669689-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#weights=gradAscent(dataMat,labelMat)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d5857669689-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print 'dataMat:\\n',dataMat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491d5857669689-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print 'labelMat:\\n',labelMat</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d5857669689-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#print '回归系数：\\n',weights</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f59c5491d5857669689-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">plotBestFit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">weights</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2f59c5491d5857669689-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#testClassify0()</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0045 seconds] -->\r\n<p>默认是150迭代的样本散点图和拟合曲线图：</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fm60lutip0j20hs0dcjrk.jpg\" width=\"640\" height=\"480\"></p>\n<p>不难看出准确程度与第一个算法很接近了！</p>\n<h2 id=\"title-5\">五、总结</h2>\n<p>Logistic回归算法主要是利用了Sgimoid函数来为数据分类，分类的准确的关键取决于从样本空间中计算出的回归系数。我们使用梯度上升法来计算回归系数，并采用随机梯度上升法来改进了算法的性能。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113182\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113182votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113182\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["IT技术", "Logistic回归算法", "机器学习"], "url": "http://blog.jobbole.com/113182/", "url_object_id": "d61fbe74705766dc3935a52a0e1a0415", "fav_nums": 0, "comment_nums": 0}
{"praise_nums": "1", "title": "多线程编程基础知识", "front_image_path": "full/b7ccda3a3b2f793882325f528f2211d69c7b4f95.jpg", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/05/2b6a906c5f04bf387ccf049e4a20b855.png"], "create_date": "2017/12/05", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/cy163/archive/2006/11/02/547428.html\">cy163</a>   </div><p>当前流行的Windows操作系统能同时运行几个程序(独立运行的程序又称之为进程)，对于同一个程序，它又可以分成若干个独立的执行流，我们称之为线程，线程提供了多任务处理的能力。用进程和线程的观点来研究软件是当今普遍采用的方法，进程和线程的概念的出现，对提高软件的并行性有着重要的意义。现在的大型应用软件无一不是多线程多任务处理，单线程的软件是不可想象的。因此掌握多线程多任务设计方法对每个程序员都是必需要掌握的。本实例针对多线程技术在应用中经常遇到的问题，如线程间的通信、同步等，分别进行探讨，并利用多线程技术进行线程之间的通信，实现了数字的简单排序。</p>\n<h1>一、 实现方法</h1>\n<h2>1、理解线程</h2>\n<p>要讲解线程，不得不说一下进程，进程是应用程序的执行实例，每个进程是由私有的虚拟地址空间、代码、数据和其它系统资源组成。进程在运行时创建的资源随着进程的终止而死亡。线程的基本思想很简单，它是一个独立的执行流，是进程内部的一个独立的执行单元，相当于一个子程序，它对应于Visual C++中的CwinThread类对象。单独一个执行程序运行时，缺省地包含的一个主线程，主线程以函数地址的形式出现，提供程序的启动点，如main（）或WinMain（）函数等。当主线程终止时，进程也随之终止。根据实际需要，应用程序可以分解成许多独立执行的线程，每个线程并行的运行在同一进程中。</p>\n<p>一个进程中的所有线程都在该进程的虚拟地址空间中，使用该进程的全局变量和系统资源。操作系统给每个线程分配不同的CPU时间片，在某一个时刻，CPU只执行一个时间片内的线程，多个时间片中的相应线程在CPU内轮流执行，由于每个时间片时间很短，所以对用户来说，仿佛各个线程在计算机中是并行处理的。操作系统是根据线程的优先级来安排CPU的时间，优先级高的线程优先运行，优先级低的线程则继续等待。</p>\n<p>线程被分为两种：用户界面线程和工作线程（又称为后台线程）。用户界面线程通常用来处理用户的输入并响应各种事件和消息，其实，应用程序的主执行线程CWinAPP对象就是一个用户界面线程，当应用程序启动时自动创建和启动，同样它的终止也意味着该程序的结束，进程终止。工作线程用来执行程序的后台处理任务，比如计算、调度、对串口的读写操作等，它和用户界面线程的区别是它不用从CWinThread类派生来创建，对它来说最重要的是如何实现工作线程任务的运行控制函数。工作线程和用户界面线程启动时要调用同一个函数的不同版本；最后需要读者明白的是，一个进程中的所有线程共享它们父进程的变量，但同时每个线程可以拥有自己的变量。</p>\n<h2>2、线程的管理和操作</h2>\n<h3>（一）线程的启动</h3>\n<p>创建一个用户界面线程，首先要从类CwinThread产生一个派生类，同时必须使用DECLARE_DYNCREATE和IMPLEMENT_DYNCREATE来声明和实现这个CwinThread派生类。第二步是根据需要重载该派生类的一些成员函数如：ExitInstance（）、InitInstance（）、OnIdle（）、PreTranslateMessage（）等函数。最后调用AfxBeginThread()函数的一个版本：CWinThread* AfxBeginThread( CRuntimeClass* pThreadClass, int nPriority = THREAD_PRIORITY_NORMAL, UINT nStackSize = 0, DWORD dwCreateFlags = 0, LPSECURITY_ATTRIBUTES lpSecurityAttrs = NULL ) 启动该用户界面线程，其中第一个参数为指向定义的用户界面线程类指针变量，第二个参数为线程的优先级，第三个参数为线程所对应的堆栈大小，第四个参数为线程创建时的附加标志，缺省为正常状态，如为CREATE_SUSPENDED则线程启动后为挂起状态。</p>\n<p>对于工作线程来说，启动一个线程，首先需要编写一个希望与应用程序的其余部分并行运行的函数如Fun1()，接着定义一个指向CwinThread对象的指针变量*pThread,调用AfxBeginThread(Fun1,param,priority)函数，返回值赋给pThread变量的同时一并启动该线程来执行上面的Fun1（）函数，其中Fun1是线程要运行的函数的名字，也既是上面所说的控制函数的名字，param是准备传送给线程函数Fun1的任意32位值，priority则是定义该线程的优先级别，它是预定义的常数，读者可参考MSDN。</p>\n<h3>（二）线程的优先级</h3>\n<p>以下的CwinThread类的成员函数用于线程优先级的操作：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e706279812159667\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint GetThreadPriority（）；\r\nBOOL SetThradPriority（）(int nPriority)；</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706279812159667-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706279812159667-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e706279812159667-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">GetThreadPriority</span>（）；</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706279812159667-2\"><span class=\"crayon-t\">BOOL</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SetThradPriority</span>（）<span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nPriority</span><span class=\"crayon-sy\">)</span>；</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>上述的二个函数分别用来获取和设置线程的优先级，这里的优先级，是相对于该线程所处的优先权层次而言的，处于同一优先权层次的线程，优先级高的线程先运行；处于不同优先权层次上的线程，谁的优先权层次高，谁先运行。至于优先级设置所需的常数，自己参考MSDN就可以了，要注意的是要想设置线程的优先级，这个线程在创建时必须具有THREAD_SET_INFORMATION访问权限。对于线程的优先权层次的设置，CwinThread类没有提供相应的函数，但是可以通过Win32 SDK函数GetPriorityClass（）和SetPriorityClass（）来实现。</p>\n<h3>（三）线程的悬挂和恢复</h3>\n<p>CWinThread类中包含了应用程序悬挂和恢复它所创建的线程的函数，其中SuspendThread（）用来悬挂线程，暂停线程的执行；ResumeThread（）用来恢复线程的执行。如果你对一个线程连续若干次执行SuspendThread（），则需要连续执行相应次的ResumeThread（）来恢复线程的运行。</p>\n<h3>（四）结束线程</h3>\n<p>终止线程有三种途径，线程可以在自身内部调用AfxEndThread()来终止自身的运行；可以在线程的外部调用BOOL TerminateThread( HANDLE hThread, DWORD dwExitCode )来强行终止一个线程的运行，然后调用CloseHandle（）函数释放线程所占用的堆栈；第三种方法是改变全局变量，使线程的执行函数返回，则该线程终止。下面以第三种方法为例，给出部分代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e706284273859025\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//////CtestView message handlers\r\n/////Set to True to end thread\r\nBool bend=FALSE;//定义的全局变量，用于控制线程的运行；\r\n//The Thread Function；\r\nUINT ThreadFunction(LPVOID pParam)//线程函数\r\n{\r\n　while(!bend)\r\n　{\r\n　　Beep(100,100);\r\n　　Sleep(1000);\r\n　}\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706284273859025-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706284273859025-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706284273859025-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706284273859025-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706284273859025-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706284273859025-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706284273859025-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706284273859025-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706284273859025-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706284273859025-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706284273859025-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706284273859025-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706284273859025-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e706284273859025-1\"><span class=\"crayon-c\">//////CtestView message handlers</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706284273859025-2\"><span class=\"crayon-c\">/////Set to True to end thread</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706284273859025-3\"><span class=\"crayon-t\">Bool</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bend</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">FALSE</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//定义的全局变量，用于控制线程的运行；</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706284273859025-4\"><span class=\"crayon-c\">//The Thread Function；</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706284273859025-5\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ThreadFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">pParam</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">//线程函数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706284273859025-6\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706284273859025-7\">　<span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">bend</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706284273859025-8\">　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706284273859025-9\">　　<span class=\"crayon-e\">Beep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706284273859025-10\">　　<span class=\"crayon-e\">Sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706284273859025-11\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706284273859025-12\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706284273859025-13\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e706288794387938\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCwinThread *pThread;\r\nHWND hWnd;\r\nVoid CtestView::OninitialUpdate()\r\n{ \r\n　hWnd=GetSafeHwnd();\r\n　pThread=AfxBeginThread(ThradFunction,hWnd);//启动线程\r\n　pThread-&gt;m_bAutoDelete=FALSE;//线程为手动删除\r\n　Cview::OnInitialUpdate();\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706288794387938-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706288794387938-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706288794387938-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706288794387938-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706288794387938-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706288794387938-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706288794387938-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706288794387938-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706288794387938-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e706288794387938-1\"><span class=\"crayon-e \">CwinThread *</span><span class=\"crayon-v\">pThread</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706288794387938-2\"><span class=\"crayon-e\">HWND </span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706288794387938-3\"><span class=\"crayon-t\">Void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CtestView</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OninitialUpdate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706288794387938-4\"><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706288794387938-5\">　<span class=\"crayon-v\">hWnd</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">GetSafeHwnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706288794387938-6\">　<span class=\"crayon-v\">pThread</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">AfxBeginThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ThradFunction</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//启动线程</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706288794387938-7\">　<span class=\"crayon-v\">pThread</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">m_bAutoDelete</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">FALSE</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//线程为手动删除</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706288794387938-8\">　<span class=\"crayon-v\">Cview</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OnInitialUpdate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706288794387938-9\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e70628c298723456\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nVoid CtestView::OnDestroy()\r\n{\r\n　bend=TRUE;//改变变量，线程结束\r\n　WaitForSingleObject(pThread-&gt;m_hThread,INFINITE);//等待线程结束\r\n　delete pThread;//删除线程\r\n　Cview::OnDestroy();\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e70628c298723456-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e70628c298723456-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e70628c298723456-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e70628c298723456-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e70628c298723456-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e70628c298723456-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e70628c298723456-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e70628c298723456-1\"><span class=\"crayon-t\">Void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CtestView</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OnDestroy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e70628c298723456-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e70628c298723456-3\">　<span class=\"crayon-v\">bend</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">TRUE</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//改变变量，线程结束</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e70628c298723456-4\">　<span class=\"crayon-e\">WaitForSingleObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">pThread</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">m_hThread</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">INFINITE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//等待线程结束</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e70628c298723456-5\">　<span class=\"crayon-e\">delete </span><span class=\"crayon-v\">pThread</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//删除线程</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e70628c298723456-6\">　<span class=\"crayon-v\">Cview</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OnDestroy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e70628c298723456-7\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<h2>3、线程之间的通信</h2>\n<p>通常情况下，一个次级线程要为主线程完成某种特定类型的任务，这就隐含着表示在主线程和次级线程之间需要建立一个通信的通道。一般情况下，有下面的几种方法实现这种通信任务：使用全局变量（上一节的例子其实使用的就是这种方法）、使用事件对象、使用消息。这里我们主要介绍后两种方法。</p>\n<h3>（一） 利用用户定义的消息通信</h3>\n<p>在Windows程序设计中，应用程序的每一个线程都拥有自己的消息队列，甚至工作线程也不例外，这样一来，就使得线程之间利用消息来传递信息就变的非常简单。首先用户要定义一个用户消息，如下所示：#define WM_USERMSG WMUSER+100；在需要的时候，在一个线程中调用：：PostMessage((HWND)param,WM_USERMSG,0,0)或CwinThread::PostThradMessage（）来向另外一个线程发送这个消息，上述函数的四个参数分别是消息将要发送到的目的窗口的句柄、要发送的消息标志符、消息的参数WPARAM和LPARAM。下面的代码是对上节代码的修改，修改后的结果是在线程结束时显示一个对话框，提示线程结束：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e706290206182862\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nUINT ThreadFunction(LPVOID pParam)\r\n{\r\n　while(!bend)\r\n　{\r\n　　Beep(100,100);\r\n　　Sleep(1000);\r\n　}\r\n　：：PostMessage(hWnd,WM_USERMSG,0,0)；\r\n　return 0;\r\n}\r\n////////WM_USERMSG消息的响应函数为OnThreadended(WPARAM wParam,\r\nLPARAM lParam)\r\nLONG CTestView::OnThreadended(WPARAM wParam,LPARAM lParam)\r\n{\r\n　AfxMessageBox(\"Thread ended.\");\r\n　Retrun 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706290206182862-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706290206182862-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706290206182862-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706290206182862-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706290206182862-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706290206182862-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706290206182862-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706290206182862-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706290206182862-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706290206182862-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706290206182862-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706290206182862-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706290206182862-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706290206182862-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706290206182862-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706290206182862-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706290206182862-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e706290206182862-1\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ThreadFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">pParam</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706290206182862-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706290206182862-3\">　<span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">bend</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706290206182862-4\">　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706290206182862-5\">　　<span class=\"crayon-e\">Beep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706290206182862-6\">　　<span class=\"crayon-e\">Sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706290206182862-7\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706290206182862-8\">　：：<span class=\"crayon-e\">PostMessage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">WM_USERMSG</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span>；</div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706290206182862-9\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706290206182862-10\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706290206182862-11\"><span class=\"crayon-c\">////////WM_USERMSG消息的响应函数为OnThreadended(WPARAM wParam,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706290206182862-12\"><span class=\"crayon-e\">LPARAM </span><span class=\"crayon-v\">lParam</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706290206182862-13\"><span class=\"crayon-t\">LONG</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CTestView</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OnThreadended</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">WPARAM </span><span class=\"crayon-v\">wParam</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">LPARAM </span><span class=\"crayon-v\">lParam</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706290206182862-14\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706290206182862-15\">　<span class=\"crayon-e\">AfxMessageBox</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Thread ended.\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706290206182862-16\">　<span class=\"crayon-i\">Retrun</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706290206182862-17\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>上面的例子是工作者线程向用户界面线程发送消息，对于工作者线程，如果它的设计模式也是消息驱动的，那么调用者可以向它发送初始化、退出、执行某种特定的处理等消息，让它在后台完成。在控制函数中可以直接使用：：GetMessage()这个SDK函数进行消息分检和处理，自己实现一个消息循环。GetMessage()函数在判断该线程的消息队列为空时，线程将系统分配给它的时间片让给其它线程，不无效的占用CPU的时间，如果消息队列不为空，就获取这个消息，判断这个消息的内容并进行相应的处理。</p>\n<h3>（二）用事件对象实现通信</h3>\n<p>在线程之间传递信号进行通信比较复杂的方法是使用事件对象，用MFC的Cevent类的对象来表示。事件对象处于两种状态之一：有信号和无信号，线程可以监视处于有信号状态的事件，以便在适当的时候执行对事件的操作。上述例子代码修改如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e706294989604190\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCevent threadStart ,threadEnd;\r\nUINT ThreadFunction(LPVOID pParam)\r\n{\r\n　：：WaitForSingleObject(threadStart.m_hObject,INFINITE);\r\n　AfxMessageBox(\"Thread start.\");\r\n　while(!bend)\r\n　{\r\n　　Beep(100,100);\r\n　　Sleep(1000);\r\n　　Int result=::WaitforSingleObject(threadEnd.m_hObject,0);\r\n　　//等待threadEnd事件有信号，无信号时线程在这里悬停\r\n　　If(result==Wait_OBJECT_0)\r\n　　　Bend=TRUE;\r\n　}\r\n　：：PostMessage(hWnd,WM_USERMSG,0,0)；\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706294989604190-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706294989604190-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706294989604190-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706294989604190-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706294989604190-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706294989604190-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706294989604190-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706294989604190-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706294989604190-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706294989604190-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706294989604190-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706294989604190-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706294989604190-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706294989604190-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706294989604190-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706294989604190-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706294989604190-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e706294989604190-1\"><span class=\"crayon-e\">Cevent </span><span class=\"crayon-i\">threadStart</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">threadEnd</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706294989604190-2\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ThreadFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">pParam</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706294989604190-3\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706294989604190-4\">　：：<span class=\"crayon-e\">WaitForSingleObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">threadStart</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">m_hObject</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">INFINITE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706294989604190-5\">　<span class=\"crayon-e\">AfxMessageBox</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Thread start.\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706294989604190-6\">　<span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">bend</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706294989604190-7\">　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706294989604190-8\">　　<span class=\"crayon-e\">Beep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706294989604190-9\">　　<span class=\"crayon-e\">Sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706294989604190-10\">　　<span class=\"crayon-t\">Int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">result</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">WaitforSingleObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">threadEnd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">m_hObject</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706294989604190-11\">　　<span class=\"crayon-c\">//等待threadEnd事件有信号，无信号时线程在这里悬停</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706294989604190-12\">　　<span class=\"crayon-st\">If</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">result</span><span class=\"crayon-o\">==</span><span class=\"crayon-v\">Wait_OBJECT_0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706294989604190-13\">　　　<span class=\"crayon-v\">Bend</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">TRUE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706294989604190-14\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706294989604190-15\">　：：<span class=\"crayon-e\">PostMessage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">WM_USERMSG</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span>；</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706294989604190-16\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706294989604190-17\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e706298034876590\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nVoid CtestView::OninitialUpdate()\r\n{ \r\n　hWnd=GetSafeHwnd();\r\n　threadStart.SetEvent();//threadStart事件有信号\r\n　pThread=AfxBeginThread(ThreadFunction,hWnd);//启动线程\r\n　pThread-&gt;m_bAutoDelete=FALSE;\r\n　Cview::OnInitialUpdate();\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706298034876590-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706298034876590-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706298034876590-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706298034876590-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706298034876590-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706298034876590-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e706298034876590-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e706298034876590-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e706298034876590-1\"><span class=\"crayon-t\">Void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CtestView</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OninitialUpdate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706298034876590-2\"><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706298034876590-3\">　<span class=\"crayon-v\">hWnd</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">GetSafeHwnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706298034876590-4\">　<span class=\"crayon-v\">threadStart</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SetEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//threadStart事件有信号</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706298034876590-5\">　<span class=\"crayon-v\">pThread</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">AfxBeginThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ThreadFunction</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//启动线程</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706298034876590-6\">　<span class=\"crayon-v\">pThread</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">m_bAutoDelete</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">FALSE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e706298034876590-7\">　<span class=\"crayon-v\">Cview</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OnInitialUpdate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e706298034876590-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e70629b820362937\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nVoid CtestView::OnDestroy()\r\n{\r\n　threadEnd.SetEvent();\r\n　WaitForSingleObject(pThread-&gt;m_hThread,INFINITE);\r\n　delete pThread;\r\n　Cview::OnDestroy();\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e70629b820362937-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e70629b820362937-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e70629b820362937-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e70629b820362937-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e70629b820362937-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e70629b820362937-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e70629b820362937-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e70629b820362937-1\"><span class=\"crayon-t\">Void</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CtestView</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OnDestroy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e70629b820362937-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e70629b820362937-3\">　<span class=\"crayon-v\">threadEnd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SetEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e70629b820362937-4\">　<span class=\"crayon-e\">WaitForSingleObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">pThread</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">m_hThread</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">INFINITE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e70629b820362937-5\">　<span class=\"crayon-e\">delete </span><span class=\"crayon-v\">pThread</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e70629b820362937-6\">　<span class=\"crayon-v\">Cview</span><span class=\"crayon-o\">::</span><span class=\"crayon-e\">OnDestroy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e70629b820362937-7\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>运行这个程序，当关闭程序时，才显示提示框，显示”Thread ended”。</p>\n<h2>4、线程之间的同步</h2>\n<p>前面我们讲过，各个线程可以访问进程中的公共变量，所以使用多线程的过程中需要注意的问题是如何防止两个或两个以上的线程同时访问同一个数据，以免破坏数据的完整性。保证各个线程可以在一起适当的协调工作称为线程之间的同步。前面一节介绍的事件对象实际上就是一种同步形式。Visual C++中使用同步类来解决操作系统的并行性而引起的数据不安全的问题，MFC支持的七个多线程的同步类可以分成两大类：同步对象（CsyncObject、Csemaphore、Cmutex、CcriticalSection和Cevent）和同步访问对象（CmultiLock和CsingleLock）。本节主要介绍临界区（critical section）、互斥（mutexe）、信号量（semaphore），这些同步对象使各个线程协调工作，程序运行起来更安全。</p>\n<h3>（一） 临界区</h3>\n<p>临界区是保证在某一个时间只有一个线程可以访问数据的方法。使用它的过程中，需要给各个线程提供一个共享的临界区对象，无论哪个线程占有临界区对象，都可以访问受到保护的数据，这时候其它的线程需要等待，直到该线程释放临界区对象为止，临界区被释放后，另外的线程可以强占这个临界区，以便访问共享的数据。临界区对应着一个CcriticalSection对象，当线程需要访问保护数据时，调用临界区对象的Lock()成员函数；当对保护数据的操作完成之后，调用临界区对象的Unlock()成员函数释放对临界区对象的拥有权，以使另一个线程可以夺取临界区对象并访问受保护的数据。同时启动两个线程，它们对应的函数分别为WriteThread()和ReadThread()，用以对公共数组组array[]操作，下面的代码说明了如何使用临界区对象：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062a0377260487\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include \"afxmt.h\"\r\nint array[10],destarray[10];\r\nCCriticalSection Section;\r\nUINT WriteThread(LPVOID param)\r\n{\r\n　Section.Lock();\r\n　for(int x=0;x&lt;10;x++)\r\n　　array[x]=x;\r\n　Section.Unlock();\r\n}\r\nUINT ReadThread(LPVOID param)\r\n{\r\n　Section.Lock();\r\n　For(int x=0;x&lt;10;x++)\r\n　　Destarray[x]=array[x];\r\n　　Section.Unlock();\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a0377260487-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a0377260487-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a0377260487-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a0377260487-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a0377260487-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a0377260487-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a0377260487-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a0377260487-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a0377260487-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a0377260487-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a0377260487-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a0377260487-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a0377260487-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a0377260487-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a0377260487-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a0377260487-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a0377260487-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a0377260487-1\"><span class=\"crayon-p\">#include \"afxmt.h\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a0377260487-2\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">destarray</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a0377260487-3\"><span class=\"crayon-e\">CCriticalSection </span><span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a0377260487-4\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">WriteThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a0377260487-5\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a0377260487-6\">　<span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a0377260487-7\">　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a0377260487-8\">　　<span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a0377260487-9\">　<span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Unlock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a0377260487-10\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a0377260487-11\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ReadThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a0377260487-12\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a0377260487-13\">　<span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a0377260487-14\">　<span class=\"crayon-st\">For</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a0377260487-15\">　　<span class=\"crayon-v\">Destarray</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a0377260487-16\">　　<span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Unlock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a0377260487-17\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>上述代码运行的结果应该是Destarray数组中的元素分别为1-9，而不是杂乱无章的数，如果不使用同步，则不是这个结果，有兴趣的读者可以实验一下。</p>\n<h3>（二）互斥</h3>\n<p>互斥与临界区很相似，但是使用时相对复杂一些，它不仅可以在同一应用程序的线程间实现同步，还可以在不同的进程间实现同步，从而实现资源的安全共享。互斥与Cmutex类的对象相对应，使用互斥对象时，必须创建一个CSingleLock或CMultiLock对象，用于实际的访问控制，因为这里的例子只处理单个互斥，所以我们可以使用CSingleLock对象，该对象的Lock()函数用于占有互斥，Unlock()用于释放互斥。实现代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062a4981074043\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include \"afxmt.h\"\r\nint array[10],destarray[10];\r\nCMutex Section;\r\n\r\nUINT WriteThread(LPVOID param)\r\n{\r\n　CsingleLock singlelock;\r\n　singlelock (&amp;Section);\r\n　singlelock.Lock();\r\n　for(int x=0;x&lt;10;x++)\r\n　　array[x]=x;\r\n　singlelock.Unlock();\r\n}\r\n\r\nUINT ReadThread(LPVOID param)\r\n{\r\n　CsingleLock singlelock;\r\n　singlelock (&amp;Section);\r\n　singlelock.Lock();\r\n　For(int x=0;x&lt;10;x++)\r\n　　Destarray[x]=array[x];\r\n　　singlelock.Unlock();\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a4981074043-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a4981074043-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a4981074043-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a4981074043-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a4981074043-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a4981074043-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a4981074043-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a4981074043-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a4981074043-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a4981074043-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a4981074043-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a4981074043-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a4981074043-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a4981074043-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a4981074043-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a4981074043-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a4981074043-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a4981074043-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a4981074043-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a4981074043-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a4981074043-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a4981074043-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a4981074043-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a4981074043-1\"><span class=\"crayon-p\">#include \"afxmt.h\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a4981074043-2\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">destarray</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a4981074043-3\"><span class=\"crayon-e\">CMutex </span><span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a4981074043-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a4981074043-5\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">WriteThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a4981074043-6\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a4981074043-7\">　<span class=\"crayon-e\">CsingleLock </span><span class=\"crayon-v\">singlelock</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a4981074043-8\">　<span class=\"crayon-e\">singlelock</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a4981074043-9\">　<span class=\"crayon-v\">singlelock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a4981074043-10\">　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a4981074043-11\">　　<span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a4981074043-12\">　<span class=\"crayon-v\">singlelock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Unlock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a4981074043-13\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a4981074043-14\"> </div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a4981074043-15\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ReadThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a4981074043-16\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a4981074043-17\">　<span class=\"crayon-e\">CsingleLock </span><span class=\"crayon-v\">singlelock</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a4981074043-18\">　<span class=\"crayon-e\">singlelock</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">Section</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a4981074043-19\">　<span class=\"crayon-v\">singlelock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a4981074043-20\">　<span class=\"crayon-st\">For</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a4981074043-21\">　　<span class=\"crayon-v\">Destarray</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a4981074043-22\">　　<span class=\"crayon-v\">singlelock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Unlock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a4981074043-23\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0107 seconds] -->\r\n<p></p>\n<h3>（三）信号量</h3>\n<p>信号量的用法和互斥的用法很相似，不同的是它可以同一时刻允许多个线程访问同一个资源，创建一个信号量需要用Csemaphore类声明一个对象，一旦创建了一个信号量对象，就可以用它来对资源的访问技术。要实现计数处理，先创建一个CsingleLock或CmltiLock对象，然后用该对象的Lock()函数减少这个信号量的计数值，Unlock()反之。下面的代码分别启动三个线程，执行时同时显示二个消息框，然后10秒后第三个消息框才得以显示。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062a8078987992\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCsemaphore *semaphore;\r\nSemaphore=new Csemaphore(2,2);\r\nHWND hWnd=GetSafeHwnd();\r\nAfxBeginThread(threadProc1,hWnd);\r\nAfxBeginThread(threadProc2,hWnd);\r\nAfxBeginThread(threadProc3,hWnd);\r\nUINT ThreadProc1(LPVOID param)\r\n{\r\n　CsingleLock singelLock(semaphore);\r\n　singleLock.Lock();\r\n　Sleep(10000);\r\n　::MessageBox((HWND)param,\"Thread1 had access\",\"Thread1\",MB_OK);\r\n　return 0;\r\n}\r\nUINT ThreadProc2(LPVOID param)\r\n{\r\n　CSingleLock singelLock(semaphore);\r\n　singleLock.Lock();\r\n　Sleep(10000);\r\n　::MessageBox((HWND)param,\"Thread2 had access\",\"Thread2\",MB_OK);\r\n　return 0;\r\n}\r\n\r\nUINT ThreadProc3(LPVOID param)\r\n{\r\n　CsingleLock singelLock(semaphore);\r\n　singleLock.Lock();\r\n　Sleep(10000);\r\n　::MessageBox((HWND)param,\"Thread3 had access\",\"Thread3\",MB_OK);\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a8078987992-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a8078987992-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a8078987992-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a8078987992-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a8078987992-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a8078987992-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a8078987992-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a8078987992-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a8078987992-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a8078987992-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a8078987992-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a8078987992-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a8078987992-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a8078987992-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062a8078987992-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062a8078987992-31\">31</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-1\"><span class=\"crayon-e \">Csemaphore *</span><span class=\"crayon-v\">semaphore</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a8078987992-2\"><span class=\"crayon-v\">Semaphore</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Csemaphore</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-3\"><span class=\"crayon-e\">HWND </span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">GetSafeHwnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a8078987992-4\"><span class=\"crayon-e\">AfxBeginThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">threadProc1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-5\"><span class=\"crayon-e\">AfxBeginThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">threadProc2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a8078987992-6\"><span class=\"crayon-e\">AfxBeginThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">threadProc3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">hWnd</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-7\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ThreadProc1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a8078987992-8\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-9\">　<span class=\"crayon-e\">CsingleLock </span><span class=\"crayon-e\">singelLock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">semaphore</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a8078987992-10\">　<span class=\"crayon-v\">singleLock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-11\">　<span class=\"crayon-e\">Sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a8078987992-12\">　<span class=\"crayon-o\">::</span><span class=\"crayon-e\">MessageBox</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HWND</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Thread1 had access\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Thread1\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">MB_OK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-13\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a8078987992-14\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-15\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ThreadProc2</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a8078987992-16\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-17\">　<span class=\"crayon-e\">CSingleLock </span><span class=\"crayon-e\">singelLock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">semaphore</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a8078987992-18\">　<span class=\"crayon-v\">singleLock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-19\">　<span class=\"crayon-e\">Sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a8078987992-20\">　<span class=\"crayon-o\">::</span><span class=\"crayon-e\">MessageBox</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HWND</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Thread2 had access\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Thread2\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">MB_OK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-21\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a8078987992-22\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a8078987992-24\"><span class=\"crayon-e\">UINT </span><span class=\"crayon-e\">ThreadProc3</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-25\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a8078987992-26\">　<span class=\"crayon-e\">CsingleLock </span><span class=\"crayon-e\">singelLock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">semaphore</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-27\">　<span class=\"crayon-v\">singleLock</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Lock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a8078987992-28\">　<span class=\"crayon-e\">Sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-29\">　<span class=\"crayon-o\">::</span><span class=\"crayon-e\">MessageBox</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HWND</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Thread3 had access\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"Thread3\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">MB_OK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062a8078987992-30\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062a8078987992-31\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0040 seconds] -->\r\n<p></p>\n<h1>二、 编程步骤</h1>\n<ol>\n<li>启动Visual C++6.0，生成一个32位的控制台程序，将该程序命名为”sequence”</li>\n<li>输入要排续的数字，声明四个子线程；</li>\n<li>输入代码，编译运行程序。</li>\n</ol>\n<h1>三、 程序代码</h1>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062ac494836705\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsequence.cpp : Defines the entry point for the console application.</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062ac494836705-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062ac494836705-1\"><span class=\"crayon-v\">sequence</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cpp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Defines </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">entry </span><span class=\"crayon-e\">point </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">console </span><span class=\"crayon-v\">application</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>主要用到的WINAPI线程控制函数，有关详细说明请查看MSDN；</p>\n<p>线程建立函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062af808495152\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nHANDLE CreateThread(\r\n　LPSECURITY_ATTRIBUTES lpThreadAttributes, // 安全属性结构指针，可为NULL；\r\n　DWORD dwStackSize, // 线程栈大小，若为0表示使用默认值； \r\n　LPTHREAD_START_ROUTINE lpStartAddress, // 指向线程函数的指针；\r\n　LPVOID lpParameter, // 传递给线程函数的参数，可以保存一个指针值； \r\n　DWORD dwCreationFlags, // 线程建立是的初始标记，运行或挂起； \r\n　LPDWORD lpThreadId // 指向接收线程号的DWORD变量； \r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062af808495152-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062af808495152-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062af808495152-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062af808495152-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062af808495152-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062af808495152-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062af808495152-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062af808495152-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062af808495152-1\"><span class=\"crayon-e\">HANDLE </span><span class=\"crayon-e\">CreateThread</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062af808495152-2\">　<span class=\"crayon-e\">LPSECURITY_ATTRIBUTES </span><span class=\"crayon-v\">lpThreadAttributes</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 安全属性结构指针，可为NULL；</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062af808495152-3\">　<span class=\"crayon-e\">DWORD </span><span class=\"crayon-v\">dwStackSize</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 线程栈大小，若为0表示使用默认值； </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062af808495152-4\">　<span class=\"crayon-e\">LPTHREAD_START_ROUTINE </span><span class=\"crayon-v\">lpStartAddress</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 指向线程函数的指针；</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062af808495152-5\">　<span class=\"crayon-e\">LPVOID </span><span class=\"crayon-v\">lpParameter</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 传递给线程函数的参数，可以保存一个指针值； </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062af808495152-6\">　<span class=\"crayon-e\">DWORD </span><span class=\"crayon-v\">dwCreationFlags</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 线程建立是的初始标记，运行或挂起； </span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062af808495152-7\">　<span class=\"crayon-e\">LPDWORD </span><span class=\"crayon-v\">lpThreadId</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 指向接收线程号的DWORD变量； </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062af808495152-8\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>对临界资源控制的多线程控制的信号函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062b2352260024\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nHANDLE CreateEvent(\r\n　LPSECURITY_ATTRIBUTES lpEventAttributes, // 安全属性结构指针，可为NULL；\r\n　BOOL bManualReset, // 手动清除信号标记，TRUE在WaitForSingleObject后必须手动//调用RetEvent清除信号。若为　FALSE则在WaitForSingleObject\r\n　//后，系统自动清除事件信号；\r\n　BOOL bInitialState, // 初始状态，TRUE有信号，FALSE无信号；\r\n　LPCTSTR lpName // 信号量的名称，字符数不可多于MAX_PATH；\r\n　//如果遇到同名的其他信号量函数就会失败，如果遇\r\n　//到同类信号同名也要注意变化；\r\n);\r\n\r\nHANDLE CreateMutex(\r\n　LPSECURITY_ATTRIBUTES lpMutexAttributes, // 安全属性结构指针，可为NULL\r\n　BOOL bInitialOwner, // 当前建立互斥量是否占有该互斥量TRUE表示占有，\r\n　//这样其他线程就不能获得此互斥量也就无法进入由\r\n　//该互斥量控制的临界区。FALSE表示不占有该互斥量 \r\n　LPCTSTR lpName // 信号量的名称，字符数不可多于MAX_PATH如果\r\n　//遇到同名的其他信号量函数就会失败，\r\n　//如果遇到同类信号同名也要注意变化；\r\n);\r\n\r\n//初始化临界区信号，使用前必须先初始化\r\nVOID InitializeCriticalSection(\r\n　LPCRITICAL_SECTION lpCriticalSection // 临界区变量指针\r\n);\r\n\r\n//阻塞函数\r\n//如果等待的信号量不可用，那么线程就会挂起，直到信号可用\r\n//线程才会被唤醒，该函数会自动修改信号，如Event，线程被唤醒之后\r\n//Event信号会变得无信号，Mutex、Semaphore等也会变。\r\nDWORD WaitForSingleObject(\r\n　HANDLE hHandle, // 等待对象的句柄\r\n　DWORD dwMilliseconds // 等待毫秒数，INFINITE表示无限等待\r\n);\r\n//如果要等待多个信号可以使用WaitForMutipleObject函数\r\n*/</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b2352260024-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b2352260024-35\">35</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-1\"><span class=\"crayon-e\">HANDLE </span><span class=\"crayon-e\">CreateEvent</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-2\">　<span class=\"crayon-e\">LPSECURITY_ATTRIBUTES </span><span class=\"crayon-v\">lpEventAttributes</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 安全属性结构指针，可为NULL；</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-3\">　<span class=\"crayon-t\">BOOL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bManualReset</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 手动清除信号标记，TRUE在WaitForSingleObject后必须手动//调用RetEvent清除信号。若为　FALSE则在WaitForSingleObject</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-4\">　<span class=\"crayon-c\">//后，系统自动清除事件信号；</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-5\">　<span class=\"crayon-t\">BOOL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bInitialState</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 初始状态，TRUE有信号，FALSE无信号；</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-6\">　<span class=\"crayon-e\">LPCTSTR </span><span class=\"crayon-v\">lpName</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 信号量的名称，字符数不可多于MAX_PATH；</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-7\">　<span class=\"crayon-c\">//如果遇到同名的其他信号量函数就会失败，如果遇</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-8\">　<span class=\"crayon-c\">//到同类信号同名也要注意变化；</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-9\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-10\"> </div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-11\"><span class=\"crayon-e\">HANDLE </span><span class=\"crayon-e\">CreateMutex</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-12\">　<span class=\"crayon-e\">LPSECURITY_ATTRIBUTES </span><span class=\"crayon-v\">lpMutexAttributes</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 安全属性结构指针，可为NULL</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-13\">　<span class=\"crayon-t\">BOOL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bInitialOwner</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 当前建立互斥量是否占有该互斥量TRUE表示占有，</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-14\">　<span class=\"crayon-c\">//这样其他线程就不能获得此互斥量也就无法进入由</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-15\">　<span class=\"crayon-c\">//该互斥量控制的临界区。FALSE表示不占有该互斥量 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-16\">　<span class=\"crayon-e\">LPCTSTR </span><span class=\"crayon-v\">lpName</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 信号量的名称，字符数不可多于MAX_PATH如果</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-17\">　<span class=\"crayon-c\">//遇到同名的其他信号量函数就会失败，</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-18\">　<span class=\"crayon-c\">//如果遇到同类信号同名也要注意变化；</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-19\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-20\"> </div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-21\"><span class=\"crayon-c\">//初始化临界区信号，使用前必须先初始化</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-22\"><span class=\"crayon-t\">VOID</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">InitializeCriticalSection</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-23\">　<span class=\"crayon-e\">LPCRITICAL_SECTION </span><span class=\"crayon-v\">lpCriticalSection</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 临界区变量指针</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-24\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-26\"><span class=\"crayon-c\">//阻塞函数</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-27\"><span class=\"crayon-c\">//如果等待的信号量不可用，那么线程就会挂起，直到信号可用</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-28\"><span class=\"crayon-c\">//线程才会被唤醒，该函数会自动修改信号，如Event，线程被唤醒之后</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-29\"><span class=\"crayon-c\">//Event信号会变得无信号，Mutex、Semaphore等也会变。</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-30\"><span class=\"crayon-e\">DWORD </span><span class=\"crayon-e\">WaitForSingleObject</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-31\">　<span class=\"crayon-e\">HANDLE </span><span class=\"crayon-v\">hHandle</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 等待对象的句柄</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-32\">　<span class=\"crayon-e\">DWORD </span><span class=\"crayon-v\">dwMilliseconds</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 等待毫秒数，INFINITE表示无限等待</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-33\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b2352260024-34\"><span class=\"crayon-c\">//如果要等待多个信号可以使用WaitForMutipleObject函数</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b2352260024-35\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">/</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0123 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062b7489966648\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#include \"stdafx.h\"\r\n#include \"stdlib.h\"\r\n#include \"memory.h\"\r\nHANDLE evtTerminate; //事件信号,标记是否所有子线程都执行完\r\n/*\r\n下面使用了三种控制方法，你可以注释其中两种，使用其中一种。\r\n注意修改时要连带修改临界区PrintResult里的相应控制语句\r\n*/\r\nHANDLE evtPrint; //事件信号,标记事件是否已发生\r\n//CRITICAL_SECTION csPrint; //临界区\r\n//HANDLE mtxPrint; //互斥信号,如有信号表明已经有线程进入临界区并拥有此信号\r\nstatic long ThreadCompleted = 0; \r\n/*用来标记四个子线程中已完成线程的个数,当一个子线程完成时就对ThreadCompleted进行加一操作, 要使用InterlockedIncrement(long* lpAddend)和InterlockedDecrement(long* lpAddend)进行加减操作*/</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b7489966648-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b7489966648-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b7489966648-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b7489966648-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b7489966648-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b7489966648-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b7489966648-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b7489966648-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b7489966648-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b7489966648-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b7489966648-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062b7489966648-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062b7489966648-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b7489966648-1\"><span class=\"crayon-p\">#include \"stdafx.h\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b7489966648-2\"><span class=\"crayon-p\">#include \"stdlib.h\"</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b7489966648-3\"><span class=\"crayon-p\">#include \"memory.h\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b7489966648-4\"><span class=\"crayon-e\">HANDLE </span><span class=\"crayon-v\">evtTerminate</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//事件信号,标记是否所有子线程都执行完</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b7489966648-5\"><span class=\"crayon-c\">/*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b7489966648-6\"><span class=\"crayon-c\">下面使用了三种控制方法，你可以注释其中两种，使用其中一种。</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b7489966648-7\"><span class=\"crayon-c\">注意修改时要连带修改临界区PrintResult里的相应控制语句</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b7489966648-8\"><span class=\"crayon-c\">*/</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b7489966648-9\"><span class=\"crayon-e\">HANDLE </span><span class=\"crayon-v\">evtPrint</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//事件信号,标记事件是否已发生</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b7489966648-10\"><span class=\"crayon-c\">//CRITICAL_SECTION csPrint; //临界区</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b7489966648-11\"><span class=\"crayon-c\">//HANDLE mtxPrint; //互斥信号,如有信号表明已经有线程进入临界区并拥有此信号</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062b7489966648-12\"><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062b7489966648-13\"><span class=\"crayon-c\">/*用来标记四个子线程中已完成线程的个数,当一个子线程完成时就对ThreadCompleted进行加一操作, 要使用InterlockedIncrement(long* lpAddend)和InterlockedDecrement(long* lpAddend)进行加减操作*/</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062ba594051652\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//下面的结构是用于传送排序的数据给各个排序子线程\r\nstruct MySafeArray\r\n{\r\n　long* data;\r\n　int iLength;\r\n};</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062ba594051652-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062ba594051652-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062ba594051652-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062ba594051652-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062ba594051652-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062ba594051652-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062ba594051652-1\"><span class=\"crayon-c\">//下面的结构是用于传送排序的数据给各个排序子线程</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062ba594051652-2\"><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MySafeArray</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062ba594051652-3\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062ba594051652-4\">　<span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062ba594051652-5\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062ba594051652-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062bd608004159\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//打印每一个线程的排序结果\r\nvoid PrintResult(long* Array, int iLength, const char* HeadStr = \"sort\");</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062bd608004159-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062bd608004159-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062bd608004159-1\"><span class=\"crayon-c\">//打印每一个线程的排序结果</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062bd608004159-2\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PrintResult</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HeadStr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"sort\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062c0180073636\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//排序函数\r\nunsigned long __stdcall BubbleSort(void* theArray); //冒泡排序\r\nunsigned long __stdcall SelectSort(void* theArray); //选择排序\r\nunsigned long __stdcall HeapSort(void* theArray); //堆排序\r\nunsigned long __stdcall InsertSort(void* theArray); //插入排序</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c0180073636-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c0180073636-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c0180073636-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c0180073636-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c0180073636-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c0180073636-1\"><span class=\"crayon-c\">//排序函数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c0180073636-2\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">BubbleSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//冒泡排序</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c0180073636-3\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">SelectSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//选择排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c0180073636-4\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">HeapSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//堆排序</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c0180073636-5\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">InsertSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//插入排序</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>以上四个函数的声明必须适合作为一个线程函数的必要条件才可以使用CreateThread建立一个线程。</p>\n<ol>\n<li>调用方法必须是__stdcall，即函数参数压栈顺序由右到左，而且由函数本身负责<br>\n栈的恢复, C和C++默认是__cdecl, 所以要显式声明是__stdcall</li>\n<li>返回值必须是unsigned long</li>\n<li>参数必须是一个32位值，如一个指针值或long类型</li>\n<li>如果函数是类成员函数，必须声明为static函数，在CreateThread时函数指针有特殊的写法。如下(函数是类CThreadTest的成员函数中)：<br>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062c4990879756\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstatic unsigned long _stdcall MyThreadFun(void* pParam);\r\nhandleRet = CreateThread(NULL, 0, &amp;CThreadTestDlg::MyThreadFun, NULL, 0, &amp;ThreadID);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c4990879756-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c4990879756-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c4990879756-1\"><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">_stdcall </span><span class=\"crayon-e\">MyThreadFun</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pParam</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c4990879756-2\"><span class=\"crayon-v\">handleRet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CreateThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">CThreadTestDlg</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">MyThreadFun</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">ThreadID</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<br>\n之所以要声明为static是由于，该函数必须要独立于对象实例来使用，即使没有声明实例也可以使用。</li>\n</ol>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062c7049987860\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint QuickSort(long* Array, int iLow, int iHigh); //快速排序\r\n\r\nint main(int argc, char* argv[])\r\n{\r\n　long data[] = {123,34,546,754,34,74,3,56};\r\n　int iDataLen = 8;\r\n　//为了对各个子线程分别对原始数据进行排序和保存排序结果\r\n　//分别分配内存对data数组的数据进行复制\r\n　long *data1, *data2, *data3, *data4, *data5;\r\n　MySafeArray StructData1, StructData2, StructData3, StructData4;\r\n　data1 = new long[iDataLen];\r\n　memcpy(data1, data, iDataLen &lt;&lt; 2); //把data中的数据复制到data1中\r\n　//内存复制 memcpy(目标内存指针, 源内存指针, 复制字节数), 因为long的长度\r\n　//为4字节,所以复制的字节数为iDataLen &lt;&lt; 2, 即等于iDataLen*4\r\n　StructData1.data = data1;\r\n　StructData1.iLength = iDataLen;\r\n　data2 = new long[iDataLen];\r\n　memcpy(data2, data, iDataLen &lt;&lt; 2);\r\n　StructData2.data = data2;\r\n　StructData2.iLength = iDataLen;\r\n　data3 = new long[iDataLen];\r\n　memcpy(data3, data, iDataLen &lt;&lt; 2);\r\n　StructData3.data = data3;\r\n　StructData3.iLength = iDataLen;\r\n　data4 = new long[iDataLen];\r\n　memcpy(data4, data, iDataLen &lt;&lt; 2);\r\n　StructData4.data = data4;\r\n　StructData4.iLength = iDataLen;\r\n　data5 = new long[iDataLen];\r\n　memcpy(data5, data, iDataLen &lt;&lt; 2);\r\n　unsigned long TID1, TID2, TID3, TID4; \r\n　//对信号量进行初始化\r\n　evtTerminate = CreateEvent(NULL, FALSE, FALSE, \"Terminate\");\r\n　evtPrint = CreateEvent(NULL, FALSE, TRUE, \"PrintResult\");\r\n　//分别建立各个子线程\r\n　CreateThread(NULL, 0, &amp;BubbleSort, &amp;StructData1, NULL, &amp;TID1);\r\n　CreateThread(NULL, 0, &amp;SelectSort, &amp;StructData2, NULL, &amp;TID2);\r\n　CreateThread(NULL, 0, &amp;HeapSort, &amp;StructData3, NULL, &amp;TID3);\r\n　CreateThread(NULL, 0, &amp;InsertSort, &amp;StructData4, NULL, &amp;TID4);\r\n　//在主线程中执行行快速排序，其他排序在子线程中执行 \r\n　QuickSort(data5, 0, iDataLen - 1);\r\n　PrintResult(data5, iDataLen, \"Quick Sort\");\r\n　WaitForSingleObject(evtTerminate, INFINITE); //等待所有的子线程结束\r\n　//所有的子线程结束后，主线程才可以结束\r\n　delete[] data1;\r\n　delete[] data2;\r\n　delete[] data3;\r\n　delete[] data4;\r\n　CloseHandle(evtPrint);\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062c7049987860-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062c7049987860-51\">51</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">QuickSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//快速排序</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-3\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">argc</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">argv</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-4\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-5\">　<span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">123</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">34</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">546</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">754</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">34</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">74</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">56</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-6\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-7\">　<span class=\"crayon-c\">//为了对各个子线程分别对原始数据进行排序和保存排序结果</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-8\">　<span class=\"crayon-c\">//分别分配内存对data数组的数据进行复制</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-9\">　<span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">data1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">data2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">data3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">data4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">data5</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-10\">　<span class=\"crayon-e\">MySafeArray </span><span class=\"crayon-v\">StructData1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">StructData2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">StructData3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">StructData4</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-11\">　<span class=\"crayon-v\">data1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-12\">　<span class=\"crayon-e\">memcpy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//把data中的数据复制到data1中</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-13\">　<span class=\"crayon-c\">//内存复制 memcpy(目标内存指针, 源内存指针, 复制字节数), 因为long的长度</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-14\">　<span class=\"crayon-c\">//为4字节,所以复制的字节数为iDataLen &lt;&lt; 2, 即等于iDataLen*4</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-15\">　<span class=\"crayon-v\">StructData1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-16\">　<span class=\"crayon-v\">StructData1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-17\">　<span class=\"crayon-v\">data2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-18\">　<span class=\"crayon-e\">memcpy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-19\">　<span class=\"crayon-v\">StructData2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-20\">　<span class=\"crayon-v\">StructData2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-21\">　<span class=\"crayon-v\">data3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-22\">　<span class=\"crayon-e\">memcpy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-23\">　<span class=\"crayon-v\">StructData3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-24\">　<span class=\"crayon-v\">StructData3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-25\">　<span class=\"crayon-v\">data4</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-26\">　<span class=\"crayon-e\">memcpy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-27\">　<span class=\"crayon-v\">StructData4</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data4</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-28\">　<span class=\"crayon-v\">StructData4</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-29\">　<span class=\"crayon-v\">data5</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-30\">　<span class=\"crayon-e\">memcpy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-31\">　<span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TID1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TID2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TID3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TID4</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-32\">　<span class=\"crayon-c\">//对信号量进行初始化</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-33\">　<span class=\"crayon-v\">evtTerminate</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CreateEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FALSE</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FALSE</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Terminate\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-34\">　<span class=\"crayon-v\">evtPrint</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CreateEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">FALSE</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">TRUE</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"PrintResult\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-35\">　<span class=\"crayon-c\">//分别建立各个子线程</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-36\">　<span class=\"crayon-e\">CreateThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">BubbleSort</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">StructData1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">TID1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-37\">　<span class=\"crayon-e\">CreateThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">SelectSort</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">StructData2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">TID2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-38\">　<span class=\"crayon-e\">CreateThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">HeapSort</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">StructData3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">TID3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-39\">　<span class=\"crayon-e\">CreateThread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">InsertSort</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">StructData4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">TID4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-40\">　<span class=\"crayon-c\">//在主线程中执行行快速排序，其他排序在子线程中执行 </span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-41\">　<span class=\"crayon-e\">QuickSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-42\">　<span class=\"crayon-e\">PrintResult</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iDataLen</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Quick Sort\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-43\">　<span class=\"crayon-e\">WaitForSingleObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtTerminate</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">INFINITE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//等待所有的子线程结束</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-44\">　<span class=\"crayon-c\">//所有的子线程结束后，主线程才可以结束</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-45\">　<span class=\"crayon-v\">delete</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-46\">　<span class=\"crayon-v\">delete</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-47\">　<span class=\"crayon-v\">delete</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-48\">　<span class=\"crayon-v\">delete</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data4</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-49\">　<span class=\"crayon-e\">CloseHandle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtPrint</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062c7049987860-50\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062c7049987860-51\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0117 seconds] -->\r\n<p>冒泡排序思想(升序，降序同理，后面的算法一样都是升序):从头到尾对数据进行两两比较进行交换,小的放前大的放后。这样一次下来，最大的元素就会被交换的最后，然后下一次<br>\n循环就不用对最后一个元素进行比较交换了，所以呢每一次比较交换的次数都比上一次循环的次数少一，这样N次之后数据就变得升序排列了</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062cd107902872\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nunsigned long __stdcall BubbleSort(void* theArray)\r\n{\r\n　long* Array = ((MySafeArray*)theArray)-&gt;data;\r\n　int iLength = ((MySafeArray*)theArray)-&gt;iLength;\r\n　int i, j=0;\r\n　long swap;\r\n　for (i = iLength-1; i &gt;0; i--)\r\n　{\r\n　　for(j = 0; j &lt; i; j++)\r\n　　{\r\n　　　if(Array[j] &gt;Array[j+1]) //前比后大，交换\r\n　　　{\r\n　　　　swap = Array[j];\r\n　　　　Array[j] = Array[j+1];\r\n　　　　Array[j+1] = swap;\r\n　　　}\r\n　　}\r\n　}\r\n　PrintResult(Array, iLength, \"Bubble Sort\"); //向控制台打印排序结果\r\n　InterlockedIncrement(&amp;ThreadCompleted); //返回前使线程完成数标记加1\r\n　if(ThreadCompleted == 4) SetEvent(evtTerminate); //检查是否其他线程都已执行完\r\n　//若都执行完则设置程序结束信号量\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062cd107902872-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062cd107902872-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062cd107902872-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062cd107902872-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062cd107902872-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062cd107902872-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062cd107902872-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062cd107902872-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062cd107902872-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062cd107902872-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062cd107902872-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062cd107902872-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062cd107902872-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062cd107902872-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062cd107902872-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062cd107902872-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062cd107902872-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062cd107902872-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062cd107902872-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062cd107902872-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062cd107902872-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062cd107902872-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062cd107902872-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062cd107902872-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062cd107902872-1\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">BubbleSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062cd107902872-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062cd107902872-3\">　<span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062cd107902872-4\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062cd107902872-5\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062cd107902872-6\">　<span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">swap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062cd107902872-7\">　<span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062cd107902872-8\">　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062cd107902872-9\">　　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062cd107902872-10\">　　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062cd107902872-11\">　　　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//前比后大，交换</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062cd107902872-12\">　　　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062cd107902872-13\">　　　　<span class=\"crayon-v\">swap</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062cd107902872-14\">　　　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062cd107902872-15\">　　　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">swap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062cd107902872-16\">　　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062cd107902872-17\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062cd107902872-18\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062cd107902872-19\">　<span class=\"crayon-e\">PrintResult</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Bubble Sort\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//向控制台打印排序结果</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062cd107902872-20\">　<span class=\"crayon-e\">InterlockedIncrement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//返回前使线程完成数标记加1</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062cd107902872-21\">　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SetEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtTerminate</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//检查是否其他线程都已执行完</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062cd107902872-22\">　<span class=\"crayon-c\">//若都执行完则设置程序结束信号量</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062cd107902872-23\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062cd107902872-24\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0156 seconds] -->\r\n<p>选择排序思想:每一次都从无序的数据中找出最小的元素，然后和前面已经有序的元素序列的后一个元素进行交换，这样整个源序列就会分成两部分，前面一部分是已经排好序的有序序列，后面一部分是无序的，用于选出最小的元素。循环N次之后，前面的有序序列加长到跟源序列一样长，后面的无序部分长度变为0，排序就完成了。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062d1222684028\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nunsigned long __stdcall SelectSort(void* theArray)\r\n{\r\n　long* Array = ((MySafeArray*)theArray)-&gt;data;\r\n　int iLength = ((MySafeArray*)theArray)-&gt;iLength;\r\n　long lMin, lSwap;\r\n　int i, j, iMinPos;\r\n　for(i=0; i &lt; iLength-1; i++)\r\n　{\r\n　　lMin = Array[i];\r\n　　iMinPos = i;\r\n　　for(j=i + 1; j &lt;= iLength-1; j++) //从无序的元素中找出最小的元素\r\n　　{\r\n　　　if(Array[j] &lt; lMin)\r\n　　　{\r\n　　　　iMinPos = j;\r\n　　　　lMin = Array[j];\r\n　　　}\r\n　　}\r\n　　//把选出的元素交换拼接到有序序列的最后\r\n　　lSwap = Array[i];\r\n　　Array[i] = Array[iMinPos];\r\n　　Array[iMinPos] = lSwap;\r\n　}\r\n　PrintResult(Array, iLength, \"Select Sort\"); //向控制台打印排序结果\r\n　InterlockedIncrement(&amp;ThreadCompleted); //返回前使线程完成数标记加1\r\n　if(ThreadCompleted == 4) SetEvent(evtTerminate);//检查是否其他线程都已执行完\r\n　//若都执行完则设置程序结束信号量\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d1222684028-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d1222684028-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d1222684028-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d1222684028-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d1222684028-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d1222684028-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d1222684028-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d1222684028-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d1222684028-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d1222684028-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d1222684028-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d1222684028-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d1222684028-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d1222684028-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d1222684028-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d1222684028-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d1222684028-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d1222684028-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d1222684028-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d1222684028-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d1222684028-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d1222684028-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d1222684028-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d1222684028-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d1222684028-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d1222684028-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d1222684028-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d1222684028-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d1222684028-29\">29</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d1222684028-1\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">SelectSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d1222684028-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d1222684028-3\">　<span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d1222684028-4\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d1222684028-5\">　<span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lMin</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lSwap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d1222684028-6\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iMinPos</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d1222684028-7\">　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d1222684028-8\">　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d1222684028-9\">　　<span class=\"crayon-v\">lMin</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d1222684028-10\">　　<span class=\"crayon-v\">iMinPos</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d1222684028-11\">　　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//从无序的元素中找出最小的元素</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d1222684028-12\">　　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d1222684028-13\">　　　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lMin</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d1222684028-14\">　　　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d1222684028-15\">　　　　<span class=\"crayon-v\">iMinPos</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d1222684028-16\">　　　　<span class=\"crayon-v\">lMin</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d1222684028-17\">　　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d1222684028-18\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d1222684028-19\">　　<span class=\"crayon-c\">//把选出的元素交换拼接到有序序列的最后</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d1222684028-20\">　　<span class=\"crayon-v\">lSwap</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d1222684028-21\">　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iMinPos</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d1222684028-22\">　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iMinPos</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lSwap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d1222684028-23\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d1222684028-24\">　<span class=\"crayon-e\">PrintResult</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Select Sort\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//向控制台打印排序结果</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d1222684028-25\">　<span class=\"crayon-e\">InterlockedIncrement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//返回前使线程完成数标记加1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d1222684028-26\">　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SetEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtTerminate</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//检查是否其他线程都已执行完</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d1222684028-27\">　<span class=\"crayon-c\">//若都执行完则设置程序结束信号量</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d1222684028-28\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d1222684028-29\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0050 seconds] -->\r\n<p>堆排序思想：堆：数据元素从1到N排列成一棵二叉树，而且这棵树的每一个子树的根都是该树中的元素的最小或最大的元素这样如果一个无序数据集合是一个堆那么，根元素就是最小或最大的元素堆排序就是不断对剩下的数据建堆，把最小或最大的元素析透出来。下面的算法，就是从最后一个元素开始，依据一个节点比父节点数值大的原则对所有元素进行调整，这样调整一次就形成一个堆，第一个元素就是最小的元素。然后再对剩下的无序数据再进行建堆，注意这时后面的无序数据元素的序数都要改变，如第一次建堆后，第二个元素就会变成堆的第一个元素。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062d6208317649\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nunsigned long __stdcall HeapSort(void* theArray)\r\n{\r\n　long* Array = ((MySafeArray*)theArray)-&gt;data;\r\n　int iLength = ((MySafeArray*)theArray)-&gt;iLength;\r\n　int i, j, p;\r\n　long swap;\r\n　for(i=0; i　{\r\n　　for(j = iLength - 1; j&gt;i; j--) //从最后倒数上去比较字节点和父节点\r\n　　{\r\n　　　p = (j - i - 1)/2 + i; //计算父节点数组下标\r\n　　　//注意到树节点序数跟数组下标不是等同的，因为建堆的元素个数逐个递减\r\n　　　if(Array[j] &lt; Array[p]) //如果父节点数值大则交换父节点和字节点\r\n　　　{\r\n　　　　swap = Array[j];\r\n　　　　Array[j] = Array[p];\r\n　　　　Array[p] = swap;\r\n　　　}\r\n　　}\r\n　}\r\n　PrintResult(Array, iLength, \"Heap Sort\"); //向控制台打印排序结果\r\n　InterlockedIncrement(&amp;ThreadCompleted); //返回前使线程完成数标记加1\r\n　if(ThreadCompleted == 4) SetEvent(evtTerminate); //检查是否其他线程都已执行完\r\n　//若都执行完则设置程序结束信号量\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d6208317649-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d6208317649-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d6208317649-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d6208317649-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d6208317649-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d6208317649-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d6208317649-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d6208317649-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d6208317649-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d6208317649-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d6208317649-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d6208317649-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d6208317649-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d6208317649-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d6208317649-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d6208317649-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d6208317649-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d6208317649-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d6208317649-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d6208317649-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d6208317649-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d6208317649-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d6208317649-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062d6208317649-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062d6208317649-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d6208317649-1\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">HeapSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d6208317649-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d6208317649-3\">　<span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d6208317649-4\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d6208317649-5\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d6208317649-6\">　<span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">swap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d6208317649-7\">　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">i</span>　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d6208317649-8\">　　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//从最后倒数上去比较字节点和父节点</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d6208317649-9\">　　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d6208317649-10\">　　　<span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//计算父节点数组下标</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d6208317649-11\">　　　<span class=\"crayon-c\">//注意到树节点序数跟数组下标不是等同的，因为建堆的元素个数逐个递减</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d6208317649-12\">　　　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//如果父节点数值大则交换父节点和字节点</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d6208317649-13\">　　　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d6208317649-14\">　　　　<span class=\"crayon-v\">swap</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d6208317649-15\">　　　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d6208317649-16\">　　　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">swap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d6208317649-17\">　　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d6208317649-18\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d6208317649-19\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d6208317649-20\">　<span class=\"crayon-e\">PrintResult</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Heap Sort\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//向控制台打印排序结果</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d6208317649-21\">　<span class=\"crayon-e\">InterlockedIncrement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//返回前使线程完成数标记加1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d6208317649-22\">　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SetEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtTerminate</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//检查是否其他线程都已执行完</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d6208317649-23\">　<span class=\"crayon-c\">//若都执行完则设置程序结束信号量</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062d6208317649-24\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062d6208317649-25\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0049 seconds] -->\r\n<p>插入排序思想：把源数据序列看成两半，前面一半是有序的，后面一半是无序的，把无序的数据从头到尾逐个逐个的插入到前面的有序数据中，使得有序的数据的个数不断增大，同时无序的数据个数就越来越少，最后所有元素都会变得有序。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062db867128355\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nunsigned long __stdcall InsertSort(void* theArray)\r\n{\r\n　long* Array = ((MySafeArray*)theArray)-&gt;data;\r\n　int iLength = ((MySafeArray*)theArray)-&gt;iLength;\r\n　int i=1, j=0;\r\n　long temp;\r\n　for(i=1; i　{\r\n　　temp = Array[i]; //取出序列后面无序数据的第一个元素值\r\n　　for(j=i; j&gt;0; j--) //和前面的有序数据逐个进行比较找出合适的插入位置\r\n　　{\r\n　　　if(Array[j - 1] &gt;temp) //如果该元素比插入值大则后移\r\n　　　　Array[j] = Array[j - 1];\r\n　　　else //如果该元素比插入值小，那么该位置的后一位就是插入元素的位置\r\n　　　　break; \r\n　　}\r\n　　Array[j] = temp;\r\n　}\r\n　PrintResult(Array, iLength, \"Insert Sort\"); //向控制台打印排序结果\r\n　InterlockedIncrement(&amp;ThreadCompleted); //返回前使线程完成数标记加1\r\n　if(ThreadCompleted == 4) SetEvent(evtTerminate); //检查是否其他线程都已执行完\r\n　　//若都执行完则设置程序结束信号量\r\n　return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062db867128355-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062db867128355-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062db867128355-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062db867128355-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062db867128355-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062db867128355-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062db867128355-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062db867128355-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062db867128355-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062db867128355-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062db867128355-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062db867128355-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062db867128355-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062db867128355-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062db867128355-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062db867128355-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062db867128355-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062db867128355-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062db867128355-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062db867128355-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062db867128355-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062db867128355-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062db867128355-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062db867128355-1\"><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__stdcall </span><span class=\"crayon-e\">InsertSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">void</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062db867128355-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062db867128355-3\">　<span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062db867128355-4\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">MySafeArray*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">theArray</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062db867128355-5\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062db867128355-6\">　<span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062db867128355-7\">　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">i</span>　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062db867128355-8\">　　<span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//取出序列后面无序数据的第一个元素值</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062db867128355-9\">　　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//和前面的有序数据逐个进行比较找出合适的插入位置</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062db867128355-10\">　　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062db867128355-11\">　　　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//如果该元素比插入值大则后移</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062db867128355-12\">　　　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062db867128355-13\">　　　<span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//如果该元素比插入值小，那么该位置的后一位就是插入元素的位置</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062db867128355-14\">　　　　<span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062db867128355-15\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062db867128355-16\">　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062db867128355-17\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062db867128355-18\">　<span class=\"crayon-e\">PrintResult</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Insert Sort\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//向控制台打印排序结果</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062db867128355-19\">　<span class=\"crayon-e\">InterlockedIncrement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//返回前使线程完成数标记加1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062db867128355-20\">　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ThreadCompleted</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SetEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtTerminate</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//检查是否其他线程都已执行完</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062db867128355-21\">　　<span class=\"crayon-c\">//若都执行完则设置程序结束信号量</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062db867128355-22\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062db867128355-23\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0045 seconds] -->\r\n<p>快速排序思想：快速排序是分治思想的一种应用，它先选取一个支点，然后把小于支点的元素交换到支点的前边，把大于支点的元素交换到支点的右边。然后再对支点左边部分和右边部分进行同样的处理，这样若干次之后，数据就会变得有序。下面的实现使用了递归建立两个游标：iLow，iHigh；iLow指向序列的第一个元素，iHigh指向最后一个先选第一个元素作为支点，并把它的值存贮在一个辅助变量里。那么第一个位置就变为空并可以放置其他的元素。 这样从iHigh指向的元素开始向前移动游标，iHigh查找比支点小的元素，如果找到，则把它放置到空置了的位置（现在是第一个位置），然后iHigh游标停止移动，这时iHigh指向的位置被空置，然后移动iLow游标寻找比支点大的元素放置到iHigh指向的空置的位置，如此往复直到iLow与iHigh相等。最后使用递归对左右两部分进行同样处理</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2ef4e7062df013064887\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint QuickSort(long* Array, int iLow, int iHigh)\r\n{\r\n　if(iLow &gt;= iHigh) return 1; //递归结束条件\r\n　long pivot = Array[iLow];\r\n　int iLowSaved = iLow, iHighSaved = iHigh; //保未改变的iLow，iHigh值保存起来\r\n　while (iLow &lt; iHigh)\r\n　{\r\n　　while (Array[iHigh] &gt;= pivot &amp;&amp; iHigh &gt;iLow) //寻找比支点大的元素\r\n　　　iHigh -- ;\r\n　　Array[iLow] = Array[iHigh]; //把找到的元素放置到空置的位置\r\n　　while (Array[iLow] &lt; pivot &amp;&amp; iLow &lt; iHigh) //寻找比支点小的元素\r\n　　　iLow ++ ;\r\n　　Array[iHigh] = Array[iLow]; //把找到的元素放置到空置的位置\r\n　}\r\n　Array[iLow] = pivot; //把支点值放置到支点位置，这时支点位置是空置的\r\n　//对左右部分分别进行递归处理\r\n　QuickSort(Array, iLowSaved, iHigh-1);\r\n　QuickSort(Array, iLow+1, iHighSaved);\r\n　return 0;\r\n}\r\n\r\n//每一个线程都要使用这个函数进行输出，而且只有一个显示器，产生多个线程\r\n//竞争对控制台的使用权。\r\nvoid PrintResult(long* Array, int iLength, const char* HeadStr)\r\n{\r\n　WaitForSingleObject(evtPrint, INFINITE); //等待事件有信号\r\n　//EnterCriticalSection(&amp;csPrint); //标记有线程进入临界区\r\n　//WaitForSingleObject(mtxPrint, INFINITE); //等待互斥量空置（没有线程拥有它）\r\n　int i;\r\n　printf(\"%s: \", HeadStr);\r\n　for (i=0; i　{\r\n　　printf(\"%d,\", Array[i]);\r\n　　Sleep(100); //延时（可以去掉）\r\n/*只是使得多线程对临界区访问的问题比较容易看得到\r\n如果你把临界控制的语句注释掉，输出就会变得很凌乱，各个排序的结果会\r\n分插间隔着输出，如果不延时就不容易看到这种不对临界区控制的结果\r\n*/\r\n　}\r\n　printf(\"%d\\n\", Array[i]);\r\n　SetEvent(evtPrint); //把事件信号量恢复，变为有信号\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2ef4e7062df013064887-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5a2ef4e7062df013064887-41\">41</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">QuickSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-3\">　<span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//递归结束条件</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-4\">　<span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-5\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLowSaved</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHighSaved</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//保未改变的iLow，iHigh值保存起来</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-6\">　<span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-7\">　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-8\">　　<span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//寻找比支点大的元素</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-9\">　　　<span class=\"crayon-v\">iHigh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-10\">　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//把找到的元素放置到空置的位置</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-11\">　　<span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLow</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//寻找比支点小的元素</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-12\">　　　<span class=\"crayon-v\">iLow</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-13\">　　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//把找到的元素放置到空置的位置</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-14\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-15\">　<span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">iLow</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pivot</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//把支点值放置到支点位置，这时支点位置是空置的</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-16\">　<span class=\"crayon-c\">//对左右部分分别进行递归处理</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-17\">　<span class=\"crayon-e\">QuickSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLowSaved</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHigh</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-18\">　<span class=\"crayon-e\">QuickSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLow</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iHighSaved</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-19\">　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-20\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-22\"><span class=\"crayon-c\">//每一个线程都要使用这个函数进行输出，而且只有一个显示器，产生多个线程</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-23\"><span class=\"crayon-c\">//竞争对控制台的使用权。</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-24\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PrintResult</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">long</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iLength</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HeadStr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-25\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-26\">　<span class=\"crayon-e\">WaitForSingleObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtPrint</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">INFINITE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//等待事件有信号</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-27\">　<span class=\"crayon-c\">//EnterCriticalSection(&amp;csPrint); //标记有线程进入临界区</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-28\">　<span class=\"crayon-c\">//WaitForSingleObject(mtxPrint, INFINITE); //等待互斥量空置（没有线程拥有它）</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-29\">　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-30\">　<span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%s: \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HeadStr</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-31\">　<span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">i</span>　<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-32\">　　<span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d,\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-33\">　　<span class=\"crayon-e\">Sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//延时（可以去掉）</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-34\"><span class=\"crayon-c\">/*只是使得多线程对临界区访问的问题比较容易看得到</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-35\"><span class=\"crayon-c\">如果你把临界控制的语句注释掉，输出就会变得很凌乱，各个排序的结果会</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-36\"><span class=\"crayon-c\">分插间隔着输出，如果不延时就不容易看到这种不对临界区控制的结果</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-37\"><span class=\"crayon-c\">*/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-38\">　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-39\">　<span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d\\n\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2ef4e7062df013064887-40\">　<span class=\"crayon-e\">SetEvent</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">evtPrint</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//把事件信号量恢复，变为有信号</span></div><div class=\"crayon-line\" id=\"crayon-5a2ef4e7062df013064887-41\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0066 seconds] -->\r\n<p></p>\n<h1>四、 小结</h1>\n<p>对复杂的应用程序来说，线程的应用给应用程序提供了高效、快速、安全的数据处理能力。本实例讲述了线程处理中经常遇到的问题，希望对读者朋友有一定的帮助，起到抛砖引玉的作用。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113186\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113186votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113186\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["C/C++", "多线程"], "url": "http://blog.jobbole.com/113186/", "url_object_id": "81659ccadebd3390ce4d7edbf5b6047d", "fav_nums": 0, "comment_nums": 0}
{"praise_nums": "1", "title": "Linux 上的科学图像处理", "front_image_path": "full/11a48b07810c909fd0ce4f50b3b33355d43f04e2.jpg", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/11/1d34dd467641215c527e32ede94fe494.jpg"], "create_date": "2017/12/04", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linuxjournal.com/content/image-processing-linux\">Joey Bernard</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9091-1.html\">Linux中国/XYenChi</a>   </div><p>在显示你的数据和工作方面我发现了几个科学软件，但是我不会涉及太多方面。因此在这篇文章中，我将谈到一款叫 ImageJ 的热门图像处理软件。特别的，我会介绍 <a href=\"https://imagej.net/Fiji\">Fiji</a>，这是一款绑定了一系列用于科学图像处理插件的 ImageJ 软件。</p>\n<p>Fiji 这个名字是一个循环缩略词，很像 GNU 。代表着 “Fiji Is Just ImageJ”。 ImageJ 是科学研究领域进行图像分析的实用工具 —— 例如你可以用它来辨认航拍风景图中树的种类。 ImageJ 能划分物品种类。它以插件架构制成，海量插件可供选择以提升使用灵活度。</p>\n<p>首先是安装 ImageJ （或 Fiji）。大多数的 ImageJ 发行版都可有该软件包。你愿意的话，可以以这种方式安装它，然后根据你的研究安装所需的独立插件。另一种选择是安装 Fiji 的同时获取最常用的插件。不幸的是，大多数 Linux 发行版的软件中心不会有可用的 Fiji 安装包。幸而，官网上的简单安装文件是可以使用的。这是一个 zip 文件，包含了运行 Fiji 需要的所有文件目录。第一次启动时，你只会看到一个列出了菜单项的工具栏。（图 1）</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/4b5323a323cdefe54748623ef51e9287.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 1. 第一次打开 Fiji 有一个最小化的界面。</em></p>\n<p>如果你没有备好图片来练习使用 ImageJ ，Fiji 安装包包含了一些示例图片。点击“File”-&gt;“Open Samples”的下拉菜单选项（图 2）。这些示例包含了许多你可能有兴趣做的任务。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/f6badbcda0fa0d6b1bbee8ffab23cf01.jpg\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 2. 案例图片可供学习使用 ImageJ。</em></p>\n<p>如果你安装了 Fiji，而不是单纯的 ImageJ ，那么大量插件也会被安装。首先要注意的是自动更新器插件。每次打开 ImageJ ，该插件将联网检验 ImageJ 和已安装插件的更新。</p>\n<p>所有已安装的插件都在“插件”菜单项中可选。一旦你安装了很多插件，列表会变得冗杂，所以需要精简你选择的插件。你想手动更新的话，点击“Help”-&gt;“Update Fiji” 菜单项强制检测并获取可用更新的列表（图 3）。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/34164c1b61f5d6c5b4ab3cb14875ccb0.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 3. 强制手动检测可用更新。</em></p>\n<p>那么，现在，用 Fiji/ImageJ 可以做什么呢？举一例，统计图片中的物品数。你可以通过点击“File”-&gt;“Open Samples”-&gt;“Embryos”来载入示例。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/cfee97aeff09774aadd91f6997833cd6.jpg\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 4. 用 ImageJ 算出图中的物品数。</em></p>\n<p>第一步给图片设定比例，这样你可以告诉 ImageJ 如何判别物品。首先，选择在工具栏选择线条按钮。然后选择“Analyze”-&gt;“Set Scale”，然后就会设置比例尺包含的像素点个数(图 5)。你可以设置“known distance ”为 100，单元为“um”。</p>\n<p style=\"text-align: center\"><img src=\"http://jbcdn2.b0.upaiyun.com/2017/12/6c891f88f41eabeffcb2588fcaf1ce90.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 5. 很多图片分析任务需要对图片设定一个范围。</em></p>\n<p>接下来的步骤是简化图片内的信息。点击“Image”-&gt;“Type”-&gt;“8-bit”来减少信息量到 8 比特灰度图片。要分隔独立物体点击“Process”-&gt;“Binary”-&gt;“Make Binary”以自动设置图片门限。(图 6)。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/02d9a149336105dbcd1c481282437ae8.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 6. 有些工具可以自动完成像门限一样的任务。</em></p>\n<p>图片内的物品计数前，你需要移除像比例尺之类的人工操作。可以用矩形选择工具来选中它并点击“Edit”-&gt;“Clear”来完成这项操作。现在你可以分析图片看看这里是啥物体。</p>\n<p>确保图中没有区域被选中，点击“Analyze”-&gt;“Analyze Particles”来弹出窗口来选择最小尺寸，这决定了最后的图片会展示什么（图 7）。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/3cb08aa36ad4e4379b896c2aa1a3e636.png\" alt=\"\"></p>\n<p style=\"text-align: center\">*图 7. 你可以通过确定最小尺寸生成一个缩减过的图片。 *</p>\n<p>图 8 在总结窗口展示了一个概览。每个最小点也有独立的细节窗口。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/923cd604a9b9c69a21b07d1c35f433a7.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 8. 包含了已知最小点总览清单的输出结果。</em></p>\n<p>当你有一个分析程序可以工作于给定图片类型，你通常需要将相同的步骤应用到一系列图片当中。这可能数以千计，你当然不会想对每张图片手动重复操作。这时候，你可以集中必要步骤到宏，这样它们可以被应用多次。点击插件-&gt;“Macros”-&gt;“Record”，弹出一个新的窗口记录你随后的所有命令。所有步骤完成，你可以将之保存为一个宏文件，并且通过点击“Plugins”-&gt;“Macros”-&gt;“Run”来在其它图片上重复运行。</p>\n<p>如果你有非常特定的工作步骤，你可以简单地打开宏文件并手动编辑它，因为它是一个简单的文本文件。事实上有一套完整的宏语言可供你更加充分地控制图片处理过程。</p>\n<p>然而，如果你有真的有非常多的系列图片需要处理，这也将是冗长乏味的工作。这种情况下，前往“Process”-&gt;“Batch”-&gt;“Macro”，会弹出一个你可以设置批量处理工作的新窗口（图 9）。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/1e4c9582d599e12de41f88309714d52e.png\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 9. 对批量输入的图片用单一命令运行宏。</em></p>\n<p>这个窗口中，你能选择应用哪个宏文件、输入图片所在的源目录和你想写入输出图片的输出目录。也可以设置输出文件格式，及通过文件名筛选输入图片中需要使用的。万事具备之后，点击窗口下方的的“Process”按钮开始批量操作。</p>\n<p>若这是会重复多次的工作，你可以点击窗口底部的“Save”按钮保存批量处理到一个文本文件。点击也在窗口底部的“Open”按钮重新加载相同的工作。这个功能可以使得研究中最冗余部分自动化，这样你就可以在重点放在实际的科学研究中。</p>\n<p>考虑到单单是 ImageJ 主页就有超过 500 个插件和超过 300 种宏可供使用，简短起见，我只能在这篇短文中提出最基本的话题。幸运的是，还有很多专业领域的教程可供使用，项目主页上还有关于 ImageJ 核心的非常棒的文档。如果你觉得这个工具对研究有用，你研究的专业领域也会有很多信息指引你。</p>\n<hr>\n<p>作者简介：</p>\n<p>Joey Bernard 有物理学和计算机科学的相关背景。这对他在新不伦瑞克大学当计算研究顾问的日常工作大有裨益。他也教计算物理和并行程序规划。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113171\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113171votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113171\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["IT技术", "Linux"], "url": "http://blog.jobbole.com/113171/", "url_object_id": "8ed0804ae6bd382f6ca9cf8d8ea52aba", "fav_nums": 1, "comment_nums": 1}
{"praise_nums": "2", "title": "我们逃离北上广，美国人逃离硅谷", "front_image_path": "full/130a06ece44711ed14474d9df3946810a9faabe8.jpg", "front_image_url": ["http://wx2.sinaimg.cn/mw690/7cc829d3gy1fm661vp40wj20jg0d1412.jpg"], "create_date": "2017/12/05", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.com/@preethikasireddy/why-im-leaving-silicon-valley-72919edb3297\">Preethi Kasireddy</a>   译文出处：<a target=\"_blank\" href=\"http://36kr.com/p/5105906.html\">36kr - 郝鹏程</a>   </div><p>【导读】：硅谷长期以来一直被看作是科技与创新的理想场所，硅谷也汇聚了各个领域的高、精、尖人才和企业家。但随着共享知识时代的发展，世界各地科技领域都有了不同程度的发展，硅谷的唯一地位也有所改变。本文作者 <a href=\"https://medium.com/@preethikasireddy?source=post_header_lockup\">Preethi Kasireddy</a> 现在是一名区块链工程师，她在本文中回首了自己毕业后到硅谷工作，以及三年后离开硅谷的经历，或许对想要换个地方工作的你有一定的启发。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1fm661vp40wj20jg0d1412.jpg\" width=\"690\" height=\"462\"></p>\n<hr>\n<p>我永远想不到我会说这句话：这是我留在硅谷的最后一周。这篇文章是分享我个人经历的内容，这次我不想再讨论关于区块链或者 Javascript 方面的内容，而是想回首一下我过去几年一路走来的心路历程。这是一段让我渴望改变的旅程，开车去到洛杉矶寻找一个新的住处就是一个很大的改变。</p>\n<p><strong>我与硅谷结缘</strong></p>\n<p>五年前，也就是 2012 年的夏天，我搬到了硅谷。那时的我刚刚大学毕业，因为接到了一份新的工作 offer 偶然间来到了这里。我当时怀着急切而又紧张的心情想要在这里开始我的职业生涯，坦白来说，当时的我根本不知道该期待些什么。</p>\n<p>事实证明，我非常幸运，硅谷是世界上最好的地方之一，这里有众多优秀的企业家、工程师以及各色各样敢于尝试，希望通过技术改变这个世界的人。这与我的家乡新泽西的生活场景形成了鲜明的对比，那里大部分人接受得都是社区大学的教育，毕业后找一份朝九晚五的工作，25 岁左右就已经过上了安逸舒适的生活。在这样的环境中，无论是对于理想、冒险还是职业生涯的发展，可以选择的空间都非常小。</p>\n<p>所以，可以想象，来自新泽西的我到了旧金山工作之后就受到了一种文化的冲击。突然之间，我发现自己被技术和创新的氛围所包围，我发现自己已经身处于一个崇尚挑战自我的社区环境之中。在旧金山工作和生活的三年对我的生活有着很大的影响，因为我开始明白，那些愿意为那些看似疯狂的想法全身心投入，愿意去挑战风险的人，他们的做法其实并不疯狂。</p>\n<p><strong>第一个挑战：高盛</strong></p>\n<p>大学毕业之后我的第一份工作是在高盛的分析师岗位。在这一岗位上，通过与首席执行官和首席财务官们合作准备上市和收购事宜，我了解了科技初创企业的财务基本状况。这对于我后来直接与这些科技公司合作方面来说大有裨益，并且也埋下了我对于用软件解决问题方面的一颗兴趣的种子。</p>\n<p>在高盛工作一年后，我意识到银行业的工作并不是我长期想做的，我想像大学时期一样做一名工程师。于是我辞掉了这份光鲜亮丽的工作，离开了高盛。接下来我去了哪里呢？</p>\n<p><strong>第二个挑战：a16z</strong></p>\n<p>当时，我最大的可能性是进入一家小型工业型初创企业做一名系统工程师，但是，在一封偶然的冷邮件之后，一连串意外事件接踵而至。我收到了 a16z 交易团队岗位的 offer，这绝对是不可拒绝的一个机会，谢天谢地，我也确实没有想不开而去拒绝。</p>\n<p>我在 a16z 度过了接下来两年的时间，在那里，我向各种的互联网先驱人物学习，像 Marc Andreessen、Ben Horowitz 和 Chris Dixon 等。我看到成千上万的公司向我们走来，我了解他们的想法、他们的团队、他们面临的挑战以及他们的实力。我学到了创立一家成功的科技初创企业所具有的所有细节信息，同时我也学到了会导致企业失败的一些常见的错误。最重要的是，我遇到了许多不可思议的企业家，这些企业家激励着我未来有一天也能够像他们一样。</p>\n<p><strong>第三个挑战：回到工程领域</strong></p>\n<p>我离开 a16z 之后，就转向了软件工程领域，我还年轻，我想为这个世界创建出一些东西。你可以说我是在眼红那些企业家们，我也渴望能够创建出自己的产品，然后最终创立一家自己的企业。这一过渡让人感觉十分惊讶。我在学习，并且在以一种突破性的速度成长。我对自己的工作充满了激情，我也为我的工作感到兴奋。坦率来讲，作为一名工程师我感觉到有如此多的乐趣，甚至都不感觉自己是在工作。</p>\n<p>除了对于这份工作的热爱之外，我也感觉到我可以去做一些我之前想都不曾想的事情，因为工程师的工作让我有了自由：只要我想，随时随地，我都可以对心所欲的创建任何东西的自由；去了解任何事物基本运作原理的自由；教授和授权新开发者的自由；而最重要的是，成为一名创造者，从无到有创造出一些东西的自由。</p>\n<p><strong>感觉开始发生变化</strong></p>\n<p>在我离开 a16z 回到工程师岗位工作之后，我对硅谷的生活感受开始发生变化。得益于开发人员自由的生活方式，我开始更多的出行，结交了世界各地的工程师，包括巴黎、伦敦、印度、维也纳、澳大利亚、柏林、特拉维夫、南非、阿根廷、韩国等等。我也逐渐了解到原来在这个世界上，硅谷并不是工程、技术和创新聚集的唯一地方。我之前认为的只有在硅谷才能找到的东西，也开始出现在我去到的每一个城市之中。科技和创新的种子在纽约、洛杉矶、多伦多、柏林、特拉维夫、印度、瑞士甚至南非的一些地区开始生根发芽。</p>\n<p>这其实并不是什么意外，因为毕竟互联网的核心功能之一就是让知识传遍每一个角落。我自己也是从互联网上获得了大量的编程相关知识，其中有许多在过去是仅限于斯坦福大学、伯克利大学或麻省理工等顶级高校学生才能享用到的资源，而我也只是成千上万名网络资源渠道学习群体中的一员。</p>\n<p>如今，技术人员如果想寻找资金支持和社区环境，硅谷已经不再是唯一的选择。</p>\n<p><strong>硅谷的“群体思维”问题</strong></p>\n<p>尽管硅谷数十年来一直是科技和创新的中心，但我最近却发现硅谷文化存在一定程度的同质现象，并且注意到这一现象的也绝不只是我一人。同质化的原因在于每个人似乎都有着类似的故事，无论他们是软件工程师、产品经理、风险投资家还是企业家。他们的职业道路和目标可能与我的家乡—新泽西州风格不同，但在硅谷地区，你却能一遍又一遍听到类似甚至同样的故事。</p>\n<p>我去过的每一家咖啡店或者是每一家餐厅，都能听到有人在谈论他们那 2000 万美元的融资轮、2 亿美元的退出或者是 200% 的年同比增长率。这种类似的思维和兴趣，原来曾经是一件我认为很美好的事物，现在对我来说却不再美好。我开始注意到他们有很多类似的看法和想法，他们称之为“群体思维”。</p>\n<p>硅谷有它的矛盾性，它是一个建立在不可预测的诸多想法之上的一个可预测思维模式的地方。</p>\n<p>我在硅谷学到的第一课：要知道自己的梦想可以实现，并且走出你自己的道路</p>\n<p>我并不是说硅谷没有让我学到任何重要的东西，事实上，这是一个学习冒险的理想场所，也是一个让你了解到创造自己道路所拥有的价值，并且证明自己可以做到这一点的地方。</p>\n<p>在硅谷工作生活期间，我刻意让自己努力对自己的梦想说“可以”。我想要自由地去创造我想要的任何东西，我做到了。我想尽快地学习和成长，我也做到了。我想结识来自世界各地的人，向他们学习，我同样做到了。我想找到自己独特的目标，而不是盲从“成功”的道路，我再次做到了。最重要的是，我想打造一条属于自己的独一无二的道路，我也正在这样做。</p>\n<p>现在回头去看，在我离开 a16z 去追寻自己的道路时，我为自己制定了一个路线图，其中包含三部分：</p>\n<p>1、找到我最喜欢开发的东西。</p>\n<p>2、做到真正的擅长。</p>\n<p>3、用我的这些专业技能对世界产生积极的影响。</p>\n<p>在过去两年的时间里，我学习了编程领域不同方面的知识，例如网络开发、移动开发和分布式系统等，也学习了包括机器学习和区块链等不同应用领域的知识。我故意让自己广泛涉猎，尽可能的接触更多的分支，也学会了为那些我最感兴趣的产品编写代码。最终，我锁定了区块链。</p>\n<p>我对区块链的青睐始于我在 a16z 时首次对 Coinbase 进行投资之时，之后我一直关注区块链技术的发展，最后也进入了 Coinbase 担任软件工程师，这也让我进一步深入到这一领域之中。离开 Coinbase 之后，我继续了解和学习了区块链的方方面面，现在我也进入了第二个阶段，让自己做到真正的擅长。下一步就是利用我的技能去“创建一个能够积极改变世界的公司或者是产品”。</p>\n<p>追求自我的道路并不需要我留在硅谷。工程师的自由让我可以去学习并且成长为一名企业家、作家和演讲者，为我打开了一个全新的世界。这也让我意识到，我可以在世界上任何一个地方去扮演这些角色。</p>\n<p><strong>我在硅谷学到的第二课：不是只有在硅谷才能改变世界</strong></p>\n<p>世界现在越来越全球化，硅谷只是其中的一种生活方式，其中的一种思维方式，一种观察世界的方式。除此之外，还有很多其他的方式，因为毕竟技术是全球性的，工程、创新和创业精神都是全球性的。事实证明亦是如此。我们看到中国和印度等国家的科技已经实现跨越式发展，他们也走出了自己的道路，像中国的微信、印度的 Paytm 和肯尼亚的 mPesa。</p>\n<p>并且，现在得益于互联网的发展，全球各地之间的联系也更加容易，更加快捷。具体自己身处何地已经不再是一个限制条件，我们可以在南非编码，然后将产品运往硅谷。除此之外，区块链革命的全球性让我对此感到真正的触动。过去一年时间里，我在区块链技术方面进行了很多的研究和开发，我发现硅谷之外的许多城市，像纽约、柏林、多伦多、中国、韩国和曼谷在推动区块链技术方面都走在前沿位置。硅谷以外的许多地方正在开展一些知名度很高的项目，试图将区块链技术带给大众。这一次，我发现硅谷并不是他们的中心。</p>\n<p>然后我产生了一个疯狂的想法，我能离开硅谷，并且仍然可以去实现我的梦想吗？离开硅谷我还可以创立一家规模庞大、足以改变世界的企业吗？离开硅谷我还能对这一世界产生很大的影响吗？这些问题的答案越来越明显，“可以”！</p>\n<p>诚然，也有很多原因可以让我留在硅谷。毕竟，硅谷是一个庞大的企业家网络，到处都是实现梦想的人。硅谷知道如何孕育出色的初创企业，并且在过去的五年里，我自己在硅谷也搭建起了优秀的人脉网络。留在这里，我会比较轻松，很容易就过上比较成功的生活，至少从财务上来看是这样。</p>\n<p>但坦率来说，我不想留在这里。这样感觉有些太简单了，我年轻，充满激情，富有动力，我不能让惯性、熟悉感或者是金钱成为我不去追求更大、更艰巨目标的借口。我要挑战自己，为我的目标而奋斗，哪怕日夜兼程也在所不惜。金钱给不了我这些，赚钱也从来不是我的主要动力。我在拿到第一年的奖金之前就离开了高盛，因为我当时急切想去 a16z，所以无法忍受再过两个月自己讨厌的生活。之后，我又放弃了在 a16z 的职业发展道路，成为了一名开发人员。挑战以及有意义是我每天奋斗的动力所在。我渴望去硅谷以外，去做更多的事情，去了解更多，体验更多。</p>\n<p><strong>去往下一个城市</strong></p>\n<p>也许我对硅谷和旧金山有这样的感觉只是因为我在这里待得太久，也许是我需要改变，也许是成为一名工程师、作家和企业家的愿望在向我呼唤，告诉我在任何地方都可以做到这一点。我收拾行李，踏上了去往洛杉矶的下一趟冒险之旅。</p>\n<p>你问我是否感到害怕吗？废话，不止害怕，而且是很害怕。除了几个几年来都没有联系的大学同学之外，我在洛杉矶没有一个认识的人。这听上去很可怕，但同时我也感到欣喜，来到一个完全陌生的城市，我可以像五年前我去到硅谷一样，从头开始建立起一个全新的人脉网络。</p>\n<p>那我为什么会选择洛杉矶呢？原因如下：</p>\n<p>1、地理位置接近：洛杉矶与旧金山位置比较近， 3 个小时我就可以从洛杉矶到旧金山的任何地方。地理位置是我在选择下一个城市时重点考虑的一个因素，因为对我来说，保持与硅谷的联系非常重要，距离近意味着我可以随时、经常性的去到硅谷。</p>\n<p>2、科技发展：洛杉矶的科技领域刚刚开始呈现出蓬勃发展之势。随着 Snapchat、Google、Facebook、微软和亚马逊等许多巨型科技公司在那里建立了大型的园区，你可以想象洛杉矶绝对不乏优秀的科技人才。科技蓬勃发展之势刚刚显现，我预计这将在洛杉矶的每一个行业都产生连锁反应。这也就意味着，在科技发展热潮期，作为工程师或者是企业家有机会去发挥出自己的影响力。</p>\n<p>3、天气：不夸张的说，洛杉矶的天气绝对是完美。每天早晨醒来，都会发现眼光明媚，气温也完美到不行。我会有更多的时间待在户外，心情也奇迹般变得更好。</p>\n<p>4、多样性：我喜欢洛杉矶到处都是充满创意和艺术氛围的人文环境，接触到多元化的人让我感觉耳目一新。我从科技领域以外的那些人（从事时尚、媒体、娱乐、艺术和房地产等）身上学到了很多东西。</p>\n<p>5、忙碌：这里的忙碌非常真实，在过去几个月的时间里，我迅速体验到了这一点。我还记得在洛杉矶，我早晨第一次去健身房的场景，当时是五点半，健身房却已经是半满员状态。当时，我看了自己的手表好几次，一度怀疑是我眼睛出了问题或者是手表出了问题。过了几天之后，我习惯了他们的这一状态，我发现他们都是同我一样，富有动力、充满热情、为目标全力以赴的人。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112376\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112376votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112376\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 9 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["职场", "硅谷", "程序员", "职场"], "url": "http://blog.jobbole.com/112376/", "url_object_id": "5e5aab5f6e5a7864fa89f576ddfd8a08", "fav_nums": 1, "comment_nums": 9}
{"praise_nums": "1", "title": "如何自动唤醒和关闭 Linux", "front_image_path": "full/72efc180c69dbb1f32bcb55772e58d9f3b2d3bc1.jpg", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/12/8532c70a7858309142e35612babf5b09.png"], "create_date": "2017/12/06", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linux.com/learn/intro-to-linux/2017/11/wake-and-shut-down-linux-automatically\">Carla Schroder</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9115-1.html\">Linux中国/魑魅魍魉</a>   </div><blockquote><p>了解如何通过配置 Linux 计算机来根据时间自动唤醒和关闭。</p></blockquote>\n<p>不要成为一个电能浪费者。如果你的电脑不需要开机就请把它们关机。出于方便和计算机宅的考虑，你可以通过配置你的 Linux 计算机实现自动唤醒和关闭。</p>\n<h3 id=\"toc_1\">宝贵的系统运行时间</h3>\n<p>有时候有些电脑需要一直处在开机状态，在不超过电脑运行时间的限制下这种情况是被允许的。有些人为他们的计算机可以长时间的正常运行而感到自豪，且现在我们有内核热补丁能够实现只有在硬件发生故障时才需要机器关机。我认为比较实际可行的是，像减少移动部件磨损一样节省电能，且在不需要机器运行的情况下将其关机。比如，你可以在规定的时间内唤醒备份服务器，执行备份，然后关闭它直到它要进行下一次备份。或者，你可以设置你的互联网网关只在特定的时间运行。任何不需要一直运行的东西都可以将其配置成在其需要工作的时候打开，待其完成工作后将其关闭。</p>\n<h3 id=\"toc_2\">系统休眠</h3>\n<p>对于不需要一直运行的电脑，使用 root 的 cron 定时任务（即 <code>/etc/crontab</code>）可以可靠地关闭电脑。这个例子创建一个 root 定时任务实现每天晚上 11 点 15 分定时关机。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f05e8c4921902122341\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# crontab -e -u root\r\n# m h  dom mon dow   command\r\n15 23 * * * /sbin/shutdown -h now\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f05e8c4921902122341-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f05e8c4921902122341-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f05e8c4921902122341-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f05e8c4921902122341-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f05e8c4921902122341-1\"><span class=\"crayon-p\"># crontab -e -u root</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f05e8c4921902122341-2\"><span class=\"crayon-p\"># m h  dom mon dow   command</span></div><div class=\"crayon-line\" id=\"crayon-5a2f05e8c4921902122341-3\"><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">shutdown</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">now</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f05e8c4921902122341-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>以下示例仅在周一至周五运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f05e8c492b667409724\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n15 23 * * 1-5 /sbin/shutdown -h now\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f05e8c492b667409724-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f05e8c492b667409724-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f05e8c492b667409724-1\"><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">shutdown</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">now</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f05e8c492b667409724-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>您可以为不同的日期和时间创建多个 cron 作业。 通过命令 <code>man 5 crontab</code> 可以了解所有时间和日期的字段。</p>\n<p>一个快速、容易的方式是，使用 <code>/etc/crontab</code> 文件。但这样你必须指定用户：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f05e8c492f657173276\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n15 23 * * 1-5 root shutdown -h now\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f05e8c492f657173276-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f05e8c492f657173276-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f05e8c492f657173276-1\"><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">root </span><span class=\"crayon-v\">shutdown</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">now</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f05e8c492f657173276-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h3 id=\"toc_3\">自动唤醒</h3>\n<p>实现自动唤醒是一件很酷的事情；我大多数 SUSE （SUSE Linux）的同事都在纽伦堡，因此，因此为了跟同事能有几小时一起工作的时间，我不得不需要在凌晨五点起床。我的计算机早上 5 点半自动开始工作，而我只需要将自己和咖啡拖到我的桌子上就可以开始工作了。按下电源按钮看起来好像并不是什么大事，但是在每天的那个时候每件小事都会变得很大。</p>\n<p>唤醒 Linux 计算机可能不如关闭它可靠，因此你可能需要尝试不同的办法。你可以使用远程唤醒（Wake-On-LAN）、RTC 唤醒或者个人电脑的 BIOS 设置预定的唤醒这些方式。这些方式可行的原因是，当你关闭电脑时，这并不是真正关闭了计算机；此时计算机处在极低功耗状态且还可以接受和响应信号。只有在你拔掉电源开关时其才彻底关闭。</p>\n<h3 id=\"toc_4\">BIOS 唤醒</h3>\n<p>BIOS 唤醒是最可靠的。我的系统主板 BIOS 有一个易于使用的唤醒调度程序 (图 1)。对你来说也是一样的容易。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/8532c70a7858309142e35612babf5b09.png\" alt=\"wakeup\"></p>\n<p style=\"text-align: center\"><em>图 1：我的系统 BIOS 有个易用的唤醒定时器。</em></p>\n<h3 id=\"toc_5\">主机远程唤醒（Wake-On-LAN）</h3>\n<p>远程唤醒是仅次于 BIOS 唤醒的又一种可靠的唤醒方法。这需要你从第二台计算机发送信号到所要打开的计算机。可以使用 Arduino 或树莓派Raspberry Pi发送给基于 Linux 的路由器或者任何 Linux 计算机的唤醒信号。首先，查看系统主板 BIOS 是否支持 Wake-On-LAN ，要是支持的话，必须先启动它，因为它被默认为禁用。</p>\n<p>然后，需要一个支持 Wake-On-LAN 的网卡；无线网卡并不支持。你需要运行 <code>ethtool</code> 命令查看网卡是否支持 Wake-On-LAN ：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f05e8c4933618441045\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ethtool eth0 | grep -i wake-on\r\n        Supports Wake-on: pumbg\r\n        Wake-on: g\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f05e8c4933618441045-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f05e8c4933618441045-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a2f05e8c4933618441045-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f05e8c4933618441045-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f05e8c4933618441045-1\"><span class=\"crayon-p\"># ethtool eth0 | grep -i wake-on</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f05e8c4933618441045-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Supports </span><span class=\"crayon-v\">Wake</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">on</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pumbg</span></div><div class=\"crayon-line\" id=\"crayon-5a2f05e8c4933618441045-3\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">Wake</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">on</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">g</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f05e8c4933618441045-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这条命令输出的 “Supports Wake-on” 字段会告诉你你的网卡现在开启了哪些功能：</p>\n<ul>\n<li>d — 禁用</li>\n<li>p — 物理活动唤醒</li>\n<li>u — 单播消息唤醒</li>\n<li>m — 多播（组播）消息唤醒</li>\n<li>b — 广播消息唤醒</li>\n<li>a — ARP 唤醒</li>\n<li>g — 特定数据包magic packet唤醒</li>\n<li>s — 设有密码的特定数据包magic packet唤醒</li>\n</ul>\n<p><code>ethtool</code> 命令的 man 手册并没说清楚 <code>p</code> 选项的作用；这表明任何信号都会导致唤醒。然而，在我的测试中它并没有这么做。想要实现远程唤醒主机，必须支持的功能是 <code>g</code> —— 特定数据包magic packet唤醒，而且下面的“Wake-on” 行显示这个功能已经在启用了。如果它没有被启用，你可以通过 <code>ethtool</code> 命令来启用它。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f05e8c4937349401940\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ethtool -s eth0 wol g\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f05e8c4937349401940-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f05e8c4937349401940-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f05e8c4937349401940-1\"><span class=\"crayon-p\"># ethtool -s eth0 wol g</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f05e8c4937349401940-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>这条命令可能会在重启后失效，所以为了确保万无一失，你可以创建个 root 用户的定时任务（cron）在每次重启的时候来执行这条命令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f05e8c493a380298060\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;a href=\"http://www.jobbole.com/members/wx1688837567\"&gt;@reboot&lt;/a&gt; /usr/bin/ethtool -s eth0 wol g\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f05e8c493a380298060-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f05e8c493a380298060-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f05e8c493a380298060-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.jobbole.com/members/wx1688837567\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">reboot</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ethtool</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">eth0 </span><span class=\"crayon-i\">wol</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">g</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f05e8c493a380298060-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>另一个选择是最近的网络管理器Network Manager版本有一个很好的小复选框来启用 Wake-On-LAN（图 2）。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/12/484c151f9364dbf2b5e6e97c306ae643.png\" alt=\"wakeonlan\"></p>\n<p style=\"text-align: center\"><em>图 2：启用 Wake on LAN</em></p>\n<p>这里有一个可以用于设置密码的地方，但是如果你的网络接口不支持安全开机Secure On密码，它就不起作用。</p>\n<p>现在你需要配置第二台计算机来发送唤醒信号。你并不需要 root 权限，所以你可以为你的普通用户创建 cron 任务。你需要用到的是想要唤醒的机器的网络接口和MAC地址信息。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a2f05e8c493e060183562\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n30 08 * * * /usr/bin/wakeonlan D0:50:99:82:E7:2B \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a2f05e8c493e060183562-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a2f05e8c493e060183562-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a2f05e8c493e060183562-1\"><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">wakeonlan </span><span class=\"crayon-v\">D0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">99</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">82</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">E7</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2B</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a2f05e8c493e060183562-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3 id=\"toc_6\">RTC 唤醒</h3>\n<p>通过使用实时闹钟来唤醒计算机是最不可靠的方法。对于这个方法，可以参看 <a href=\"https://www.linux.com/learn/wake-linux-rtc-alarm-clock\">Wake Up Linux With an RTC Alarm Clock</a> ；对于现在的大多数发行版来说这种方法已经有点过时了。</p>\n<p>下周继续了解更多关于使用 RTC 唤醒的方法。</p>\n<p>通过 Linux 基金会和 edX 可以学习更多关于 Linux 的免费 <a href=\"https://training.linuxfoundation.org/linux-courses/system-administration-training/introduction-to-linux\">Linux 入门</a>教程。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113203\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113203votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113203\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["IT技术", "Linux"], "url": "http://blog.jobbole.com/113203/", "url_object_id": "3df441752a08d89bbdb7dfb4db4c0e45", "fav_nums": 0, "comment_nums": 0}
{"praise_nums": "2", "title": "大道至简，职场上做人做事做管理", "front_image_path": "full/e64fca57ae5ee001243898066e610c2e2800dcaa.jpg", "front_image_url": ["http://wx1.sinaimg.cn/mw690/7cc829d3gy1fm5xvq0mhvj20m80etq7d.jpg"], "create_date": "2017/12/05", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/JimmyZhang/archive/2011/08/20/2146390.html\">JimmyZhang</a>   </div><p>大道至简，越是根源和基本的问题，道理实际上越简单。关于如何做人、做事、做管理的书很多，我看得不多，但是我觉得这些书更多是侧重技术和实现细节上的，而很少从人的思想和观念去讲。实际上，从根本上去说，如何做人做事是世界观的问题，也是一个哲学话题。很多人和我一样，已经到了快30的年纪，是需要去思考一下应该如何做人如何做事的，也需要一套简单、有效、完整的体系来指导自己，而这套体系将是让自己安身立命于这个世界的基石。</p>\n<h3>职场上如何做人</h3>\n<p>关于在职场上如何做人，我只谨记两个字－－服务。你要把自己当成一个品牌去爱惜，当成一家公司去经营，你要牢牢记住你之所以能在一家公司立足，是因为公司需要你的服务。我们经常会抱怨某某银行的工作人员服务态度不好、某某商品的售后服务不好，但从来不去思考自己对公司的服务好不好？公司的任务有没有如期完成，是不是没有哪个任务是提前完成的，几乎所有任务都拖到“最后期限”？工作完成的够不够彻底，是不是答复已经完成了，结果日后又出状况？完成后有没有向上级反馈，是不是等到上级问你完成了没有，你才去报告进度？拖延的任务有没有持续跟进，是不是上级不追了这个任务最后就不了了之了？上面这些问题我都是反复遇见的，其实根本原因就是没有意识到你其实在做一项服务，你在公司的发展前景，全都取决你对公司的服务够不够好。设想一下，如果交给你的每件事情都可以迎刃而解、化险为夷，让人感觉稳妥、放心、踏实，你自然会收到更多更重要的“订单”。当你的单多到你忙不过来的时候怎么办？招下属啊，呵呵，恭喜你，你已经是领导了。反之，如果给你一件事情你要拖延，给你一件事情你办不好，给你一件事情就没了下文了，让人不放心，久而久之你就“无单可做”了，那么公司重新请一个人就可以了，干嘛非要用你呢？</p>\n<p>服务不光是对于自己供职的公司，对于公司的客户也是一样的。每一次去客户那里出差前，我总是再三叮嘱自己，我此次之行是为客户做服务的，是去为客户解决问题的。这个心态非常重要，我们做软件系统的，去见客户除了做演示、做培训，很多时候就是处理现场问题，难免遇到客户对系统的投诉，比如系统速度慢、bug多等问题。当你有了这样的心态，你就会谦虚地接受客户的批评，细致地记录客户提出的问题，然后一项项地去思考如何解决，并且应该给客户一份详尽的解决方案。有了这样的心态，你会不自觉地、自然而然地与客户站在一边，让他感到你是在为他着想，帮助他去解决问题的。在你面对客户时，应该有这样一个虔诚的信念：我是去为客户服务的，为他解决他所解决不了的问题的。如果你没有这样的心态，面对投诉很可能就会产生厌烦，而且容易为自己的问题进行辩解。这种做法给客户的感觉就是你竭力在证明你是对的他是错的，这样你就站在客户的对面了。</p>\n<p>在客户面前的表现对你的职场发展也是非常有好处的，尤其是接触到一些跨国企业时，你优良的职业素养会为你赢来客户的认同与尊敬。这样当你哪天希望寻找更高的平台，只要放个口风出去，立即就会有Offer了。所以认真服务好客户只赚不赔。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fm5xvq0mhvj20m80etq7d.jpg\" width=\"690\" height=\"460\"></p>\n<h3>职场上如何做事</h3>\n<p>关于如何做事，也有很多的理论，比如要事第一，把事情分为紧急、重要等等，这些我都不讨论了，我只就我自己的经验来谈一谈。</p>\n<p>对于如何做事，我也恪守一个信条：不焦不燥，把心沉下去，将注意力集中于要解决的问题上。</p>\n<p>我看过这样一个故事，是说从前有一户人家，家里的菜园中有一块大石头，经常会有人不小心撞到；儿子就问：为什么不把他挖走呢？他的爸爸说：这个石头爷爷的时代就有了，就是因为它那么大，不好挖才一直在那里；又过了一代人，家里的一个媳妇实在受不了，就扛着锄头去挖了，她已经做好了心理准备要挖几天的时间，结果一天就挖完了… …原来那个石头的中间是空的。</p>\n<p>我们遇到的很多事情也是一样的，看似棘手、难以解决，实际上只要你认真地去分析、去思考，然后放手去做，往往并没有想象中的那么困难。你需要克服心中的顽石。我发现一些人遇到问题后，很轻易地就会说：这个我做不了，这个实现不了，这个我也没办法。其实就好像看到这块大石头一样，被它的“外表”吓住了，而放弃了应有的行动。</p>\n<p>而且我发现了一个有趣的现象，不管多么困难的问题，只要你沉下心去思考如何解决，就好像在冥冥之中上苍在看着你一样，当你拼到最后就要打算认输的时候，往往会出现新的契机和方法。</p>\n<p>另外，我发现有些人遇到问题的时候，他想的是这件事如何困难如何难以完成，这样的思维方式是有问题的，是一种保守且退缩的思维；遇到问题的时候，想的应该是如何才能够完成。我一般采取这样几个步骤：1、列出所有的可能性；2、分析各种可能性；3、选择一种实现起来最简单、快速的可能性；4、去实现。</p>\n<p>除此以外，我发现一些人在做事的时候，会以“这样做很麻烦”来作为不采纳方案的理由，而不是“这样是否必要”或者“这样是否更好”来作为标准，实际上“麻烦”应该是排在“是否必要”、“是否更好”后面进行考虑的。如果一种实现方式，虽然麻烦，但是很有必要，且对客户来说更好，那么就算麻烦也要去做。但是程序员往往关心的是会不会很麻烦，是不是要修改很多地方，是不是给自己带来很多工作量… …告诉你，你关心的这些不是最重要的。</p>\n<h3>职场上如何做管理</h3>\n<p>和上面一样，做管理也有很多的细节，我也都不谈了，因为这些都是一本书一本书的讲，而我觉得要简单、有效、好操作，所以我也只说三点。</p>\n<p>我觉得做好一个技术经理，只要下面的三点就好了：</p>\n<p><strong>1、德行</strong></p>\n<p>德行其实就是品德，简单地讲就是要善良、诚恳。最重要的，你做事的出发点要是好的，对别人是没有坏心的。为什么说出发点一定要是好的呢？我们还是以服务客户的例子来说，在为客户解决问题的时候，如果我们的出发点是好的，是站在客户一边尽心尽力去为客户解决问题的，那么即便由于方法、能力、条件等各方面的原因，事情搞砸了或者没有做好，也很容易获得客户的理解和原谅。很可能的情形是，你就算做失败了也一样赢得客户；相反，如果你的出发点是“省麻烦”，“赶紧交差了事”，“完成任务”，如果事情做成了也就算了，一旦失败了，你看看客户会怎么样？告诉你，好的客户会批评你、投诉你，因为他对你还有期望；更多的客户是什么话也不说，直接换个供应商就是了，才懒得理你。记住永远不要把客户当成傻瓜，你是如何做事情的，客户是很容易感受得到的。所以，面对和服务客户没有那么多的技巧，你不需要有多好的口才和魅力，也用不着忽悠和夸大其词(我发现很多销售人员都是这样，你可以骗客户一次，但就没有第二次了)，你只需要放下身段，兢兢业业地为客户着想，设身处地地解决他的问题就可以。对待下属也是一样的，你对他的奖励也好，惩罚也好，出发点一定要是好的。我对待下属遵循的原则就是：我是在帮助你，帮你把工作做的更好，帮你获得更大的提高，而不是说找你茬儿，跟你过意不去，或者是挤兑你压迫你。德行是基本的，有一个好的德行，至少可以保证你的下属不会讨厌你。</p>\n<p><strong>2、敬业</strong></p>\n<p>如果有人问我，下属和经理的区别是什么。我会告诉他：下属等着别人交代事情做，经理想着还有哪些事情可以做。这其实是一个积极心态的问题，作为一个中层干部，你需要将公司的事情当成自己家的事情来处理，当你有这样的心态，你就是再怎么加班都不会有怨言的，即便分文不取… （有谁见过给自己家装修叫苦不迭的？）如果你可以长期保持这样的状态，你的这种献身精神和敬业精神，会很轻易地感染你的下属和你的同事，你会感觉到在公司左右逢源，而且你也会更有话语权，大家会更重视你的意见，同事和下属也会对你报以更多的信任。当这种情况出现时，管理起下属还会困难吗？但需要注意的是，你的敬业精神不是说体现在无休止的加班上，工作异常繁忙、经常性加班其实是工作没有做好的表现之一，加班只应该出现在紧急情况发生的时候，而不应该是一种常态。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fm5xvphmcxj20m80ewwfw.jpg\" width=\"690\" height=\"462\"></p>\n<p><strong>3、技术</strong></p>\n<p>如果有人问我，技术人员和其他人员最大的区别是什么。我会告诉他：技术人员个个自以为是，认为别人的技术都不如自己。呵呵，可能大家不爱听，但我观察到的现象就是这样的。很少有人愿意去读别人的代码，彼此都觉得写得好烂。所以，如果想赢得技术人员的钦佩，你需要有压倒性的技术能力。这个压倒性的优势，不是下属70分，你80分，而是下属70分，你要做到100分；下属100分，你要做到150分。所以，缺乏技术能力的人去管理技术人员往往是吃力不讨好的，可能下属表面上服从你，心里根本不当你一回事儿，这样管理起来就存在障碍了。当然，如果你的德行非常好，也非常敬业，技术就显得不那么重要了；而如果你已经满足了前面两条，同时技术也很精湛，那自然是锦上添花了。</p>\n<p>上面就是一点点心得，欢迎交流。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112724\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112724votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112724\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["职场", "职场"], "url": "http://blog.jobbole.com/112724/", "url_object_id": "5e244333b2e2d343e4da5e7def593f3e", "fav_nums": 0, "comment_nums": 2}
{"praise_nums": "3", "title": "如果你还不了解机器学习的简史，请看这篇文章", "front_image_path": "full/0104e7c14a36650ad69f34f21bb577491ca53eda.jpg", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/12/914a7f9323808e5b11330f275e0ac4c8.jpg"], "create_date": "2017/12/05", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/nemoland\">李大萌</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://www.erogol.com/brief-history-machine-learning/\">Eren Golge</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：全面介绍机器学习的发展史，从感知机、神经网络、决策树、SVM、Adaboost到随机森林、Deep Learning。<b></b></p>\n<p><img class=\"alignnone\" src=\"http://www.erogol.com/wp-content/uploads/2014/05/test.jpg\" width=\"1793\" height=\"1104\"></p>\n<p>自科学技术和人工智能最初发展开始，科学家Blaise Pascal和Von Leibniz就思考着如何制造一台像人类一样具有智力的机器。 著名作家朱尔斯·凡尔纳，弗兰克·鲍姆（绿野仙踪），玛丽·雪莱（科学怪人），乔治·卢卡斯（George Lucas）（星球大战）梦想着具有人类行为的物种存在，甚至拥有在不同的环境中能战胜人类的技能。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://www.erogol.com/wp-content/uploads/2014/05/Arts_et_Metiers_Pascaline_dsc03869.jpg\" width=\"392\" height=\"215\"></p>\n<p style=\"text-align: center;\">帕斯卡机器执行减法和求和- 1642</p>\n<p>机器学习是人工智能最重要发展分支之一，在科研领域和工业界都是非常热门的课题。企业和学校投入大量的资源来做提升知识面。最近，该领域在许多不同任务上取得了非常可观的结果，与人类的表现（交通标志的识别，机器学习达到了98.98％ – 已经超过了人类）相当。</p>\n<p>在这里，我想分享一下机器学习发展一个粗略的时间表，并且标记了一些里程碑，但并不完整。此外，在阅读本文所有的论断时，都请在前自行脑补一句：“据我所知”。</p>\n<p>普遍推广机器学习的第一人是Hebb，他在1949年提出了基于神经心理学习方法，被称为Hebbian学习理论。通过简单的解释，研究递归神经网络（RNN）节点之间的相关性。它记录网络上的共性，像记忆一样工作。这个论点正式地表达是这样：</p>\n<blockquote><p>我们假设反射活动（或“踪迹”）的持续性或重复性会诱导细胞的持续性变化，增加其稳定性…当细胞A的轴突足够接近细胞B时，就能反复或持续刺激细胞B。此时，会在其中一个细胞或者两者中发生一些生长过程或代谢变化，来增加A的效率[1]。</p></blockquote>\n<p><img class=\"alignnone aligncenter\" src=\"http://www.erogol.com/wp-content/uploads/2015/11/us__en_us__ibm100__700_series__checkers__620x350.jpg\" width=\"620\" height=\"350\"></p>\n<p style=\"text-align: center;\">Arthur Samuel</p>\n<p>在1952年，IBM的亚瑟·塞缪尔（Arthur Samuel）开发了一个西洋棋的程序。 该程序能够通过棋子的位置学习一个隐式模型，为下一步棋提供比较好的走法。 塞缪尔与这个程序对局了很多次，并观察到这个程序在经过一段时间的学习后可以发挥得更好。</p>\n<p>塞缪尔用这个程序驳倒了机器无法超越书面代码，并像人类一样学习模式的论断。 他创造并定义了“机器学习”：</p>\n<blockquote><p>机器学习是一个能使计算机不用显示编程就能获得能力的研究领域。</p></blockquote>\n<p><img class=\"alignnone aligncenter\" src=\"http://csis.pace.edu/~ctappert/srd2011/photos/Rosenblatt-ratlab.jpg\" width=\"453\" height=\"681\"></p>\n<p style=\"text-align: center;\">F. Rosenblatt</p>\n<p>1957年，Rosenblatt再次提出以神经科学为背景的第二个机器学习模型——感知器，它与今天的机器学习模型更像。当时，这是非常激动人心的发现，实际上它比Hebbian的想法更容易实现。 Rosenblatt用下面几句话介绍了感知器模型：</p>\n<blockquote><p>感知器模型的设计是针对于一般智能系统的一些基本特性，而不会纠缠于一些特定生物体通常情况下未知的特性。[2]</p></blockquote>\n<p>3 年后，Widrow [4]发明的Delta学习规则载入机器学习史册，该规则很快被用作感知器训练的实践程序。它也被称为最小二乘问题。这两个想法的结合创造了一个很好的线性分类器。 然而，感知器模型的热度在1969年被Minsky [3]所取代。他提出了著名的XOR问题，感知器无法对线性不可分割的数据进行分类。 这是Minsky对神经网络社区的反驳。 此后，神经网络的研究一直止步不前，到在80年代才有所突破。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://www.cs.ru.nl/~ths/rt2/col/h10/draw-LTUdecis.GIF\" width=\"477\" height=\"168\"></p>\n<p style=\"text-align: center;\">面向不可线性分割数据的 XOR 问题</p>\n<p>尽管早在1973年由Linnainmaa [5] 以“反向自动差异化模式”为名提出了BP思想，但是直到1981年，Werbos [6]才提出将神经网络特定反向传播（BP）算法应用到多层感知器（MLP）。BP仍然是当今神经网络架构的关键组成部分。有了这些新想法，神经网络的研究再次加速。1985年至1986年间，神经网络研究人员相继提出了采用BP训练多层感知器（MLP）的理念（Rumelhart，Hinton，Williams [7] – Hetch，Nielsen [8]）</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://www.erogol.com/wp-content/uploads/2014/05/Hetch_Nielsen_NN.png\" width=\"891\" height=\"754\"></p>\n<p style=\"text-align: center;\">From Hetch and Nielsen [8]</p>\n<p>另一个学派，在1986年，J.R.Quinlan [9]提出了另一个非常著名的ML算法，我们称之为决策树，更具体地说是ID3算法。这是机器学习另一个主流的闪光点。此外，ID3以软件的形式发布，能够以简单的规则及其明确的推论更好地应用到实际生活中，与黑匣子神经网络模型相反。</p>\n<p>在ID3之后，社区探索了很多不同的可用方案和算法改进（例如ID4，回归树，CART …），而且仍然是机器学习中的活跃话题之一。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://www.erogol.com/wp-content/uploads/2014/05/Quinlan_ID3.png\" width=\"631\" height=\"445\"></p>\n<p style=\"text-align: center;\">图：一个简单的决策树</p>\n<p>机器学习领域最重要突破之一是Vapnik和Cortes [10]在1995年提出的支持向量机（网络）（SVM），它具有非常强的理论论证和实证结果。SVM将机器学习社区分为NN（神经网络）和SVM两个派别。 然而在2000年左右，SVM内核化版本提出之后，NN在这两个派别之间的竞争并不容易（我无法找到关于该主题的第一篇文章）。SVM在很多之前用NN模型解决的问题上得出了最佳结果。 此外，与NN模型相比，SVM能够充分利用凸优化，泛化边际理论和内核化的所有深奥知识。 因此，它可以从不同学科中获得巨大的推动力，促进理论和实践的快速发展。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://www.erogol.com/wp-content/uploads/2014/05/SVM_Vapnik.png\" width=\"1036\" height=\"583\"></p>\n<p style=\"text-align: center;\">From Vapnik and Cortes [10]</p>\n<p>NN模型受到的另一次重创是1 9 9 1年Hochreiter的论文[40]和2001年Hochreiter等人的论文[11]，表明在使用BP算法时，NN单位饱和后会发生梯度损失。简单来说，训练NN模型时由于单位饱和，在迭代超过一定数量后冗余，因此NN非常倾向于在短时间的时期过度拟合。</p>\n<p>不久之前，Freund和Schapire在1997年提出了另一个实体机器学习模型，该模型采用增强的弱分类器组合，称为Adaboost。当时给这项工作的作者颁发了戈德尔奖。 Adaboost通过易于训练的弱分类器进行训练，给那些难的样本更高的权重。这种模型是许多不同任务的基础，如面部识别和检测。它也是PAC（Probably Approximately Correct）理论的一种实现。通常，所谓的弱分类器被Adaboost选为简单的判决树（单个决策树节点）。他们这样介绍Adaboost;</p>\n<blockquote><p>我们研究的模型可以解释为一个广泛的，抽象的扩展的研究在线预测模型到一般决策理论的设置[11]</p></blockquote>\n<p>2001年，Breiman [2001]探索了另一个综合模型，该模型集合了多个决策树，其中每个决策树的训练集都是从实例集合中随机选择的，每个节点的特征都是从特征集合随机选择的。基于这些特性，该模型被称为随机森林（RF）。RF从理论上和实际上都证明不会产生过拟合。甚至AdaBoost在数据集中有过拟合和离群点时，随机森林能有更好的鲁棒性（有关RF的更多详细信息，请参阅我的旧帖子http://www.erogol.com/randomness-randomforests/）。随机森林在许多不同的领域，如Kaggle比赛中也有很出色的表现。</p>\n<p>随机森林是树预测因子的组合，每棵树取决于独立采样的随机向量，并且森林中的所有树都具有相同的分布。森林的泛化误差a随着森林中树木数量增多而收敛[12]</p>\n<p>随着时间向今天靠近，神经网络（NN）的一个新时代——深度学习已经被商业化了。这个短语只是指具有许多广泛连续层的NN模型。三层的NN模型崛起大致在2005年，由近期和现在的Hinton，LeCun，Bengio，Andrew Ng和诸多大师结合了许多不同的发现。下面我列举了一些机器学习领域重要的概念（我猜，我将专门为深度学习写一篇文章）;</p>\n<ul>\n<li>GPU编程</li>\n<li>卷积NN [18] [20] [40]</li>\n<li>解卷积网络[21]</li>\n<li>算法优化</li>\n<li>随机梯度下降[19] [22]</li>\n<li>BFGS和L-BFGS [23]</li>\n<li>共轭梯度下降[24]</li>\n<li>反向传播[40] [19]</li>\n<li>整流器单元</li>\n<li>稀疏性[15] [16]</li>\n<li>Dropout网 [26]</li>\n<li>Maxout网[25]</li>\n<li>无监督的NN模型[14]</li>\n<li>深度信念网[13]</li>\n<li>堆叠式自动编码器[16] [39]</li>\n<li>去噪NN模型[17]</li>\n</ul>\n<p>结合所有这些想法和未列出的想法，NN 模型能够在对象识别、语音识别、NLP等不同的任务中击败之前的技术。但是应该注意的是，这并不意味着其他ML流派的结束。虽然深度学习的成功故事还在接二连三的上演，但是它在训练成本和调整模型的外部参数方面还有很多争议。此外，由于其简单性，SVM的使用依然非常普遍。 （据说可能会引起很大争议）</p>\n<p>在结束之前，我需要再介绍一个比较前沿的 ML 趋势。随着WWW和社交媒体的发展，一个新的术语——大数据出现了，并大大影响了ML研究。由于大数据的数据规模都很大，许多强大的ML算法在相当多的系统中（当然对大型技术公司来说不是这样）是无用的。因此，研究人员提出了一套新的简单模型——dubbed Bandit Algorithms，被称为强盗算法[27 – 38]（通常都基于在线学习），使学习更容易，适应大规模问题。</p>\n<p>我只是总结了机器学习的发展史。如果你发现错误，不足或没有添加引用的地方，请不要犹豫，可以通过各种方式告诉我。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113180\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113180votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113180\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/nemoland\">李大萌</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/nemoland\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            码农一枚        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/nemoland\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/nemoland/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/nemoland/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 24</a> · <a title=\"QQ：727231337\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：qq_nemo\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["IT技术", "机器学习"], "url": "http://blog.jobbole.com/113180/", "url_object_id": "5e4d58414069c0e60dc714bf042ec15d", "fav_nums": 4, "comment_nums": 4}
{"praise_nums": "1", "title": "浅谈软件项目规模估计——怎么估？", "front_image_path": "full/c9f125038e5d310ae300941c495b188be503ee72.jpg", "front_image_url": ["http://insights.thoughtworks.cn/wp-content/uploads/2017/12/Hofstadter.png"], "create_date": "2017/12/05", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><blockquote><p>做事所花费的时间总是比你预期的要长，即使你的预期中考虑了侯世达定律。</p>\n<p>—— 侯世达，哥德尔、埃舍尔、巴赫</p></blockquote>\n<p><a class=\"fancybox\" href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/12/Hofstadter.png\" rel=\"fancybox\"><img class=\"aligncenter size-full wp-image-6214\" src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/12/Hofstadter.png\" alt=\"\" width=\"992\" height=\"794\"></a></p>\n<p>周三的下午，我像平常一样，写着代码听着歌，突然从天而降一份莫名其妙的故事列表，说让我给个人天，用来投标用。作为一个技术异常牛逼的高端程序员，这对我来说岂不是 A Piece Of Shit…哦不，Cake。拿着列表，打眼一看就知道是做什么 — 又是个审批流系统。注册、登录、忘记密码…这些也需要时间？！哦，还要做个SSO，可能要做点数据集成，给个15人天吧！又是一堆CRUD… CRUD 各给2人天一共8个。看起来有4个 Model，乘个4，32个人天差不多。前端还有些工作量，找前端估一下…还有些跟遗留系统集成的部分，这块应该比较麻烦，给个30人天差不多…还要用微服务架构，估计需要一些基础环境，每个组件给3个人天，一共8个组件，算24吧….总共算起来130个开发人天，差不多，再加点buffer，算150吧！差不多了吧…</p>\n<p>这一幕是不是有点眼熟？不过，这样的做法可能会带来下面的几个问题：</p>\n<h3>1. 估计者的估计点数是否能代表团队的估计点数？</h3>\n<p>问题的答案显而易见。那么有同学会说，此时团队的人员还没完成配置，没办法让真实团队进行功能的估计。确实是这个样子，所以我们只能力所能及的去模拟真实团队进行估计。一般，交付项目的团队肯定不会全上非常有经验的同学，人员配比一定会有 leverage，也就是 Senior 人员和 Junior 人员的比例。所以，在估计的过程中，至少要引入 Junior 的同事，能够从不同经验的角度来看待同样的问题，来使估计不会过分“乐观”。</p>\n<h3>2. 是否有故事卡片之外的工作时间没有考虑到呢？</h3>\n<p>上文中的估计看起来是采用的经典的“理想人天”估计法，如果使用这样的估计方法，势必要考虑一些虽然没有在故事卡工作量中，但也一定会花费时间的事务，包括但不限于：</p>\n<ul>\n<li>回复电子邮件（沟通成本）</li>\n<li>面试（内部耗损）</li>\n<li>参加会议（包括内部会议，比如站会、Retro、Code Diff、技术研讨会议、客户沟通会议等）</li>\n<li>为当前发布提供支持（上线支持）</li>\n<li>培训？（内部的 Session）</li>\n<li>任务之间切换/被人打断（程序员出栈入栈的消耗…）</li>\n<li>修复bug（一定会有 Bug，一定会花时间修…）</li>\n<li>写各种文档（对于对文档比较看重的客户，这一部分会占用不少的时间）</li>\n</ul>\n<p>这些事务会伴随整个交付过程中发生，基本上都是正常交付必不可少的工作内容，而且根据笔者的经验，这些事情占据的时间并不比完成故事卡的编码工作要少。</p>\n<h3>3. 故事卡的需求是否清晰呢？</h3>\n<p>在项目启动前拿到的故事列表，往往只有 Epic 级别的，也就是很粗粒度的故事卡。故事卡中的 AC（Acceptance Criteria，验收条件）往往只考虑了最简单的 Happy Path，然而大部分项目中（尤其是 ToB项目），Exception 才是相对复杂的，这些异常情况往往需要花费更多的时间完成。在这种情况下进行估计，可想而知，一些隐藏的需求点往往难以发现。</p>\n<p><a class=\"fancybox\" href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/12/project-scale.jpg\" rel=\"fancybox\"><img class=\"aligncenter size-large wp-image-6213\" src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/12/project-scale-1024x683.jpg\" alt=\"\" width=\"700\" height=\"467\"></a></p>\n<h3>问题可能的答案</h3>\n<p>那么想要解决上面的问题，或者说更好一点的缓解上述问题的方案是什么呢？《敏捷估计与规划》中介绍了一些基本的方法。</p>\n<h4>首先，要进行集体估计</h4>\n<p>集体估计可以缓解因为个人能力不同所引发的单点偏差，不同的开发成员对于某个需求在不同角度的阐述，也容易让大家对需求有更全面的理解，也易于发现潜藏在需求中的风险。阐述的过程中，出现复杂问题时，可以及时联系相应的专家资源。对于一些规模较大的卡片，也可以综合大家的意见，进行更合理的拆解。同时，需要由要做次工作的人来进行估计，这样会产生更多的责任感，可以在一定程度上缓解乐观估计的问题（Lederer and Prasad 1992）。</p>\n<h4>其次，是方法</h4>\n<p>《敏捷估计与规划》介绍了2种基本的方法：理想人天法和故事点法。</p>\n<p><strong>1. 理想人天法</strong></p>\n<p>理想人天法就是直接把故事卡估计成理想人天。所谓理想人天，就是“在需求非常明确的情况下，进行编码、测试工作所花费的时间”。就好像篮球比赛一样，每节12分钟，4节总共48分钟，这是比赛的理想时间。但是谁都知道，一般NBA每场比赛都要2个半小时左右，比赛激烈的话三个小时都有可能，比赛真正持续的时间与理想时间是有较大差距的。相比于篮球比赛，软件项目“场外”的工作就更多了，除了上面问题2列出的那些实务之外，像是方案变更引发的大量沟通、集成联调、测试过程中的需求讲解、项目的交接等等，这些工作也需要算到项目时间之内。同时，对于同一个项目，不同的人根据其能力、经验的不同，会有不同的理想人天。</p>\n<p>所以在估计完理想人天之后，如何进行实际人天的换算，在实际应用中，仍然是个大问题，所以…最好就不要用了。</p>\n<p><a class=\"fancybox\" href=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/12/Estimate.jpg\" rel=\"fancybox\"><img class=\"aligncenter size-large wp-image-6212\" src=\"http://insights.thoughtworks.cn/wp-content/uploads/2017/12/Estimate-1024x512.jpg\" alt=\"\" width=\"700\" height=\"350\"></a></p>\n<p><strong>2. 故事点法</strong></p>\n<p>故事点法就是按照故事卡的规模和难度，给予每张故事卡一个点数。注意，这里的点数代表的不是所需的人天，而更多的是难度系数。</p>\n<p>开发人员因为自己技能、经验、能力的不同，解决同样的问题，所花的时间差别是很大的，但对规模的估计却是一样的。就好比从北京到上海，坐飞机1个多小时，高铁5个小时，步行要…一个月左右吧，距离是一样的，根据不同的速度，会花费不同的时间。</p>\n<p>同时，人们一般很难对一个规模进行准确的估计，比如从北京到上海的绝对距离是多少，估计没几个人知道。但是，人们能够比较容易的比较两件事物的差距或者说倍数关系，比如：北京到上海的距离跟从上海到香港的距离是差不多的，这个距离是北京到郑州距离的两倍。所以我们在做估计的时候，可以按照难度系数分成几波，然后在内部在进行一些比较和排序，然后按照比较的差距分配一个规模点数，比如1、2、3、5、8、13。</p>\n<p>大家可以看到，这个规模点数并不是连续的数字，而是采用了菲波那切这一个神奇的数列。这样的数列有2个好处，一个是不会出现连续的倍数关系，比如4点的故事卡片是2点故事卡片的2倍；其次是表明出规模越大的卡片，其不确定性也承递增趋势，所以会给更高的点数。</p>\n<p>有了故事点数，我们仍然无法判定项目什么时间能够交付，因为缺少一个“速度”，也就是团队的开发速度。如果面对的是一个成熟的团队，并且使用类似的技术栈，且与客户的合作模式基本相同的话，那么可以参考前一个项目的速度，来进行交付时间的计算。但如果面对的是全新的客户、不同的技术栈，以及完全重新配置的团队，那么速度基本是不可估的。这时候，有时候会根据 Tech Lead 和 PM 的（Pai）经（Nao）验（Dai），进行硬估：把每个点数转化成N个人天。比如1个点数需要2个人天，那么100个点数的项目就是200个人天。当然，这种方法…说多了会掉泪。</p>\n<h4>最后，给项目加些缓冲（Buffer）</h4>\n<p>一般来说，面对这种情况，本着对客户和我们自己负责的态度，需要给项目加一些缓冲区（Buffer）。Buffer 分两种，一种是功能Buffer，一种是进度 Buffer。</p>\n<p><strong>功能缓冲</strong></p>\n<p>增加功能 Buffer，简单来说，就是把全部的故事列表进行估计，假设得到总点数是100点；然后按照优先级进行排序，挑出其中的MVP，要少于总量的 70%，作为必须要做（Must Have）的部分。剩下的 30% 作为做了更好、不做也不影响主要功能（Nice To Have）的部分，通过这种方式来缓冲项目里程碑的风险。</p>\n<p><strong>进度缓冲</strong></p>\n<p>进度 Buffer，是用来缓冲估计之外的异常情况引发的项目时间的拉长。进度 Buffer 根据项目的不确定性的差异，计算的方法和结果会有较大差异，有兴趣可以参考《敏捷规划与估计》，这里就不赘述了。不过根据 Leach(2000)准则提出的建议，至少要保持整个项目的20%以上，否则也许不能为整个项目提供足够的保护。</p>\n<h3>不是总结的总结</h3>\n<p>上面的这些方法能一定程度的规避风险，给开发团队带来一定的空间，但过分的强调估计和交付计划的准确性，会带来更深层级的问题：</p>\n<ol>\n<li>output over outcome。客户更关注功能列表的完成，而不是产生的业务价值。</li>\n<li>开发团队会倾向于裁剪用户故事的功能，3个点的故事卡，尽量控制在规定时间内完成，即使可以花更多时间把事情做的更好。</li>\n<li>控制需求变更。可以进行需求变更，但这个过程更像是一个异常的情况，而不是喜闻乐见的。</li>\n<li>当我们发现了更好的业务点、idea时候，会倾向于隐瞒，以免额外的业务功能会增加工作量。需求变更往往会涉及客户谈判的事情，尤其是当客户观念是传统的供应商管理策略：我来控制需求的全景，能多做点就多做点。</li>\n<li>在客户合作和谈判的天平上，客户关系会向谈判的方向倾斜。</li>\n</ol>\n<p>估计和计划会使团队和客户更多的聚焦在工作量，而不是工作的价值上。如果能够引导客户从 output 导向的思维转变到 outcome 导向上，那么团队就不用再疲于奔命的完成那些并不会用到的feature上，而是可以有更多的时间去提升产品质量，进一步提升业务价值。</p>\n<p class=\"p1\"><span class=\"s1\">文／ThoughtWorks张久坤</span></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113169\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113169votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113169\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">\r\n\t\t\t<img src=\"http://tp3.sinaimg.cn/1774908135/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            ThoughtWorks是一家全球IT咨询公司，追求卓越软件质量，致力于科技驱动商业变革。擅长构建定制化软件产品，帮助客户快速将概念转化为价值。同时为客户提供用户体验设计、技术战略咨询、组织转型等咨询服务。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/thoughtworkschina\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/thoughtworkschina/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 78</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://insights.thoughtworkers.org/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/thoughtworkschina\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "tags": ["开发", "软件开发"], "url": "http://blog.jobbole.com/113169/", "url_object_id": "7a16af3cbe5d612e0cf98bb0bc900bb8", "fav_nums": 1, "comment_nums": 1}
